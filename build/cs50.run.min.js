/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function i(a,m){var l=a.nodeName.toLowerCase();if("area"===l){var k=a.parentNode,j=k.name,d;return !a.href||!j||k.nodeName.toLowerCase()!=="map"?!1:(d=f("img[usemap=#"+j+"]")[0],!!d&&h(d))}return(/input|select|textarea|button|object/.test(l)?!a.disabled:"a"==l?a.href||m:m)&&h(a)}function h(a){return !f(a).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?f(document):a},zIndex:function(k){if(k!==e){return this.css("zIndex",k)}if(this.length){var j=f(this[0]),b,a;while(j.length&&j[0]!==document){b=j.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){a=parseInt(j.css("zIndex"),10);if(!isNaN(a)&&a!==0){return a}}j=j.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(m,l){function a(n,q,p,o){return f.each(k,function(){q-=parseFloat(f.curCSS(n,"padding"+this,!0))||0,p&&(q-=parseFloat(f.curCSS(n,"border"+this+"Width",!0))||0),o&&(q-=parseFloat(f.curCSS(n,"margin"+this,!0))||0)}),q}var k=l==="Width"?["Left","Right"]:["Top","Bottom"],j=l.toLowerCase(),b={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+l]=function(d){return d===e?b["inner"+l].call(this):this.each(function(){f(this).css(j,a(this,d)+"px")})},f.fn["outer"+l]=function(d,n){return typeof d!="number"?b["outer"+l].call(this,d):this.each(function(){f(this).css(j,a(this,d,!0,n)+"px")})}}),f.extend(f.expr[":"],{data:function(a,k,j){return !!f.data(a,j[3])},focusable:function(a){return i(a,!isNaN(f.attr(a,"tabindex")))},tabbable:function(a){var j=f.attr(a,"tabindex"),c=isNaN(j);return(c||j>=0)&&i(a,!c)}}),f(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));d.offsetHeight,f.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=d.offsetHeight===100,f.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),f.extend(f.ui,{plugin:{add:function(a,m,l){var k=f.ui[a].prototype;for(var j in l){k.plugins[j]=k.plugins[j]||[],k.plugins[j].push([m,l[j]])}},call:function(k,j,n){var m=k.plugins[j];if(!m||!k.element[0].parentNode){return}for(var l=0;l<m.length;l++){k.options[m[l][0]]&&m[l][1].apply(k.element,n)}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(a,l){if(f(a).css("overflow")==="hidden"){return !1}var k=l&&l==="left"?"scrollLeft":"scrollTop",j=!1;return a[k]>0?!0:(a[k]=1,j=a[k]>0,a[k]=0,j)},isOverAxis:function(j,d,k){return j>d&&j<d+k},isOver:function(a,n,m,l,k,j){return f.ui.isOverAxis(a,m,k)&&f.ui.isOverAxis(n,l,j)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var i=f.cleanData;f.cleanData=function(a){for(var k=0,j;(j=a[k])!=null;k++){try{f(j).triggerHandler("remove")}catch(c){}}i(a)}}else{var h=f.fn.remove;f.fn.remove=function(a,d){return this.each(function(){return d||(!a||f.filter(a,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(c){}}),h.call(f(this),a,d)})}}f.widget=function(a,n,m){var l=a.split(".")[0],k;a=a.split(".")[1],k=l+"-"+a,m||(m=n,n=f.Widget),f.expr[":"][k]=function(b){return !!f.data(b,a)},f[l]=f[l]||{},f[l][a]=function(d,c){arguments.length&&this._createWidget(d,c)};var j=new n;j.options=f.extend(!0,{},j.options),f[l][a].prototype=f.extend(!0,j,{namespace:l,widgetName:a,widgetEventPrefix:f[l][a].prototype.widgetEventPrefix||a,widgetBaseClass:k},m),f.widget.bridge(a,f[l][a])},f.widget.bridge=function(b,a){f.fn[b]=function(k){var j=typeof k=="string",d=Array.prototype.slice.call(arguments,1),c=this;return k=!j&&d.length?f.extend.apply(null,[!0,k].concat(d)):k,j&&k.charAt(0)==="_"?c:(j?this.each(function(){var m=f.data(this,b),l=m&&f.isFunction(m[k])?m[k].apply(m,d):m;if(l!==m&&l!==e){return c=l,!1}}):this.each(function(){var l=f.data(this,b);l?l.option(k||{})._init():f.data(this,b,new a(k,this))}),c)}},f.Widget=function(d,c){arguments.length&&this._createWidget(d,c)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,k){f.data(k,this.widgetName,this),this.element=f(k),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),a);var j=this;this.element.bind("remove."+this.widgetName,function(){j.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(j,b){var a=j;if(arguments.length===0){return f.extend({},this.options)}if(typeof j=="string"){if(b===e){return this.options[j]}a={},a[j]=b}return this._setOptions(a),this},_setOptions:function(a){var d=this;return f.each(a,function(j,c){d._setOption(j,c)}),this},_setOption:function(d,c){return this.options[d]=c,d==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,n,m){var l,k,j=this.options[a];m=m||{},n=f.Event(n),n.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),n.target=this.element[0],k=n.originalEvent;if(k){for(l in k){l in n||(n[l]=k[l])}}return this.element.trigger(n,m),!(f.isFunction(j)&&j.call(this.element[0],n,m)===!1||n.isDefaultPrevented())}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,a.widgetName+".preventClickEvent")){return e.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(f){return}this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var i=this,h=a.which==1,c=typeof this.options.cancel=="string"&&a.target.nodeName?e(a.target).closest(this.options.cancel).length:!1;if(!h||c||!this._mouseCapture(a)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted){return a.preventDefault(),!0}}return !0===e.data(a.target,this.widgetName+".preventClickEvent")&&e.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return i._mouseMove(b)},this._mouseUpDelegate=function(b){return i._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),f=!0,!0},_mouseMove:function(a){return !e.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&e.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,i){j.ui=j.ui||{};var p=/left|center|right/,o=/top|center|bottom/,n="center",m={},l=j.fn.position,k=j.fn.offset;j.fn.position=function(c){if(!c||!c.of){return l.apply(this,arguments)}c=j.extend({},c);var r=j(c.of),q=r[0],f=(c.collision||"flip").split(" "),e=c.offset?c.offset.split(" "):[0,0],d,a,s;return q.nodeType===9?(d=r.width(),a=r.height(),s={top:0,left:0}):q.setTimeout?(d=r.width(),a=r.height(),s={top:r.scrollTop(),left:r.scrollLeft()}):q.preventDefault?(c.at="left top",d=a=0,s={top:c.of.pageY,left:c.of.pageX}):(d=r.outerWidth(),a=r.outerHeight(),s=r.offset()),j.each(["my","at"],function(){var b=(c[this]||"").split(" ");b.length===1&&(b=p.test(b[0])?b.concat([n]):o.test(b[0])?[n].concat(b):[n,n]),b[0]=p.test(b[0])?b[0]:n,b[1]=o.test(b[1])?b[1]:n,c[this]=b}),f.length===1&&(f[1]=f[0]),e[0]=parseInt(e[0],10)||0,e.length===1&&(e[1]=e[0]),e[1]=parseInt(e[1],10)||0,c.at[0]==="right"?s.left+=d:c.at[0]===n&&(s.left+=d/2),c.at[1]==="bottom"?s.top+=a:c.at[1]===n&&(s.top+=a/2),s.left+=e[0],s.top+=e[1],this.each(function(){var A=j(this),z=A.outerWidth(),y=A.outerHeight(),x=parseInt(j.curCSS(this,"marginLeft",!0))||0,w=parseInt(j.curCSS(this,"marginTop",!0))||0,v=z+x+(parseInt(j.curCSS(this,"marginRight",!0))||0),u=y+w+(parseInt(j.curCSS(this,"marginBottom",!0))||0),t=j.extend({},s),b;c.my[0]==="right"?t.left-=z:c.my[0]===n&&(t.left-=z/2),c.my[1]==="bottom"?t.top-=y:c.my[1]===n&&(t.top-=y/2),m.fractions||(t.left=Math.round(t.left),t.top=Math.round(t.top)),b={left:t.left-x,top:t.top-w},j.each(["left","top"],function(B,h){j.ui.position[f[B]]&&j.ui.position[f[B]][h](t,{targetWidth:d,targetHeight:a,elemWidth:z,elemHeight:y,collisionPosition:b,collisionWidth:v,collisionHeight:u,offset:e,my:c.my,at:c.at})}),j.fn.bgiframe&&A.bgiframe(),A.offset(j.extend(t,{using:c.using}))})},j.ui.position={fit:{left:function(a,q){var h=j(window),f=q.collisionPosition.left+q.collisionWidth-h.width()-h.scrollLeft();a.left=f>0?a.left-f:Math.max(a.left-q.collisionPosition.left,a.left)},top:function(a,q){var h=j(window),f=q.collisionPosition.top+q.collisionHeight-h.height()-h.scrollTop();a.top=f>0?a.top-f:Math.max(a.top-q.collisionPosition.top,a.top)}},flip:{left:function(a,u){if(u.at[0]===n){return}var t=j(window),s=u.collisionPosition.left+u.collisionWidth-t.width()-t.scrollLeft(),r=u.my[0]==="left"?-u.elemWidth:u.my[0]==="right"?u.elemWidth:0,q=u.at[0]==="left"?u.targetWidth:-u.targetWidth,e=-2*u.offset[0];a.left+=u.collisionPosition.left<0?r+q+e:s>0?r+q+e:0},top:function(a,u){if(u.at[1]===n){return}var t=j(window),s=u.collisionPosition.top+u.collisionHeight-t.height()-t.scrollTop(),r=u.my[1]==="top"?-u.elemHeight:u.my[1]==="bottom"?u.elemHeight:0,q=u.at[1]==="top"?u.targetHeight:-u.targetHeight,e=-2*u.offset[1];a.top+=u.collisionPosition.top<0?r+q+e:s>0?r+q+e:0}}},j.offset.setOffset||(j.offset.setOffset=function(a,v){/static/.test(j.curCSS(a,"position"))&&(a.style.position="relative");var u=j(a),t=u.offset(),s=parseInt(j.curCSS(a,"top",!0),10)||0,r=parseInt(j.curCSS(a,"left",!0),10)||0,q={top:v.top-t.top+s,left:v.left-t.left+r};"using" in v?v.using.call(a,q):u.css(q)},j.fn.offset=function(a){var d=this[0];return !d||!d.ownerDocument?null:a?j.isFunction(a)?this.each(function(b){j(this).offset(a.call(this,b,j(this).offset()))}):this.each(function(){j.offset.setOffset(this,a)}):k.call(this)}),function(){var a=document.getElementsByTagName("body")[0],v=document.createElement("div"),u,t,s,r,q;u=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&j.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in s){u.style[f]=s[f]}u.appendChild(v),t=a||document.documentElement,t.insertBefore(u,t.firstChild),v.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",r=j(v).offset(function(d,c){return c}).offset(),u.innerHTML="",t.removeChild(u),q=r.top+r.left+(a?2000:0),m.fractions=q>21&&q<22}()})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var e=this.options;return this.helper||e.disabled||d(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(e.iframeFix&&d(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(d(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var e=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),d.ui.ddmanager&&(d.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),d.ui.ddmanager&&!e.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,f){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",a,e)===!1){return this._mouseUp({}),!1}this.position=e.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var k=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(k=d.ui.ddmanager.drop(this,a)),this.dropped&&(k=this.dropped,this.dropped=!1);var j=this.element[0],i=!1;while(j&&(j=j.parentNode)){j==document&&(i=!0)}if(!i&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!k||this.options.revert=="valid"&&k||this.options.revert===!0||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,k)){var h=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){h._trigger("stop",a)!==!1&&h._clear()})}else{this._trigger("stop",a)!==!1&&this._clear()}return !1},_mouseUp:function(a){return this.options.iframeFix===!0&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a),d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var e=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;return d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(e=!0)}),e},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a])):f.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo(f.appendTo=="parent"?this.element[0].parentNode:f.appendTo),e[0]!=this.element[0]&&!/(fixed|absolute)/.test(e.css("position"))&&e.css("position","absolute"),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var k=d(a.containment),j=k[0];if(!j){return}var i=k.offset(),h=d(j).css("overflow")!="hidden";this.containment=[(parseInt(d(j).css("borderLeftWidth"),10)||0)+(parseInt(d(j).css("paddingLeft"),10)||0),(parseInt(d(j).css("borderTopWidth"),10)||0)+(parseInt(d(j).css("paddingTop"),10)||0),(h?Math.max(j.scrollWidth,j.offsetWidth):j.offsetWidth)-(parseInt(d(j).css("borderLeftWidth"),10)||0)-(parseInt(d(j).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(d(j).css("borderTopWidth"),10)||0)-(parseInt(d(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=k}else{a.containment.constructor==Array&&(this.containment=a.containment)}},_convertPositionTo:function(a,l){l||(l=this.position);var k=a=="absolute"?1:-1,j=this.options,i=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(i[0].tagName);return{top:l.top+this.offset.relative.top*k+this.offset.parent.top*k-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:i.scrollTop())*k),left:l.left+this.offset.relative.left*k+this.offset.parent.left*k-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:i.scrollLeft())*k)}},_generatePosition:function(t){var s=this.options,r=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,q=/(html|body)/i.test(r[0].tagName),p=t.pageX,o=t.pageY;if(this.originalPosition){var n;if(this.containment){if(this.relative_container){var m=this.relative_container.offset();n=[this.containment[0]+m.left,this.containment[1]+m.top,this.containment[2]+m.left,this.containment[3]+m.top]}else{n=this.containment}t.pageX-this.offset.click.left<n[0]&&(p=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(o=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(p=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(o=n[3]+this.offset.click.top)}if(s.grid){var l=s.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;o=n?l-this.offset.click.top<n[1]||l-this.offset.click.top>n[3]?l-this.offset.click.top<n[1]?l+s.grid[1]:l-s.grid[1]:l:l;var a=s.grid[0]?this.originalPageX+Math.round((p-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;p=n?a-this.offset.click.left<n[0]||a-this.offset.click.left>n[2]?a-this.offset.click.left<n[0]?a+s.grid[0]:a-s.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():q?0:r.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():q?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,f,e){return e=e||this._uiHash(),d.ui.plugin.call(this,a,[f,e]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),d.Widget.prototype._trigger.call(this,a,f,e)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),d.extend(d.ui.draggable,{version:"1.8.21"}),d.ui.plugin.add("draggable","connectToSortable",{start:function(a,k){var j=d(this).data("draggable"),i=j.options,h=d.extend({},k,{item:j.element});j.sortables=[],d(i.connectToSortable).each(function(){var b=d.data(this,"sortable");b&&!b.options.disabled&&(j.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,h))})},stop:function(a,i){var h=d(this).data("draggable"),f=d.extend({},i,{item:h.element});d.each(h.sortables,function(){this.instance.isOver?(this.instance.isOver=0,h.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,k){var j=d(this).data("draggable"),i=this,h=function(t){var s=this.offset.click.top,r=this.offset.click.left,q=this.positionAbs.top,p=this.positionAbs.left,o=t.height,n=t.width,m=t.top,l=t.left;return d.ui.isOver(q+s,p+r,m,l,o,n)};d.each(j.sortables,function(b){this.instance.positionAbs=j.positionAbs,this.instance.helperProportions=j.helperProportions,this.instance.offset.click=j.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return k.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=j.offset.click.top,this.instance.offset.click.left=j.offset.click.left,this.instance.offset.parent.left-=j.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=j.offset.parent.top-this.instance.offset.parent.top,j._trigger("toSortable",a),j.dropped=this.instance.element,j.currentItem=j.element,this.instance.fromOutside=j),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),j._trigger("fromSortable",a),j.dropped=!1)})}}),d.ui.plugin.add("draggable","cursor",{start:function(a,i){var h=d("body"),f=d(this).data("draggable").options;h.css("cursor")&&(f._cursor=h.css("cursor")),h.css("cursor",f.cursor)},stop:function(a,f){var e=d(this).data("draggable").options;e._cursor&&d("body").css("cursor",e._cursor)}}),d.ui.plugin.add("draggable","opacity",{start:function(a,i){var h=d(i.helper),f=d(this).data("draggable").options;h.css("opacity")&&(f._opacity=h.css("opacity")),h.css("opacity",f.opacity)},stop:function(a,f){var e=d(this).data("draggable").options;e._opacity&&d(f.helper).css("opacity",e._opacity)}}),d.ui.plugin.add("draggable","scroll",{start:function(a,f){var e=d(this).data("draggable");e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"&&(e.overflowOffset=e.scrollParent.offset())},drag:function(a,k){var j=d(this).data("draggable"),i=j.options,h=!1;if(j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x"){j.overflowOffset.top+j.scrollParent[0].offsetHeight-a.pageY<i.scrollSensitivity?j.scrollParent[0].scrollTop=h=j.scrollParent[0].scrollTop+i.scrollSpeed:a.pageY-j.overflowOffset.top<i.scrollSensitivity&&(j.scrollParent[0].scrollTop=h=j.scrollParent[0].scrollTop-i.scrollSpeed)}if(!i.axis||i.axis!="y"){j.overflowOffset.left+j.scrollParent[0].offsetWidth-a.pageX<i.scrollSensitivity?j.scrollParent[0].scrollLeft=h=j.scrollParent[0].scrollLeft+i.scrollSpeed:a.pageX-j.overflowOffset.left<i.scrollSensitivity&&(j.scrollParent[0].scrollLeft=h=j.scrollParent[0].scrollLeft-i.scrollSpeed)}}else{if(!i.axis||i.axis!="x"){a.pageY-d(document).scrollTop()<i.scrollSensitivity?h=d(document).scrollTop(d(document).scrollTop()-i.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<i.scrollSensitivity&&(h=d(document).scrollTop(d(document).scrollTop()+i.scrollSpeed))}if(!i.axis||i.axis!="y"){a.pageX-d(document).scrollLeft()<i.scrollSensitivity?h=d(document).scrollLeft(d(document).scrollLeft()-i.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<i.scrollSensitivity&&(h=d(document).scrollLeft(d(document).scrollLeft()+i.scrollSpeed))}}h!==!1&&d.ui.ddmanager&&!i.dropBehaviour&&d.ui.ddmanager.prepareOffsets(j,a)}}),d.ui.plugin.add("draggable","snap",{start:function(a,i){var h=d(this).data("draggable"),f=h.options;h.snapElements=[],d(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var e=d(this),j=e.offset();this!=h.element[0]&&h.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:j.top,left:j.left})})},drag:function(L,K){var J=d(this).data("draggable"),I=J.options,H=I.snapTolerance,G=K.offset.left,F=G+J.helperProportions.width,E=K.offset.top,D=E+J.helperProportions.height;for(var C=J.snapElements.length-1;C>=0;C--){var B=J.snapElements[C].left,A=B+J.snapElements[C].width,z=J.snapElements[C].top,y=z+J.snapElements[C].height;if(!(B-H<G&&G<A+H&&z-H<E&&E<y+H||B-H<G&&G<A+H&&z-H<D&&D<y+H||B-H<F&&F<A+H&&z-H<E&&E<y+H||B-H<F&&F<A+H&&z-H<D&&D<y+H)){J.snapElements[C].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=!1;continue}if(I.snapMode!="inner"){var x=Math.abs(z-D)<=H,w=Math.abs(y-E)<=H,v=Math.abs(B-F)<=H,u=Math.abs(A-G)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z-J.helperProportions.height,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B-J.helperProportions.width}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A}).left-J.margins.left)}var a=x||w||v||u;if(I.snapMode!="outer"){var x=Math.abs(z-E)<=H,w=Math.abs(y-D)<=H,v=Math.abs(B-G)<=H,u=Math.abs(A-F)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y-J.helperProportions.height,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A-J.helperProportions.width}).left-J.margins.left)}!J.snapElements[C].snapping&&(x||w||v||u||a)&&J.options.snap.snap&&J.options.snap.snap.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=x||w||v||u||a}}}),d.ui.plugin.add("draggable","stack",{start:function(a,k){var j=d(this).data("draggable").options,i=d.makeArray(d(j.stack)).sort(function(e,f){return(parseInt(d(e).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(!i.length){return}var h=parseInt(i[0].style.zIndex)||0;d(i).each(function(b){this.style.zIndex=h+b}),this[0].style.zIndex=h+i.length}}),d.ui.plugin.add("draggable","zIndex",{start:function(a,i){var h=d(i.helper),f=d(this).data("draggable").options;h.css("zIndex")&&(f._zIndex=h.css("zIndex")),h.css("zIndex",f.zIndex)},stop:function(a,f){var e=d(this).data("draggable").options;e._zIndex&&d(f.helper).css("zIndex",e._zIndex)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0,this.isout=1,this.accept=d.isFunction(e)?e:function(b){return b.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[],d.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var a=d.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){a[e]==this&&a.splice(e,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,e){a=="accept"&&(this.accept=d.isFunction(e)?e:function(b){return b.is(e)}),d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(e)))},_out:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(e)))},_drop:function(a,i){var h=i||d.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return !1}var f=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=d.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==h.options.scope&&e.accept.call(e.element[0],h.currentItem||h.element)&&d.ui.intersect(h,d.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return f=!0,!1}}),f?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(h)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),d.extend(d.ui.droppable,{version:"1.8.21"}),d.ui.intersect=function(B,A,z){if(!A.offset){return !1}var y=(B.positionAbs||B.position.absolute).left,x=y+B.helperProportions.width,w=(B.positionAbs||B.position.absolute).top,v=w+B.helperProportions.height,u=A.offset.left,t=u+A.proportions.width,s=A.offset.top,r=s+A.proportions.height;switch(z){case"fit":return u<=y&&x<=t&&s<=w&&v<=r;case"intersect":return u<y+B.helperProportions.width/2&&x-B.helperProportions.width/2<t&&s<w+B.helperProportions.height/2&&v-B.helperProportions.height/2<r;case"pointer":var q=(B.positionAbs||B.position.absolute).left+(B.clickOffset||B.offset.click).left,p=(B.positionAbs||B.position.absolute).top+(B.clickOffset||B.offset.click).top,a=d.ui.isOver(p,q,s,u,A.proportions.height,A.proportions.width);return a;case"touch":return(w>=s&&w<=r||v>=s&&v<=r||w<s&&v>r)&&(y>=u&&y<=t||x>=u&&x<=t||y<u&&x>t);default:return !1}},d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,o){var n=d.ui.ddmanager.droppables[a.options.scope]||[],m=o?o.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf();g:for(var k=0;k<n.length;k++){if(n[k].options.disabled||a&&!n[k].accept.call(n[k].element[0],a.currentItem||a.element)){continue}for(var j=0;j<l.length;j++){if(l[j]==n[k].element[0]){n[k].proportions.height=0;continue g}}n[k].visible=n[k].element.css("display")!="none";if(!n[k].visible){continue}m=="mousedown"&&n[k]._activate.call(n[k],o),n[k].offset=n[k].element.offset(),n[k].proportions={width:n[k].element[0].offsetWidth,height:n[k].element[0].offsetHeight}}},drop:function(a,f){var e=!1;return d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance)&&(e=this._drop.call(this,f)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,f))}),e},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,e),d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var j=d.ui.intersect(a,this,this.options.tolerance),i=!j&&this.isover==1?"isout":j&&this.isover==0?"isover":null;if(!i){return}var h;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(h=d.data(b[0],"droppable"),h.greedyChild=i=="isover"?1:0)}h&&i=="isover"&&(h.isover=0,h.isout=1,h._out.call(h,e)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,e),h&&i=="isout"&&(h.isout=0,h.isover=1,h._over.call(h,e))})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable"),a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var a=this,o=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var m=0;m<n.length;m++){var l=f.trim(n[m]),k="ui-resizable-"+l,j=f('<div class="ui-resizable-handle '+k+'"></div>');j.css({zIndex:o.zIndex}),"se"==l&&j.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[l]=".ui-resizable-"+l,this.element.append(j)}}this._renderAxis=function(p){p=p||this.element;for(var t in this.handles){this.handles[t].constructor==String&&(this.handles[t]=f(this.handles[t],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s=f(this.handles[t],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(t)?s.outerHeight():s.outerWidth();var q=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("");p.css(q,r),this._proportionallyResize()}if(!f(this.handles[t]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!a.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=b&&b[1]?b[1]:"se"}}),o.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(o.disabled){return}f(this).removeClass("ui-resizable-autohide"),a._handles.show()},function(){if(o.disabled){return}a.resizing||(f(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(c){f(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var k=!1;for(var j in this.handles){f(this.handles[j])[0]==a.target&&(k=!0)}return !this.options.disabled&&k},_mouseStart:function(a){var n=this.options,m=this.element.position(),l=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(l.is(".ui-draggable")||/absolute/.test(l.css("position")))&&l.css({position:"absolute",top:m.top,left:m.left}),this._renderProxy();var k=i(this.helper.css("left")),j=i(this.helper.css("top"));n.containment&&(k+=f(n.containment).scrollLeft()||0,j+=f(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:k,top:j},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:k,top:j},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio=typeof n.aspectRatio=="number"?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var c=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",c=="auto"?this.axis+"-resize":c),l.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(z){var y=this.helper,x=this.options,w={},v=this,u=this.originalMousePosition,t=this.axis,s=z.pageX-u.left||0,r=z.pageY-u.top||0,q=this._change[t];if(!q){return !1}var p=q.apply(this,[z,s,r]),o=f.browser.msie&&f.browser.version<7,a=this.sizeDiff;this._updateVirtualBoundaries(z.shiftKey);if(this._aspectRatio||z.shiftKey){p=this._updateRatio(p,z)}return p=this._respectSize(p,z),this._propagate("resize",z),y.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(p),this._trigger("resize",z,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var s=this.options,r=this;if(this._helper){var q=this._proportionallyResizeElements,p=q.length&&/textarea/i.test(q[0].nodeName),o=p&&f.ui.hasScroll(q[0],"left")?0:r.sizeDiff.height,n=p?0:r.sizeDiff.width,m={width:r.helper.width()-n,height:r.helper.height()-o},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,a=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;s.animate||this.element.css(f.extend(m,{top:a,left:l})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!s.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(j){var d=this.options,o,n,m,l,k;k={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||j){o=k.minHeight*this.aspectRatio,m=k.minWidth/this.aspectRatio,n=k.maxHeight*this.aspectRatio,l=k.maxWidth/this.aspectRatio,o>k.minWidth&&(k.minWidth=o),m>k.minHeight&&(k.minHeight=m),n<k.maxWidth&&(k.maxWidth=n),l<k.maxHeight&&(k.maxHeight=l)}this._vBoundaries=k},_updateCache:function(d){var c=this.options;this.offset=this.helper.offset(),h(d.left)&&(this.position.left=d.left),h(d.top)&&(this.position.top=d.top),h(d.height)&&(this.size.height=d.height),h(d.width)&&(this.size.width=d.width)},_updateRatio:function(j,d){var n=this.options,m=this.position,l=this.size,k=this.axis;return h(j.height)?j.width=j.height*this.aspectRatio:h(j.width)&&(j.height=j.width/this.aspectRatio),k=="sw"&&(j.left=m.left+(l.width-j.width),j.top=null),k=="nw"&&(j.top=m.top+(l.height-j.height),j.left=m.left+(l.width-j.width)),j},_respectSize:function(D,C){var B=this.helper,A=this._vBoundaries,z=this._aspectRatio||C.shiftKey,y=this.axis,x=h(D.width)&&A.maxWidth&&A.maxWidth<D.width,w=h(D.height)&&A.maxHeight&&A.maxHeight<D.height,v=h(D.width)&&A.minWidth&&A.minWidth>D.width,u=h(D.height)&&A.minHeight&&A.minHeight>D.height;v&&(D.width=A.minWidth),u&&(D.height=A.minHeight),x&&(D.width=A.maxWidth),w&&(D.height=A.maxHeight);var t=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,r=/sw|nw|w/.test(y),q=/nw|ne|n/.test(y);v&&r&&(D.left=t-A.minWidth),x&&r&&(D.left=t-A.maxWidth),u&&q&&(D.top=s-A.minHeight),w&&q&&(D.top=s-A.maxHeight);var d=!D.width&&!D.height;return d&&!D.left&&D.top?D.top=null:d&&!D.top&&D.left&&(D.left=null),D},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var n=this.helper||this.element;for(var m=0;m<this._proportionallyResizeElements.length;m++){var l=this._proportionallyResizeElements[m];if(!this.borderDif){var k=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],j=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=f.map(k,function(p,o){var r=parseInt(p,10)||0,q=parseInt(j[o],10)||0;return r+q})}if(!f.browser.msie||!f(n).is(":hidden")&&!f(n).parents(":hidden").length){l.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var a=this.element,m=this.options;this.elementOffset=a.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var l=f.browser.msie&&f.browser.version<7,k=l?1:0,j=l?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+j,height:this.element.outerHeight()+j,position:"absolute",left:this.elementOffset.left-k+"px",top:this.elementOffset.top-k+"px",zIndex:++m.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(j,d,k){return{width:this.originalSize.width+d}},w:function(k,j,o){var n=this.options,m=this.originalSize,l=this.originalPosition;return{left:l.left+j,width:m.width-j}},n:function(k,j,o){var n=this.options,m=this.originalSize,l=this.originalPosition;return{top:l.top+o,height:m.height-o}},s:function(j,d,k){return{height:this.originalSize.height+k}},se:function(a,k,j){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,k,j]))},sw:function(a,k,j){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,k,j]))},ne:function(a,k,j){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,k,j]))},nw:function(a,k,j){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,k,j]))}},_propagate:function(a,d){f.ui.plugin.call(this,a,[d,this.ui()]),a!="resize"&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(a,m){var l=f(this).data("resizable"),k=l.options,j=function(c){f(c).each(function(){var d=f(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof k.alsoResize=="object"&&!k.alsoResize.parentNode?k.alsoResize.length?(k.alsoResize=k.alsoResize[0],j(k.alsoResize)):f.each(k.alsoResize,function(b){j(b)}):j(k.alsoResize)},resize:function(a,p){var o=f(this).data("resizable"),n=o.options,m=o.originalSize,l=o.originalPosition,k={height:o.size.height-m.height||0,width:o.size.width-m.width||0,top:o.position.top-l.top||0,left:o.position.left-l.left||0},j=function(c,q){f(c).each(function(){var d=f(this),t=f(this).data("resizable-alsoresize"),s={},r=q&&q.length?q:d.parents(p.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(r,function(v,u){var w=(t[u]||0)+(k[u]||0);w&&w>=0&&(s[u]=w||null)}),d.css(s)})};typeof n.alsoResize=="object"&&!n.alsoResize.nodeType?f.each(n.alsoResize,function(d,c){j(d,c)}):j(n.alsoResize)},stop:function(a,d){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(v,u){var t=f(this).data("resizable"),s=t.options,r=t._proportionallyResizeElements,q=r.length&&/textarea/i.test(r[0].nodeName),p=q&&f.ui.hasScroll(r[0],"left")?0:t.sizeDiff.height,o=q?0:t.sizeDiff.width,n={width:t.size.width-o,height:t.size.height-p},m=parseInt(t.element.css("left"),10)+(t.position.left-t.originalPosition.left)||null,a=parseInt(t.element.css("top"),10)+(t.position.top-t.originalPosition.top)||null;t.element.animate(f.extend(n,a&&m?{top:a,left:m}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var b={width:parseInt(t.element.css("width"),10),height:parseInt(t.element.css("height"),10),top:parseInt(t.element.css("top"),10),left:parseInt(t.element.css("left"),10)};r&&r.length&&f(r[0]).css({width:b.width,height:b.height}),t._updateCache(b),t._propagate("resize",v)}})}}),f.ui.plugin.add("resizable","containment",{start:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z.element,w=y.containment,v=w instanceof f?w.get(0):/parent/.test(w)?x.parent().get(0):w;if(!v){return}z.containerElement=f(v);if(/document/.test(w)||w==document){z.containerOffset={left:0,top:0},z.containerPosition={left:0,top:0},z.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var u=f(v),t=[];f(["Top","Right","Left","Bottom"]).each(function(j,d){t[j]=i(u.css("padding"+d))}),z.containerOffset=u.offset(),z.containerPosition=u.position(),z.containerSize={height:u.innerHeight()-t[3],width:u.innerWidth()-t[1]};var s=z.containerOffset,r=z.containerSize.height,q=z.containerSize.width,c=f.ui.hasScroll(v,"left")?v.scrollWidth:q,a=f.ui.hasScroll(v)?v.scrollHeight:r;z.parentData={element:v,left:s.left,top:s.top,width:c,height:a}}},resize:function(D,C){var B=f(this).data("resizable"),A=B.options,z=B.containerSize,y=B.containerOffset,x=B.size,w=B.position,v=B._aspectRatio||D.shiftKey,u={top:0,left:0},t=B.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(u=y),w.left<(B._helper?y.left:0)&&(B.size.width=B.size.width+(B._helper?B.position.left-y.left:B.position.left-u.left),v&&(B.size.height=B.size.width/B.aspectRatio),B.position.left=A.helper?y.left:0),w.top<(B._helper?y.top:0)&&(B.size.height=B.size.height+(B._helper?B.position.top-y.top:B.position.top),v&&(B.size.width=B.size.height*B.aspectRatio),B.position.top=B._helper?y.top:0),B.offset.left=B.parentData.left+B.position.left,B.offset.top=B.parentData.top+B.position.top;var s=Math.abs((B._helper?B.offset.left-u.left:B.offset.left-u.left)+B.sizeDiff.width),r=Math.abs((B._helper?B.offset.top-u.top:B.offset.top-y.top)+B.sizeDiff.height),q=B.containerElement.get(0)==B.element.parent().get(0),a=/relative|absolute/.test(B.containerElement.css("position"));q&&a&&(s-=B.parentData.left),s+B.size.width>=B.parentData.width&&(B.size.width=B.parentData.width-s,v&&(B.size.height=B.size.width/B.aspectRatio)),r+B.size.height>=B.parentData.height&&(B.size.height=B.parentData.height-r,v&&(B.size.width=B.size.height*B.aspectRatio))},stop:function(x,w){var v=f(this).data("resizable"),u=v.options,t=v.position,s=v.containerOffset,r=v.containerPosition,q=v.containerElement,p=f(v.helper),o=p.offset(),n=p.outerWidth()-v.sizeDiff.width,a=p.outerHeight()-v.sizeDiff.height;v._helper&&!u.animate&&/relative/.test(q.css("position"))&&f(this).css({left:o.left-r.left-s.left,width:n,height:a}),v._helper&&!u.animate&&/static/.test(q.css("position"))&&f(this).css({left:o.left-r.left-s.left,width:n,height:a})}}),f.ui.plugin.add("resizable","ghost",{start:function(a,m){var l=f(this).data("resizable"),k=l.options,j=l.size;l.ghost=l.originalElement.clone(),l.ghost.css({opacity:0.25,display:"block",position:"relative",height:j.height,width:j.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof k.ghost=="string"?k.ghost:""),l.ghost.appendTo(l.helper)},resize:function(a,l){var k=f(this).data("resizable"),j=k.options;k.ghost&&k.ghost.css({position:"relative",height:k.size.height,width:k.size.width})},stop:function(a,l){var k=f(this).data("resizable"),j=k.options;k.ghost&&k.helper&&k.helper.get(0).removeChild(k.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(v,u){var t=f(this).data("resizable"),s=t.options,r=t.size,q=t.originalSize,p=t.originalPosition,o=t.axis,n=s._aspectRatio||v.shiftKey;s.grid=typeof s.grid=="number"?[s.grid,s.grid]:s.grid;var m=Math.round((r.width-q.width)/(s.grid[0]||1))*(s.grid[0]||1),a=Math.round((r.height-q.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a):/^(ne)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a,t.position.top=p.top-a):/^(sw)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a,t.position.left=p.left-m):(t.size.width=q.width+m,t.size.height=q.height+a,t.position.top=p.top-a,t.position.left=p.left-m)}});var i=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.selectable",d.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable"),this.dragged=!1;var e;this.refresh=function(){e=d(a.options.filter,a.element[0]),e.addClass("ui-selectee"),e.each(function(){var f=d(this),h=f.offset();d.data(this,"selectable-item",{element:this,$element:f,left:h.left,top:h.top,right:h.left+f.outerWidth(),bottom:h.top+f.outerHeight(),startselected:!1,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=d("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(a){var f=this;this.opos=[a.pageX,a.pageY];if(this.options.disabled){return}var e=this.options;this.selectees=d(e.filter,this.element[0]),this._trigger("start",a),d(e.appendTo).append(this.helper),this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=d.data(this,"selectable-item");b.startselected=!0,!a.metaKey&&!a.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,f._trigger("unselecting",a,{unselecting:b.element}))}),d(a.target).parents().andSelf().each(function(){var h=d.data(this,"selectable-item");if(h){var b=!a.metaKey&&!a.ctrlKey||!h.$element.hasClass("ui-selected");return h.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),h.unselecting=!b,h.selecting=b,h.selected=b,b?f._trigger("selecting",a,{selecting:h.element}):f._trigger("unselecting",a,{unselecting:h.element}),!1}})},_mouseDrag:function(a){var p=this;this.dragged=!0;if(this.options.disabled){return}var o=this.options,n=this.opos[0],m=this.opos[1],l=a.pageX,k=a.pageY;if(n>l){var j=l;l=n,n=j}if(m>k){var j=k;k=m,m=j}return this.helper.css({left:n,top:m,width:l-n,height:k-m}),this.selectees.each(function(){var e=d.data(this,"selectable-item");if(!e||e.element==p.element[0]){return}var b=!1;o.tolerance=="touch"?b=!(e.left>l||e.right<n||e.top>k||e.bottom<m):o.tolerance=="fit"&&(b=e.left>n&&e.right<l&&e.top>m&&e.bottom<k),b?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,p._trigger("selecting",a,{selecting:e.element}))):(e.selecting&&((a.metaKey||a.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),p._trigger("unselecting",a,{unselecting:e.element}))),e.selected&&!a.metaKey&&!a.ctrlKey&&!e.startselected&&(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,p._trigger("unselecting",a,{unselecting:e.element})))}),!1},_mouseStop:function(a){var f=this;this.dragged=!1;var e=this.options;return d(".ui-unselecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,f._trigger("unselected",a,{unselected:b.element})}),d(".ui-selecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,f._trigger("selected",a,{selected:b.element})}),this._trigger("stop",a),this.helper.remove(),!1}}),d.extend(d.ui.selectable,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(a,e){a==="disabled"?(this.options[a]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,n){var m=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(a);var l=null,k=this,j=d(a.target).parents().each(function(){if(d.data(this,m.widgetName+"-item")==k){return l=d(this),!1}});d.data(a.target,m.widgetName+"-item")==k&&(l=d(a.target));if(!l){return !1}if(this.options.handle&&!n){var i=!1;d(this.options.handle,l).find("*").andSelf().each(function(){this==a.target&&(i=!0)});if(!i){return !1}}return this.currentItem=l,this._removeCurrentsFromItems(),!0},_mouseStart:function(a,l,k){var j=this.options,i=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),j.containment&&this._setContainment(),j.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",j.cursor)),j.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",j.opacity)),j.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",j.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!k){for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",a,i._uiHash(this))}}return d.ui.ddmanager&&(d.ui.ddmanager.current=this),d.ui.ddmanager&&!j.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseDrag:function(a){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,m=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=m=this.scrollParent[0].scrollTop+n.scrollSpeed:a.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=m=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=m=this.scrollParent[0].scrollLeft+n.scrollSpeed:a.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=m=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(a.pageY-d(document).scrollTop()<n.scrollSensitivity?m=d(document).scrollTop(d(document).scrollTop()-n.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<n.scrollSensitivity&&(m=d(document).scrollTop(d(document).scrollTop()+n.scrollSpeed)),a.pageX-d(document).scrollLeft()<n.scrollSensitivity?m=d(document).scrollLeft(d(document).scrollLeft()-n.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<n.scrollSensitivity&&(m=d(document).scrollLeft(d(document).scrollLeft()+n.scrollSpeed))),m!==!1&&d.ui.ddmanager&&!n.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var l=this.items.length-1;l>=0;l--){var k=this.items[l],j=k.item[0],i=this._intersectsWithPointer(k);if(!i){continue}if(j!=this.currentItem[0]&&this.placeholder[i==1?"next":"prev"]()[0]!=j&&!d.ui.contains(this.placeholder[0],j)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],j):!0)){this.direction=i==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(k)){this._rearrange(a,k)}else{break}this._trigger("change",a,this._uiHash());break}}return this._contactContainers(a),d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,i){if(!a){return}d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var h=this,f=h.placeholder.offset();h.reverting=!0,d(this.helper).animate({left:f.left-this.offset.parent.left-h.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-h.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){h._clear(a)})}else{this._clear(a,i)}return !1},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,a._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,a._uiHash(this)),this.containers[e].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},d(f).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&e.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!e.length&&a.key&&e.push(a.key+"="),e.join("&")},toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},f.each(function(){e.push(d(a.item||this).attr(a.attribute||"id")||"")}),e},_intersectsWith:function(x){var w=this.positionAbs.left,v=w+this.helperProportions.width,u=this.positionAbs.top,t=u+this.helperProportions.height,s=x.left,r=s+x.width,q=x.top,p=q+x.height,o=this.offset.click.top,n=this.offset.click.left,m=u+o>q&&u+o<p&&w+n>s&&w+n<r;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>x[this.floating?"width":"height"]?m:s<w+this.helperProportions.width/2&&v-this.helperProportions.width/2<r&&q<u+this.helperProportions.height/2&&t-this.helperProportions.height/2<p},_intersectsWithPointer:function(a){var l=this.options.axis==="x"||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),k=this.options.axis==="y"||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),j=l&&k,i=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return j?this.floating?h&&h=="right"||i=="down"?2:1:i&&(i=="down"?2:1):!1},_intersectsWithSides:function(a){var k=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),j=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),i=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&j||h=="left"&&!j:i&&(i=="down"&&k||i=="up"&&!k)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(r){var q=this,p=[],o=[],n=this._connectWith();if(n&&r){for(var m=n.length-1;m>=0;m--){var l=d(n[m]);for(var k=l.length-1;k>=0;k--){var a=d.data(l[k],this.widgetName);a&&a!=this&&!a.options.disabled&&o.push([d.isFunction(a.options.items)?a.options.items.call(a.element):d(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}o.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var m=o.length-1;m>=0;m--){o[m][0].each(function(){p.push(this)})}return d(p)},_removeCurrentsFromItems:function(){var f=this.currentItem.find(":data("+this.widgetName+"-item)");for(var e=0;e<this.items.length;e++){for(var h=0;h<f.length;h++){f[h]==this.items[e].item[0]&&this.items.splice(e,1)}}},_refreshItems:function(z){this.items=[],this.containers=[this];var y=this.items,x=this,w=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],z,{item:this.currentItem}):d(this.options.items,this.element),this]],v=this._connectWith();if(v&&this.ready){for(var u=v.length-1;u>=0;u--){var t=d(v[u]);for(var s=t.length-1;s>=0;s--){var r=d.data(t[s],this.widgetName);r&&r!=this&&!r.options.disabled&&(w.push([d.isFunction(r.options.items)?r.options.items.call(r.element[0],z,{item:this.currentItem}):d(r.options.items,r.element),r]),this.containers.push(r))}}}for(var u=w.length-1;u>=0;u--){var q=w[u][1],p=w[u][0];for(var s=0,o=p.length;s<o;s++){var a=d(p[s]);a.data(this.widgetName+"-item",q),y.push({item:a,instance:q,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var k=this.items.length-1;k>=0;k--){var j=this.items[k];if(j.instance!=this.currentContainer&&this.currentContainer&&j.item[0]!=this.currentItem[0]){continue}var i=this.options.toleranceElement?d(this.options.toleranceElement,j.item):j.item;a||(j.width=i.outerWidth(),j.height=i.outerHeight());var h=i.offset();j.left=h.left,j.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var k=this.containers.length-1;k>=0;k--){var h=this.containers[k].element.offset();this.containers[k].containerCache.left=h.left,this.containers[k].containerCache.top=h.top,this.containers[k].containerCache.width=this.containers[k].element.outerWidth(),this.containers[k].containerCache.height=this.containers[k].element.outerHeight()}}return this},_createPlaceholder:function(a){var i=a||this,h=i.options;if(!h.placeholder||h.placeholder.constructor==String){var f=h.placeholder;h.placeholder={element:function(){var e=d(document.createElement(i.currentItem[0].nodeName)).addClass(f||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return f||(e.style.visibility="hidden"),e},update:function(j,e){if(f&&!h.forcePlaceholderSize){return}e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10))}}}i.placeholder=d(h.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),h.placeholder.update(i,i.placeholder)},_contactContainers:function(r){var q=null,p=null;for(var o=this.containers.length-1;o>=0;o--){if(d.ui.contains(this.currentItem[0],this.containers[o].element[0])){continue}if(this._intersectsWith(this.containers[o].containerCache)){if(q&&d.ui.contains(this.containers[o].element[0],q.element[0])){continue}q=this.containers[o],p=o}else{this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",r,this._uiHash(this)),this.containers[o].containerCache.over=0)}}if(!q){return}if(this.containers.length===1){this.containers[p]._trigger("over",r,this._uiHash(this)),this.containers[p].containerCache.over=1}else{if(this.currentContainer!=this.containers[p]){var n=10000,m=null,l=this.positionAbs[this.containers[p].floating?"left":"top"];for(var k=this.items.length-1;k>=0;k--){if(!d.ui.contains(this.containers[p].element[0],this.items[k].item[0])){continue}var a=this.containers[p].floating?this.items[k].item.offset().left:this.items[k].item.offset().top;Math.abs(a-l)<n&&(n=Math.abs(a-l),m=this.items[k],this.direction=a-l>0?"down":"up")}if(!m&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[p],m?this._rearrange(r,m,null,!0):this._rearrange(r,null,this.containers[p].element,!0),this._trigger("change",r,this._uiHash()),this.containers[p]._trigger("change",r,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",r,this._uiHash(this)),this.containers[p].containerCache.over=1}}},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a,this.currentItem])):f.helper=="clone"?this.currentItem.clone():this.currentItem;return e.parents("body").length||d(f.appendTo!="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(e[0].style.width==""||f.forceHelperSize)&&e.width(this.currentItem.width()),(e[0].style.height==""||f.forceHelperSize)&&e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)){var i=d(a.containment)[0],h=d(a.containment).offset(),f=d(i).css("overflow")!="hidden";this.containment=[h.left+(parseInt(d(i).css("borderLeftWidth"),10)||0)+(parseInt(d(i).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(d(i).css("borderTopWidth"),10)||0)+(parseInt(d(i).css("paddingTop"),10)||0)-this.margins.top,h.left+(f?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(d(i).css("borderLeftWidth"),10)||0)-(parseInt(d(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(f?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(d(i).css("borderTopWidth"),10)||0)-(parseInt(d(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,l){l||(l=this.position);var k=a=="absolute"?1:-1,j=this.options,i=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(i[0].tagName);return{top:l.top+this.offset.relative.top*k+this.offset.parent.top*k-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:i.scrollTop())*k),left:l.left+this.offset.relative.left*k+this.offset.parent.left*k-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:i.scrollLeft())*k)}},_generatePosition:function(a){var p=this.options,o=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(o[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var m=a.pageX,l=a.pageY;if(this.originalPosition){this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top));if(p.grid){var k=this.originalPageY+Math.round((l-this.originalPageY)/p.grid[1])*p.grid[1];l=this.containment?k-this.offset.click.top<this.containment[1]||k-this.offset.click.top>this.containment[3]?k-this.offset.click.top<this.containment[1]?k+p.grid[1]:k-p.grid[1]:k:k;var j=this.originalPageX+Math.round((m-this.originalPageX)/p.grid[0])*p.grid[0];m=this.containment?j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2]?j-this.offset.click.left<this.containment[0]?j+p.grid[0]:j-p.grid[0]:j:j}}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:o.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:o.scrollLeft())}},_rearrange:function(i,h,m,l){m?m[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var k=this,j=this.counter;window.setTimeout(function(){j==k.counter&&k.refreshPositions(!l)},0)},_clear:function(a,k){this.reverting=!1;var j=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS){if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static"){this._storedCSS[h]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!k&&j.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!k&&j.push(function(b){this._trigger("update",b,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){k||j.push(function(b){this._trigger("remove",b,this._uiHash())});for(var h=this.containers.length-1;h>=0;h--){d.ui.contains(this.containers[h].element[0],this.currentItem[0])&&!k&&(j.push(function(b){return function(e){b._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[h])),j.push(function(b){return function(e){b._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[h])))}}for(var h=this.containers.length-1;h>=0;h--){k||j.push(function(b){return function(e){b._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over&&(j.push(function(b){return function(e){b._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over=0)}this._storedCursor&&d("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!k){this._trigger("beforeStop",a,this._uiHash());for(var h=0;h<j.length;h++){j[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return !1}k||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!k){for(var h=0;h<j.length;h++){j[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||d([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}}),d.extend(d.ui.sortable,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,i=a.options;a.running=0,a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),a.headers=a.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(i.disabled){return}d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(i.disabled){return}d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(i.disabled){return}d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(i.disabled){return}d(this).removeClass("ui-state-focus")}),a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(i.navigation){var h=a.element.find("a").filter(i.navigationFilter).eq(0);if(h.length){var f=h.closest(".ui-accordion-header");f.length?a.active=f:a.active=h.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),a.active.next().addClass("ui-accordion-content-active"),a._createIcons(),a.resize(),a.element.attr("role","tablist"),a.headers.attr("role","tab").bind("keydown.accordion",function(b){return a._keydown(b)}).next().attr("role","tabpanel"),a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0),d.browser.safari||a.headers.find("a").attr("tabIndex",-1),i.event&&a.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this),b.preventDefault()})},_createIcons:function(){var a=this.options;a.icons&&(d("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var e=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(a.autoHeight||a.fillHeight)&&e.css("height",""),d.Widget.prototype.destroy.call(this)},_setOption:function(a,e){d.Widget.prototype._setOption.apply(this,arguments),a=="active"&&this.activate(e),a=="icons"&&(this._destroyIcons(),e&&this._createIcons()),a=="disabled"&&this.headers.add(this.headers.next())[e?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(this.options.disabled||a.altKey||a.ctrlKey){return}var k=d.ui.keyCode,j=this.headers.length,i=this.headers.index(a.target),h=!1;switch(a.keyCode){case k.RIGHT:case k.DOWN:h=this.headers[(i+1)%j];break;case k.LEFT:case k.UP:h=this.headers[(i-1+j)%j];break;case k.SPACE:case k.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return h?(d(a.target).attr("tabIndex",-1),d(h).attr("tabIndex",0),h.focus(),!1):!0},resize:function(){var a=this.options,f;if(a.fillSpace){if(d.browser.msie){var e=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}f=this.element.parent().height(),d.browser.msie&&this.element.parent().css("overflow",e),this.headers.each(function(){f-=d(this).outerHeight(!0)}),this.headers.next().each(function(){d(this).height(Math.max(0,f-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")}else{a.autoHeight&&(f=0,this.headers.next().each(function(){f=Math.max(f,d(this).height("").height())}).height(f))}return this},activate:function(f){this.options.active=f;var e=this._findActive(f)[0];return this._clickHandler({target:e},e),this},_findActive:function(a){return a?typeof a=="number"?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):a===!1?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,s){var r=this.options;if(r.disabled){return}if(!t.target){if(!r.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var q=this.active.next(),p={options:r,newHeader:d([]),oldHeader:r.active,newContent:d([]),oldContent:q},o=this.active=d([]);this._toggle(o,q,p);return}var n=d(t.currentTarget||s),m=n[0]===this.active[0];r.active=r.collapsible&&m?!1:this.headers.index(n);if(this.running||!r.collapsible&&m){return}var l=this.active,o=n.next(),q=this.active.next(),p={options:r,newHeader:m&&r.collapsible?d([]):n,oldHeader:this.active,newContent:m&&r.collapsible?d([]):o,oldContent:q},a=this.headers.index(this.active[0])>this.headers.index(n[0]);this.active=m?d([]):n,this._toggle(o,q,p,m,a),l.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),m||(n.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),n.next().addClass("ui-accordion-content-active"));return},_toggle:function(x,w,v,u,t){var s=this,r=s.options;s.toShow=x,s.toHide=w,s.data=v;var q=function(){if(!s){return}return s._completed.apply(s,arguments)};s._trigger("changestart",null,s.data),s.running=w.size()===0?x.size():w.size();if(r.animated){var p={};r.collapsible&&u?p={toShow:d([]),toHide:w,complete:q,down:t,autoHeight:r.autoHeight||r.fillSpace}:p={toShow:x,toHide:w,complete:q,down:t,autoHeight:r.autoHeight||r.fillSpace},r.proxied||(r.proxied=r.animated),r.proxiedDuration||(r.proxiedDuration=r.duration),r.animated=d.isFunction(r.proxied)?r.proxied(p):r.proxied,r.duration=d.isFunction(r.proxiedDuration)?r.proxiedDuration(p):r.proxiedDuration;var o=d.ui.accordion.animations,n=r.duration,a=r.animated;a&&!o[a]&&!d.easing[a]&&(a="slide"),o[a]||(o[a]=function(b){this.slide(b,{easing:a,duration:n||700})}),o[a](p)}else{r.collapsible&&u?x.toggle():(w.hide(),x.show()),q(!0)}w.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),x.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),d.extend(d.ui.accordion,{version:"1.8.21",animations:{slide:function(r,q){r=d.extend({easing:"swing",duration:300},r,q);if(!r.toHide.size()){r.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},r);return}if(!r.toShow.size()){r.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},r);return}var p=r.toShow.css("overflow"),o=0,n={},m={},l=["height","paddingTop","paddingBottom"],k,a=r.toShow;k=a[0].style.width,a.width(a.parent().width()-parseFloat(a.css("paddingLeft"))-parseFloat(a.css("paddingRight"))-(parseFloat(a.css("borderLeftWidth"))||0)-(parseFloat(a.css("borderRightWidth"))||0)),d.each(l,function(h,f){m[f]="hide";var b=(""+d.css(r.toShow[0],f)).match(/^([\d+-.]+)(.*)$/);n[f]={value:b[1],unit:b[2]||"px"}}),r.toShow.css({height:0,overflow:"hidden"}).show(),r.toHide.filter(":hidden").each(r.complete).end().filter(":visible").animate(m,{step:function(b,e){e.prop=="height"&&(o=e.end-e.start===0?0:(e.now-e.start)/(e.end-e.start)),r.toShow[0].style[e.prop]=o*n[e.prop].value+n[e.prop].unit},duration:r.duration,easing:r.easing,complete:function(){r.autoHeight||r.toShow.css("height",""),r.toShow.css({width:k,overflow:p}),r.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,i=this.element[0].ownerDocument,h;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(j){if(a.options.disabled||a.element.propAttr("readOnly")){return}h=!1;var b=e.ui.keyCode;switch(j.keyCode){case b.PAGE_UP:a._move("previousPage",j);break;case b.PAGE_DOWN:a._move("nextPage",j);break;case b.UP:a._keyEvent("previous",j);break;case b.DOWN:a._keyEvent("next",j);break;case b.ENTER:case b.NUMPAD_ENTER:a.menu.active&&(h=!0,j.preventDefault());case b.TAB:if(!a.menu.active){return}a.menu.select(j);break;case b.ESCAPE:a.element.val(a.term),a.close(j);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=a.element.val()&&(a.selectedItem=null,a.search(null,j))},a.options.delay)}}).bind("keypress.autocomplete",function(b){h&&(h=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(a.options.disabled){return}a.selectedItem=null,a.previous=a.element.val()}).bind("blur.autocomplete",function(b){if(a.options.disabled){return}clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b),a._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",i)[0]).mousedown(function(j){var b=a.menu.element[0];e(j.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(k){k.target!==a.element[0]&&k.target!==b&&!e.ui.contains(b,k.target)&&a.close()})},1),setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,k){var j=k.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:j})&&/^key/.test(b.originalEvent.type)&&a.element.val(j.value)},selected:function(b,k){var j=k.item.data("item.autocomplete"),c=a.previous;a.element[0]!==i.activeElement&&(a.element.focus(),a.previous=c,setTimeout(function(){a.previous=c,a.selectedItem=j},1)),!1!==a._trigger("select",b,{item:j})&&a.element.val(j.value),a.term=a.element.val(),a.close(b),a.selectedItem=j},blur:function(b,j){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")},e(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(a,h){e.Widget.prototype._setOption.apply(this,arguments),a==="source"&&this._initSource(),a==="appendTo"&&this.menu.element.appendTo(e(h||"body",this.element[0].ownerDocument)[0]),a==="disabled"&&h&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,i,h;e.isArray(this.options.source)?(i=this.options.source,this.source=function(c,j){j(e.ui.autocomplete.filter(i,c.term))}):typeof this.options.source=="string"?(h=this.options.source,this.source=function(j,b){a.xhr&&a.xhr.abort(),a.xhr=e.ajax({url:h,data:j,dataType:"json",success:function(k,c){b(k)},error:function(){b([])}})}):this.source=this.options.source},search:function(h,c){h=h!=null?h:this.element.val(),this.term=this.element.val();if(h.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)===!1){return}return this._search(h)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var h=this,c=++f;return function(a){c===f&&h.__response(a),h.pending--,h.pending||h.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:e.map(a,function(c){return typeof c=="string"?{label:c,value:c}:e.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(a){var h=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(h,a),this.menu.deactivate(),this.menu.refresh(),h.show(),this._resizeMenu(),h.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,i){var h=this;e.each(i,function(b,j){h._renderItem(a,j)})},_renderItem:function(a,h){return e("<li></li>").data("item.autocomplete",h).append(e("<a></a>").text(h.label)).appendTo(a)},_move:function(h,c){if(!this.menu.element.is(":visible")){this.search(null,c);return}if(this.menu.first()&&/^previous/.test(h)||this.menu.last()&&/^next/.test(h)){this.element.val(this.term),this.menu.deactivate();return}this.menu[h](c)},widget:function(){return this.menu.element},_keyEvent:function(h,c){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(h,c),c.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,i){var h=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(a,function(b){return h.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(d){if(!b(d.target).closest(".ui-menu-item a").length){return}d.preventDefault(),a.select(d)}),this.refresh()},refresh:function(){var a=this,d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(e){a.activate(e,b(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var k=f.offset().top-this.element.offset().top,j=this.element.scrollTop(),i=this.element.height();k<0?this.element.scrollTop(j+k):k>=i&&this.element.scrollTop(j+k-i+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,i){if(!this.active){this.activate(i,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(i,h):this.activate(i,this.element.children(e))},nextPage:function(a){if(this.hasScroll()){if(!this.active||this.last()){this.activate(a,this.element.children(".ui-menu-item:first"));return}var i=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-i-h+b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:last")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(a){if(this.hasScroll()){if(!this.active||this.first()){this.activate(a,this.element.children(".ui-menu-item:last"));return}var i=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-i+h-b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:first")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(v,u){var t,s,r,q,p="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var a=v(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},l=function(a){var i=a.name,h=a.form,f=v([]);return i&&(h?f=v(h).find("[name='"+i+"']"):f=v("[name='"+i+"']",a.ownerDocument).filter(function(){return !this.form})),f};v.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",m),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var c=this,f=this.options,e=this.type==="checkbox"||this.type==="radio",d="ui-state-hover"+(e?"":" ui-state-active"),a="ui-state-focus";f.label===null&&(f.label=this.buttonElement.html()),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter.button",function(){if(f.disabled){return}v(this).addClass("ui-state-hover"),this===t&&v(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(f.disabled){return}v(this).removeClass(d)}).bind("click.button",function(b){f.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){c.buttonElement.addClass(a)}).bind("blur.button",function(){c.buttonElement.removeClass(a)}),e&&(this.element.bind("change.button",function(){if(q){return}c.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(f.disabled){return}q=!1,s=b.pageX,r=b.pageY}).bind("mouseup.button",function(b){if(f.disabled){return}if(s!==b.pageX||r!==b.pageY){q=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(f.disabled||q){return !1}v(this).toggleClass("ui-state-active"),c.buttonElement.attr("aria-pressed",c.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(f.disabled||q){return !1}v(this).addClass("ui-state-active"),c.buttonElement.attr("aria-pressed","true");var b=c.element[0];l(b).not(b).map(function(){return v(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(f.disabled){return !1}v(this).addClass("ui-state-active"),t=this,v(document).one("mouseup",function(){t=null})}).bind("mouseup.button",function(){if(f.disabled){return !1}v(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(f.disabled){return !1}(h.keyCode==v.ui.keyCode.SPACE||h.keyCode==v.ui.keyCode.ENTER)&&v(this).addClass("ui-state-active")}).bind("keyup.button",function(){v(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===v.ui.keyCode.SPACE&&v(this).click()})),this._setOption("disabled",f.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),d="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(d),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(d),this.buttonElement.length||(this.buttonElement=e.find(d))),this.element.addClass("ui-helper-hidden-accessible");var f=this.element.is(":checked");f&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",f)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" "+o+" "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),v.Widget.prototype.destroy.call(this)},_setOption:function(a,d){v.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled"){d?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a),this.type==="radio"?l(this.element[0]).each(function(){v(this).is(":checked")?v(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):v(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var a=this.buttonElement.removeClass(n),k=v("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),j=this.options.icons,i=j.primary&&j.secondary,h=[];j.primary||j.secondary?(this.options.text&&h.push("ui-button-text-icon"+(i?"s":j.primary?"-primary":"-secondary")),j.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+j.primary+"'></span>"),j.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+j.secondary+"'></span>"),this.options.text||(h.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",k))):h.push("ui-button-text-only"),a.addClass(h.join(" "))}}),v.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,d){a==="disabled"&&this.buttons.button("option",a,d),v.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return v(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return v(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),v.Widget.prototype.destroy.call(this)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(i,h){var m="ui-dialog ui-widget ui-widget-content ui-corner-all ",l={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},k={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},j=i.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};i.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var d=i(this).css(a).offset().top;d<0&&i(this).css("top",a.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var u=this,t=u.options,s=t.title||"&#160;",r=i.ui.dialog.getTitleId(u.element),q=(u.uiDialog=i("<div></div>")).appendTo(document.body).hide().addClass(m+t.dialogClass).css({zIndex:t.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){t.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===i.ui.keyCode.ESCAPE&&(u.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":r}).mousedown(function(b){u.moveToTop(!1,b)}),p=u.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(q),o=(u.uiDialogTitlebar=i("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(q),n=i('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){n.addClass("ui-state-hover")},function(){n.removeClass("ui-state-hover")}).focus(function(){n.addClass("ui-state-focus")}).blur(function(){n.removeClass("ui-state-focus")}).click(function(b){return u.close(b),!1}).appendTo(o),c=(u.uiDialogTitlebarCloseText=i("<span></span>")).addClass("ui-icon ui-icon-closethick").text(t.closeText).appendTo(n),a=i("<span></span>").addClass("ui-dialog-title").attr("id",r).html(s).prependTo(o);i.isFunction(t.beforeclose)&&!i.isFunction(t.beforeClose)&&(t.beforeClose=t.beforeclose),o.find("*").add(o).disableSelection(),t.draggable&&i.fn.draggable&&u._makeDraggable(),t.resizable&&i.fn.resizable&&u._makeResizable(),u._createButtons(t.buttons),u._isOpen=!1,i.fn.bgiframe&&q.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(a){var o=this,n,f;if(!1===o._trigger("beforeClose",a)){return}return o.overlay&&o.overlay.destroy(),o.uiDialog.unbind("keypress.ui-dialog"),o._isOpen=!1,o.options.hide?o.uiDialog.hide(o.options.hide,function(){o._trigger("close",a)}):(o.uiDialog.hide(),o._trigger("close",a)),i.ui.dialog.overlay.resize(),o.options.modal&&(n=0,i(".ui-dialog").each(function(){this!==o.uiDialog[0]&&(f=i(this).css("z-index"),isNaN(f)||(n=Math.max(n,f)))}),i.ui.dialog.maxZ=n),o},isOpen:function(){return this._isOpen},moveToTop:function(a,q){var p=this,o=p.options,n;return o.modal&&!a||!o.stack&&!o.modal?p._trigger("focus",q):(o.zIndex>i.ui.dialog.maxZ&&(i.ui.dialog.maxZ=o.zIndex),p.overlay&&(i.ui.dialog.maxZ+=1,p.overlay.$el.css("z-index",i.ui.dialog.overlay.maxZ=i.ui.dialog.maxZ)),n={scrollTop:p.element.scrollTop(),scrollLeft:p.element.scrollLeft()},i.ui.dialog.maxZ+=1,p.uiDialog.css("z-index",i.ui.dialog.maxZ),p.element.attr(n),p._trigger("focus",q),p)},open:function(){if(this._isOpen){return}var a=this,f=a.options,e=a.uiDialog;return a.overlay=f.modal?new i.ui.dialog.overlay(a):null,a._size(),a._position(f.position),e.show(f.show),a.moveToTop(!0),f.modal&&e.bind("keydown.ui-dialog",function(n){if(n.keyCode!==i.ui.keyCode.TAB){return}var q=i(":tabbable",this),p=q.filter(":first"),o=q.filter(":last");if(n.target===o[0]&&!n.shiftKey){return p.focus(1),!1}if(n.target===p[0]&&n.shiftKey){return o.focus(1),!1}}),i(a.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus(),a._isOpen=!0,a._trigger("open"),a},_createButtons:function(a){var p=this,o=!1,n=i("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=i("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);p.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof a=="object"&&a!==null&&i.each(a,function(){return !(o=!0)}),o&&(i.each(a,function(c,r){r=i.isFunction(r)?{click:r,text:c}:r;var q=i('<button type="button"></button>').click(function(){r.click.apply(p.element[0],arguments)}).appendTo(f);i.each(r,function(e,d){if(e==="click"){return}e in j?q[e](d):q.attr(e,d)}),i.fn.button&&q.button()}),n.appendTo(p.uiDialog))},_makeDraggable:function(){function n(b){return{position:b.position,offset:b.offset}}var a=this,q=a.options,p=i(document),o;a.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,b){o=q.height==="auto"?"auto":i(this).height(),i(this).height(i(this).height()).addClass("ui-dialog-dragging"),a._trigger("dragStart",c,n(b))},drag:function(b,d){a._trigger("drag",b,n(d))},stop:function(c,b){q.position=[b.position.left-p.scrollLeft(),b.position.top-p.scrollTop()],i(this).removeClass("ui-dialog-dragging").height(o),a._trigger("dragStop",c,n(b)),i.ui.dialog.overlay.resize()}})},_makeResizable:function(q){function a(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}q=q===h?this.options.resizable:q;var p=this,o=p.options,n=p.uiDialog.css("position"),b=typeof q=="string"?q:"n,e,s,w,se,sw,ne,nw";p.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:p.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:p._minHeight(),handles:b,start:function(d,e){i(this).addClass("ui-dialog-resizing"),p._trigger("resizeStart",d,a(e))},resize:function(d,c){p._trigger("resize",d,a(c))},stop:function(d,e){i(this).removeClass("ui-dialog-resizing"),o.height=i(this).height(),o.width=i(this).width(),p._trigger("resizeStop",d,a(e)),i.ui.dialog.overlay.resize()}}).css("position",n).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(a){var o=[],n=[0,0],f;if(a){if(typeof a=="string"||typeof a=="object"&&"0" in a){o=a.split?a.split(" "):[a[0],a[1]],o.length===1&&(o[1]=o[0]),i.each(["left","top"],function(d,c){+o[d]===o[d]&&(n[d]=o[d],o[d]=c)}),a={my:o.join(" "),at:o.join(" "),offset:n.join(" ")}}a=i.extend({},i.ui.dialog.prototype.options.position,a)}else{a=i.ui.dialog.prototype.options.position}f=this.uiDialog.is(":visible"),f||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(i.extend({of:window},a)),f||this.uiDialog.hide()},_setOptions:function(a){var n=this,e={},d=!1;i.each(a,function(f,c){n._setOption(f,c),f in l&&(d=!0),f in k&&(e[f]=c)}),d&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,q){var p=this,o=p.uiDialog;switch(a){case"beforeclose":a="beforeClose";break;case"buttons":p._createButtons(q);break;case"closeText":p.uiDialogTitlebarCloseText.text(""+q);break;case"dialogClass":o.removeClass(p.options.dialogClass).addClass(m+q);break;case"disabled":q?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":var n=o.is(":data(draggable)");n&&!q&&o.draggable("destroy"),!n&&q&&p._makeDraggable();break;case"position":p._position(q);break;case"resizable":var c=o.is(":data(resizable)");c&&!q&&o.resizable("destroy"),c&&typeof q=="string"&&o.resizable("option","handles",q),!c&&q!==!1&&p._makeResizable(q);break;case"title":i(".ui-dialog-title",p.uiDialogTitlebar).html(""+(q||"&#160;"))}i.Widget.prototype._setOption.apply(p,arguments)},_size:function(){var a=this.options,q,p,o=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),a.minWidth>a.width&&(a.width=a.minWidth),q=this.uiDialog.css({height:"auto",width:a.width}).height(),p=Math.max(0,a.minHeight-q);if(a.height==="auto"){if(i.support.minHeight){this.element.css({minHeight:p,height:"auto"})}else{this.uiDialog.show();var n=this.element.css("height","auto").height();o||this.uiDialog.hide(),this.element.height(Math.max(n,p))}}else{this.element.height(Math.max(a.height-q,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),i.extend(i.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(d){var c=d.attr("id");return c||(this.uuid+=1,c=this.uuid),"ui-dialog-title-"+c},overlay:function(a){this.$el=i.ui.dialog.overlay.create(a)}}),i.extend(i.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:i.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(a){this.instances.length===0&&(setTimeout(function(){i.ui.dialog.overlay.instances.length&&i(document).bind(i.ui.dialog.overlay.events,function(c){if(i(c.target).zIndex()<i.ui.dialog.overlay.maxZ){return !1}})},1),i(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===i.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}),i(window).bind("resize.dialog-overlay",i.ui.dialog.overlay.resize));var d=(this.oldInstances.pop()||i("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return i.fn.bgiframe&&d.bgiframe(),this.instances.push(d),d},destroy:function(a){var f=i.inArray(a,this.instances);f!=-1&&this.oldInstances.push(this.instances.splice(f,1)[0]),this.instances.length===0&&i([document,window]).unbind(".dialog-overlay"),a.remove();var e=0;i.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var a,d;return i.browser.msie&&i.browser.version<7?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<d?i(window).height()+"px":a+"px"):i(document).height()+"px"},width:function(){var a,d;return i.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<d?i(window).width()+"px":a+"px"):i(document).width()+"px"},resize:function(){var a=i([]);i.each(i.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:i.ui.dialog.overlay.width(),height:i.ui.dialog.overlay.height()})}}),i.extend(i.ui.dialog.overlay.prototype,{destroy:function(){i.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,n=this.options,m=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),l="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",k=n.values&&n.values.length||1,j=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&n.values.length!==2&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(n.range==="min"||n.range==="max"?" ui-slider-range-"+n.range:"")));for(var c=m.length;c<k;c+=1){j.push(l)}this.handles=m.add(e(j.join("")).appendTo(a.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(h){e(this).data("index.ui-slider-handle",h)}),this.handles.keydown(function(s){var r=e(this).data("index.ui-slider-handle"),q,p,o,b;if(a.options.disabled){return}switch(s.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:s.preventDefault();if(!a._keySliding){a._keySliding=!0,e(this).addClass("ui-state-active"),q=a._start(s,r);if(q===!1){return}}}b=a.options.step,a.options.values&&a.options.values.length?p=o=a.values(r):p=o=a.value();switch(s.keyCode){case e.ui.keyCode.HOME:o=a._valueMin();break;case e.ui.keyCode.END:o=a._valueMax();break;case e.ui.keyCode.PAGE_UP:o=a._trimAlignValue(p+(a._valueMax()-a._valueMin())/f);break;case e.ui.keyCode.PAGE_DOWN:o=a._trimAlignValue(p-(a._valueMax()-a._valueMin())/f);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(p===a._valueMax()){return}o=a._trimAlignValue(p+b);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(p===a._valueMin()){return}o=a._trimAlignValue(p-b)}a._slide(s,r,o)}).keyup(function(h){var b=e(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(h,b),a._change(h,b),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(v){var u=this.options,t,s,r,q,p,o,n,m,a;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:v.pageX,y:v.pageY},s=this._normValueFromMouse(t),r=this._valueMax()-this._valueMin()+1,p=this,this.handles.each(function(h){var i=Math.abs(s-p.values(h));r>i&&(r=i,q=e(this),o=h)}),u.range===!0&&this.values(1)===u.min&&(o+=1,q=e(this.handles[o])),n=this._start(v,o),n===!1?!1:(this._mouseSliding=!0,p._handleIndex=o,q.addClass("ui-state-active").focus(),m=q.offset(),a=!e(v.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:v.pageX-m.left-q.width()/2,top:v.pageY-m.top-q.height()/2-(parseInt(q.css("borderTopWidth"),10)||0)-(parseInt(q.css("borderBottomWidth"),10)||0)+(parseInt(q.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(v,o,s),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(i){var h={x:i.pageX,y:i.pageY},j=this._normValueFromMouse(h);return this._slide(i,this._handleIndex,j),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(i){var h,m,l,k,j;return this.orientation==="horizontal"?(h=this.elementSize.width,m=i.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(h=this.elementSize.height,m=i.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),l=m/h,l>1&&(l=1),l<0&&(l=0),this.orientation==="vertical"&&(l=1-l),k=this._valueMax()-this._valueMin(),j=this._valueMin()+l*k,this._trimAlignValue(j)},_start:function(i,h){var j={handle:this.handles[h],value:this.value()};return this.options.values&&this.options.values.length&&(j.value=this.values(h),j.values=this.values()),this._trigger("start",i,j)},_slide:function(i,h,m){var l,k,j;this.options.values&&this.options.values.length?(l=this.values(h?0:1),this.options.values.length===2&&this.options.range===!0&&(h===0&&m>l||h===1&&m<l)&&(m=l),m!==this.values(h)&&(k=this.values(),k[h]=m,j=this._trigger("slide",i,{handle:this.handles[h],value:m,values:k}),l=this.values(h?0:1),j!==!1&&this.values(h,m,!0))):m!==this.value()&&(j=this._trigger("slide",i,{handle:this.handles[h],value:m}),j!==!1&&this.value(m))},_stop:function(i,h){var j={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(j.value=this.values(h),j.values=this.values()),this._trigger("stop",i,j)},_change:function(i,h){if(!this._keySliding&&!this._mouseSliding){var j={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(j.value=this.values(h),j.values=this.values()),this._trigger("change",i,j)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(a,k){var j,i,h;if(arguments.length>1){this.options.values[a]=this._trimAlignValue(k),this._refreshValue(),this._change(null,a);return}if(!arguments.length){return this._values()}if(!e.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(a):this.value()}j=this.options.values,i=arguments[0];for(h=0;h<j.length;h+=1){j[h]=this._trimAlignValue(i[h]),this._change(null,h)}this._refreshValue()},_setOption:function(a,j){var i,h=0;e.isArray(this.options.values)&&(h=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(a){case"disabled":j?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(i=0;i<h;i+=1){this._change(null,i)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(i){var h,k,j;if(arguments.length){return h=this.options.values[i],h=this._trimAlignValue(h),h}k=this.options.values.slice();for(j=0;j<k.length;j+=1){k[j]=this._trimAlignValue(k[j])}return k},_trimAlignValue:function(i){if(i<=this._valueMin()){return this._valueMin()}if(i>=this._valueMax()){return this._valueMax()}var h=this.options.step>0?this.options.step:1,k=(i-this._valueMin())%h,j=i-k;return Math.abs(k)*2>=h&&(j+=k>0?h:-h),parseFloat(j.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,s=this.options,r=this,q=this._animateOff?!1:s.animate,p,o={},n,m,l,a;this.options.values&&this.options.values.length?this.handles.each(function(c,h){p=(r.values(c)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=p+"%",e(this).stop(1,1)[q?"animate":"css"](o,s.animate),r.options.range===!0&&(r.orientation==="horizontal"?(c===0&&r.range.stop(1,1)[q?"animate":"css"]({left:p+"%"},s.animate),c===1&&r.range[q?"animate":"css"]({width:p-n+"%"},{queue:!1,duration:s.animate})):(c===0&&r.range.stop(1,1)[q?"animate":"css"]({bottom:p+"%"},s.animate),c===1&&r.range[q?"animate":"css"]({height:p-n+"%"},{queue:!1,duration:s.animate}))),n=p}):(m=this.value(),l=this._valueMin(),a=this._valueMax(),p=a!==l?(m-l)/(a-l)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=p+"%",this.handle.stop(1,1)[q?"animate":"css"](o,s.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[q?"animate":"css"]({width:p+"%"},s.animate),t==="max"&&this.orientation==="horizontal"&&this.range[q?"animate":"css"]({width:100-p+"%"},{queue:!1,duration:s.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[q?"animate":"css"]({height:p+"%"},s.animate),t==="max"&&this.orientation==="vertical"&&this.range[q?"animate":"css"]({height:100-p+"%"},{queue:!1,duration:s.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(i,h){function k(){return ++m}function j(){return ++l}var m=0,l=0;i.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(d,c){if(d=="selected"){if(this.options.collapsible&&c==this.options.selected){return}this.select(c)}else{this.options[d]=c,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+k()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+j());return i.cookie.apply(null,[a].concat(i.makeArray(arguments)))},_ui:function(d,c){return{tab:d,panel:c,index:this.anchors.index(d)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=i(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(z){function p(d,e){d.css("display",""),!i.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var y=this,x=this.options,w=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=i(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return i("a",this)[0]}),this.panels=i([]),this.anchors.each(function(d,B){var A=i(B).attr("href"),o=A.split("#")[0],n;o&&(o===location.toString().split("#")[0]||(n=i("base")[0])&&o===n.href)&&(A=B.hash,B.href=A);if(w.test(A)){y.panels=y.panels.add(y.element.find(y._sanitizeSelector(A)))}else{if(A&&A!=="#"){i.data(B,"href.tabs",A),i.data(B,"load.tabs",A.replace(/#.*$/,""));var f=y._tabId(B);B.href="#"+f;var e=y.element.find("#"+f);e.length||(e=i(x.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(y.panels[d-1]||y.list),e.data("destroy.tabs",!0)),y.panels=y.panels.add(e)}else{x.disabled.push(d)}}}),z?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),x.selected===h?(location.hash&&this.anchors.each(function(d,c){if(c.hash==location.hash){return x.selected=d,!1}}),typeof x.selected!="number"&&x.cookie&&(x.selected=parseInt(y._cookie(),10)),typeof x.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),x.selected=x.selected||(this.lis.length?0:-1)):x.selected===null&&(x.selected=-1),x.selected=x.selected>=0&&this.anchors[x.selected]||x.selected<0?x.selected:0,x.disabled=i.unique(x.disabled.concat(i.map(this.lis.filter(".ui-state-disabled"),function(d,c){return y.lis.index(d)}))).sort(),i.inArray(x.selected,x.disabled)!=-1&&x.disabled.splice(i.inArray(x.selected,x.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),x.selected>=0&&this.anchors.length&&(y.element.find(y._sanitizeSelector(y.anchors[x.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(x.selected).addClass("ui-tabs-selected ui-state-active"),y.element.queue("tabs",function(){y._trigger("show",null,y._ui(y.anchors[x.selected],y.element.find(y._sanitizeSelector(y.anchors[x.selected].hash))[0]))}),this.load(x.selected)),i(window).bind("unload",function(){y.lis.add(y.anchors).unbind(".tabs"),y.lis=y.anchors=y.panels=null})):x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[x.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),x.cookie&&this._cookie(x.selected,x.cookie);for(var v=0,u;u=this.lis[v];v++){i(u)[i.inArray(v,x.disabled)!=-1&&!i(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}x.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(x.event!=="mouseover"){var t=function(d,c){c.is(":not(.ui-state-disabled)")&&c.addClass("ui-state-"+d)},s=function(d,c){c.removeClass("ui-state-"+d)};this.lis.bind("mouseover.tabs",function(){t("hover",i(this))}),this.lis.bind("mouseout.tabs",function(){s("hover",i(this))}),this.anchors.bind("focus.tabs",function(){t("focus",i(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){s("focus",i(this).closest("li"))})}var r,q;x.fx&&(i.isArray(x.fx)?(r=x.fx[0],q=x.fx[1]):r=q=x.fx);var b=q?function(d,e){i(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(q,q.duration||"normal",function(){p(e,q),y._trigger("show",null,y._ui(d,e[0]))})}:function(d,e){i(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),y._trigger("show",null,y._ui(d,e[0]))},a=r?function(d,c){c.animate(r,r.duration||"normal",function(){y.lis.removeClass("ui-tabs-selected ui-state-active"),c.addClass("ui-tabs-hide"),p(c,r),y.element.dequeue("tabs")})}:function(e,d,f){y.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),y.element.dequeue("tabs")};this.anchors.bind(x.event+".tabs",function(){var d=this,o=i(d).closest("li"),n=y.panels.filter(":not(.ui-tabs-hide)"),e=y.element.find(y._sanitizeSelector(d.hash));if(o.hasClass("ui-tabs-selected")&&!x.collapsible||o.hasClass("ui-state-disabled")||o.hasClass("ui-state-processing")||y.panels.filter(":animated").length||y._trigger("select",null,y._ui(this,e[0]))===!1){return this.blur(),!1}x.selected=y.anchors.index(this),y.abort();if(x.collapsible){if(o.hasClass("ui-tabs-selected")){return x.selected=-1,x.cookie&&y._cookie(x.selected,x.cookie),y.element.queue("tabs",function(){a(d,n)}).dequeue("tabs"),this.blur(),!1}if(!n.length){return x.cookie&&y._cookie(x.selected,x.cookie),y.element.queue("tabs",function(){b(d,e)}),y.load(y.anchors.index(this)),this.blur(),!1}}x.cookie&&y._cookie(x.selected,x.cookie);if(e.length){n.length&&y.element.queue("tabs",function(){a(d,n)}),y.element.queue("tabs",function(){b(d,e)}),y.load(y.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}i.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var a=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var d=i.data(this,"href.tabs");d&&(this.href=d);var e=i(this).unbind(".tabs");i.each(["href","load","cache"],function(f,c){e.removeData(c+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){i.data(this,"destroy.tabs")?i(this).remove():i(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),a.cookie&&this._cookie(null,a.cookie),this},add:function(s,r,q){q===h&&(q=this.anchors.length);var p=this,o=this.options,n=i(o.tabTemplate.replace(/#\{href\}/g,s).replace(/#\{label\}/g,r)),b=s.indexOf("#")?this._tabId(i("a",n)[0]):s.replace("#","");n.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var a=p.element.find("#"+b);return a.length||(a=i(o.panelTemplate).attr("id",b).data("destroy.tabs",!0)),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),q>=this.lis.length?(n.appendTo(this.list),a.appendTo(this.list[0].parentNode)):(n.insertBefore(this.lis[q]),a.insertBefore(this.panels[q])),o.disabled=i.map(o.disabled,function(d,c){return d>=q?++d:d}),this._tabify(),this.anchors.length==1&&(o.selected=0,n.addClass("ui-tabs-selected ui-state-active"),a.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){p._trigger("show",null,p._ui(p.anchors[0],p.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[q],this.panels[q])),this},remove:function(a){a=this._getIndex(a);var o=this.options,n=this.lis.eq(a).remove(),f=this.panels.eq(a).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(a+(a+1<this.anchors.length?1:-1)),o.disabled=i.map(i.grep(o.disabled,function(b,d){return b!=a}),function(b,d){return b>=a?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],f[0])),this},enable:function(a){a=this._getIndex(a);var d=this.options;if(i.inArray(a,d.disabled)==-1){return}return this.lis.eq(a).removeClass("ui-state-disabled"),d.disabled=i.grep(d.disabled,function(b,e){return b!=a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(e){e=this._getIndex(e);var d=this,f=this.options;return e!=f.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),f.disabled.push(e),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(a){a=this._getIndex(a);var r=this,q=this.options,p=this.anchors.eq(a)[0],o=i.data(p,"load.tabs");this.abort();if(!o||this.element.queue("tabs").length!==0&&i.data(p,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(a).addClass("ui-state-processing");if(q.spinner){var n=i("span",p);n.data("label.tabs",n.html()).html(q.spinner)}return this.xhr=i.ajax(i.extend({},q.ajaxOptions,{url:o,success:function(d,c){r.element.find(r._sanitizeSelector(p.hash)).html(d),r._cleanup(),q.cache&&i.data(p,"cache.tabs",!0),r._trigger("load",null,r._ui(r.anchors[a],r.panels[a]));try{q.ajaxOptions.success(d,c)}catch(b){}},error:function(b,d,c){r._cleanup(),r._trigger("load",null,r._ui(r.anchors[a],r.panels[a]));try{q.ajaxOptions.error(b,d,a,p)}catch(c){}}})),r.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(d,c){return this.anchors.eq(d).removeData("cache.tabs").data("load.tabs",c),this},length:function(){return this.anchors.length}}),i.extend(i.ui.tabs,{version:"1.8.21"}),i.extend(i.ui.tabs.prototype,{rotation:null,rotate:function(o,n){var s=this,r=this.options,q=s._rotate||(s._rotate=function(a){clearTimeout(s.rotation),s.rotation=setTimeout(function(){var b=r.selected;s.select(++b<s.anchors.length?b:0)},o),a&&a.stopPropagation()}),p=s._unrotate||(s._unrotate=n?function(b){q()}:function(b){b.clientX&&s.rotate(null)});return o?(this.element.bind("tabsshow",q),this.anchors.bind(r.event+".tabs",p),q()):(clearTimeout(s.rotation),this.element.unbind("tabsshow",q),this.anchors.unbind(r.event+".tabs",p),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=d("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),d.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===c?this._value():(this._setOption("value",b),this)},_setOption:function(a,e){a==="value"&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),d.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var f=this.value(),e=this._percentage();this.oldValue!==f&&(this.oldValue=f,this._trigger("change")),this.valueDiv.toggle(f>this.min).toggleClass("ui-corner-right",f===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",f)}}),d.extend(d.ui.progressbar,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(x,w){function v(a){var d;return a&&a.constructor==Array&&a.length==3?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:(d=/rgba\(0, 0, 0, 0\)/.exec(a))?t.transparent:t[x.trim(a).toLowerCase()]}function u(a,f){var c;do{c=x.curCSS(a,f);if(c!=""&&c!="transparent"||x.nodeName(a,"body")){break}f="backgroundColor"}while(a=a.parentNode);return v(c)}function q(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},k,j;if(h&&h.length&&h[0]&&h[h[0]]){var i=h.length;while(i--){k=h[i],typeof h[k]=="string"&&(j=k.replace(/\-(\w)/g,function(d,c){return c.toUpperCase()}),f[j]=h[k])}}else{for(k in h){typeof h[k]=="string"&&(f[k]=h[k])}}return f}function p(a){var f,e;for(f in a){e=a[f],(e==null||x.isFunction(e)||f in r||/scrollbar/.test(f)||!/color/i.test(f)&&isNaN(parseFloat(e)))&&delete a[f]}return a}function o(f,e){var i={_:0},h;for(h in e){f[h]!=e[h]&&(i[h]=e[h])}return i}function n(a,i,h,f){typeof a=="object"&&(f=i,h=null,i=a,a=i.effect),x.isFunction(i)&&(f=i,h=null,i={});if(typeof i=="number"||x.fx.speeds[i]){f=h,h=i,i={}}return x.isFunction(h)&&(f=h,h=null),i=i||{},h=h||i.duration,h=x.fx.off?0:typeof h=="number"?h:h in x.fx.speeds?x.fx.speeds[h]:x.fx.speeds._default,f=f||i.complete,[a,i,h,f]}function m(a){return !a||typeof a=="number"||x.fx.speeds[a]?!0:typeof a=="string"&&!x.effects[a]?!0:!1}x.effects={},x.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(a,c){x.fx.step[c]=function(b){b.colorInit||(b.start=u(b.elem,c),b.end=v(b.end),b.colorInit=!0),b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};x.effects.animateClass=function(a,i,h,f){return x.isFunction(h)&&(f=h,h=null),this.queue(function(){var e=x(this),d=e.attr("style")||" ",c=p(q.call(this)),b,j=e.attr("class")||"";x.each(s,function(k,l){a[l]&&e[l+"Class"](a[l])}),b=p(q.call(this)),e.attr("class",j),e.animate(o(c,b),{queue:!1,duration:i,easing:h,complete:function(){x.each(s,function(k,l){a[l]&&e[l+"Class"](a[l])}),typeof e.attr("style")=="object"?(e.attr("style").cssText="",e.attr("style").cssText=d):e.attr("style",d),f&&f.apply(this,arguments),x.dequeue(this)}})})},x.fn.extend({_addClass:x.fn.addClass,addClass:function(a,i,h,f){return i?x.effects.animateClass.apply(this,[{add:a},i,h,f]):this._addClass(a)},_removeClass:x.fn.removeClass,removeClass:function(a,i,h,f){return i?x.effects.animateClass.apply(this,[{remove:a},i,h,f]):this._removeClass(a)},_toggleClass:x.fn.toggleClass,toggleClass:function(j,i,h,b,a){return typeof i=="boolean"||i===w?h?x.effects.animateClass.apply(this,[i?{add:j}:{remove:j},h,b,a]):this._toggleClass(j,i):x.effects.animateClass.apply(this,[{toggle:j},i,h,b])},switchClass:function(a,k,j,i,h){return x.effects.animateClass.apply(this,[{add:k,remove:a},j,i,h])}}),x.extend(x.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(d,c){return c=="toggle"&&(c=d.is(":hidden")?"show":"hide"),c},getBaseline:function(f,e){var i,h;switch(f[0]){case"top":i=0;break;case"middle":i=0.5;break;case"bottom":i=1;break;default:i=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:i}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper")){return a.parent()}var k={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},j=x("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;try{i.id}catch(h){i=document.body}return a.wrap(j),(a[0]===i||x.contains(a[0],i))&&x(i).focus(),j=a.parent(),a.css("position")=="static"?(j.css({position:"relative"}),a.css({position:"relative"})):(x.extend(k,{position:a.css("position"),zIndex:a.css("z-index")}),x.each(["top","left","bottom","right"],function(b,c){k[c]=a.css(c),isNaN(parseInt(k[c],10))&&(k[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),j.css(k).show()},removeWrapper:function(a){var f,e=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(f=a.parent().replaceWith(a),(a[0]===e||x.contains(a[0],e))&&x(e).focus(),f):a},setTransition:function(a,i,h,f){return f=f||{},x.each(i,function(b,e){var d=a.cssUnit(e);d[0]>0&&(f[e]=d[0]*h+d[1])}),f}}),x.fn.extend({effect:function(a,B,A,z){var y=n.apply(this,arguments),l={options:y[1],duration:y[2],callback:y[3]},k=l.options.mode,j=x.effects[a];return x.fx.off||!j?k?this[k](l.duration,l.callback):this.each(function(){l.callback&&l.callback.call(this)}):j.call(this,l)},_show:x.fn.show,show:function(d){if(m(d)){return this._show.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="show",this.effect.apply(this,c)},_hide:x.fn.hide,hide:function(d){if(m(d)){return this._hide.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="hide",this.effect.apply(this,c)},__toggle:x.fn.toggle,toggle:function(a){if(m(a)||typeof a=="boolean"||x.isFunction(a)){return this.__toggle.apply(this,arguments)}var d=n.apply(this,arguments);return d[1].mode="toggle",this.effect.apply(this,d)},cssUnit:function(a){var f=this.css(a),e=[];return x.each(["em","px","%","pt"],function(d,c){f.indexOf(c)>0&&(e=[parseFloat(f),c])}),e}}),x.easing.jswing=x.easing.swing,x.extend(x.easing,{def:"easeOutQuad",swing:function(a,k,j,i,h){return x.easing[x.easing.def](a,k,j,i,h)},easeInQuad:function(h,f,k,j,i){return j*(f/=i)*f+k},easeOutQuad:function(h,f,k,j,i){return -j*(f/=i)*(f-2)+k},easeInOutQuad:function(h,f,k,j,i){return(f/=i/2)<1?j/2*f*f+k:-j/2*(--f*(f-2)-1)+k},easeInCubic:function(h,f,k,j,i){return j*(f/=i)*f*f+k},easeOutCubic:function(h,f,k,j,i){return j*((f=f/i-1)*f*f+1)+k},easeInOutCubic:function(h,f,k,j,i){return(f/=i/2)<1?j/2*f*f*f+k:j/2*((f-=2)*f*f+2)+k},easeInQuart:function(h,f,k,j,i){return j*(f/=i)*f*f*f+k},easeOutQuart:function(h,f,k,j,i){return -j*((f=f/i-1)*f*f*f-1)+k},easeInOutQuart:function(h,f,k,j,i){return(f/=i/2)<1?j/2*f*f*f*f+k:-j/2*((f-=2)*f*f*f-2)+k},easeInQuint:function(h,f,k,j,i){return j*(f/=i)*f*f*f*f+k},easeOutQuint:function(h,f,k,j,i){return j*((f=f/i-1)*f*f*f*f+1)+k},easeInOutQuint:function(h,f,k,j,i){return(f/=i/2)<1?j/2*f*f*f*f*f+k:j/2*((f-=2)*f*f*f*f+2)+k},easeInSine:function(h,f,k,j,i){return -j*Math.cos(f/i*(Math.PI/2))+j+k},easeOutSine:function(h,f,k,j,i){return j*Math.sin(f/i*(Math.PI/2))+k},easeInOutSine:function(h,f,k,j,i){return -j/2*(Math.cos(Math.PI*f/i)-1)+k},easeInExpo:function(h,f,k,j,i){return f==0?k:j*Math.pow(2,10*(f/i-1))+k},easeOutExpo:function(h,f,k,j,i){return f==i?k+j:j*(-Math.pow(2,-10*f/i)+1)+k},easeInOutExpo:function(h,f,k,j,i){return f==0?k:f==i?k+j:(f/=i/2)<1?j/2*Math.pow(2,10*(f-1))+k:j/2*(-Math.pow(2,-10*--f)+2)+k},easeInCirc:function(h,f,k,j,i){return -j*(Math.sqrt(1-(f/=i)*f)-1)+k},easeOutCirc:function(h,f,k,j,i){return j*Math.sqrt(1-(f=f/i-1)*f)+k},easeInOutCirc:function(h,f,k,j,i){return(f/=i/2)<1?-j/2*(Math.sqrt(1-f*f)-1)+k:j/2*(Math.sqrt(1-(f-=2)*f)+1)+k},easeInElastic:function(j,i,B,A,z){var y=1.70158,l=0,k=A;if(i==0){return B}if((i/=z)==1){return B+A}l||(l=z*0.3);if(k<Math.abs(A)){k=A;var y=l/4}else{var y=l/(2*Math.PI)*Math.asin(A/k)}return -(k*Math.pow(2,10*(i-=1))*Math.sin((i*z-y)*2*Math.PI/l))+B},easeOutElastic:function(j,i,B,A,z){var y=1.70158,l=0,k=A;if(i==0){return B}if((i/=z)==1){return B+A}l||(l=z*0.3);if(k<Math.abs(A)){k=A;var y=l/4}else{var y=l/(2*Math.PI)*Math.asin(A/k)}return k*Math.pow(2,-10*i)*Math.sin((i*z-y)*2*Math.PI/l)+A+B},easeInOutElastic:function(j,i,B,A,z){var y=1.70158,l=0,k=A;if(i==0){return B}if((i/=z/2)==2){return B+A}l||(l=z*0.3*1.5);if(k<Math.abs(A)){k=A;var y=l/4}else{var y=l/(2*Math.PI)*Math.asin(A/k)}return i<1?-0.5*k*Math.pow(2,10*(i-=1))*Math.sin((i*z-y)*2*Math.PI/l)+B:k*Math.pow(2,-10*(i-=1))*Math.sin((i*z-y)*2*Math.PI/l)*0.5+A+B},easeInBack:function(b,l,k,j,i,h){return h==w&&(h=1.70158),j*(l/=i)*l*((h+1)*l-h)+k},easeOutBack:function(b,l,k,j,i,h){return h==w&&(h=1.70158),j*((l=l/i-1)*l*((h+1)*l+h)+1)+k},easeInOutBack:function(b,l,k,j,i,h){return h==w&&(h=1.70158),(l/=i/2)<1?j/2*l*l*(((h*=1.525)+1)*l-h)+k:j/2*((l-=2)*l*(((h*=1.525)+1)*l+h)+2)+k},easeInBounce:function(a,k,j,i,h){return i-x.easing.easeOutBounce(a,h-k,0,i,h)+j},easeOutBounce:function(h,f,k,j,i){return(f/=i)<1/2.75?j*7.5625*f*f+k:f<2/2.75?j*(7.5625*(f-=1.5/2.75)*f+0.75)+k:f<2.5/2.75?j*(7.5625*(f-=2.25/2.75)*f+0.9375)+k:j*(7.5625*(f-=2.625/2.75)*f+0.984375)+k},easeInOutBounce:function(a,k,j,i,h){return k<h/2?x.easing.easeInBounce(a,k*2,0,i,h)*0.5+j:x.easing.easeOutBounce(a,k*2-h,0,i,h)*0.5+i*0.5+j}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.blind=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right"],o=d.effects.setMode(q,a.options.mode||"hide"),n=a.options.direction||"vertical";d.effects.save(q,p),q.show();var m=d.effects.createWrapper(q).css({overflow:"hidden"}),l=n=="vertical"?"height":"width",k=n=="vertical"?m.height():m.width();o=="show"&&m.css(l,0);var b={};b[l]=o=="show"?k:0,m.animate(b,a.duration,a.options.easing,function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(q[0],arguments),q.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.bounce=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"up",w=a.options.distance||20,v=a.options.times||5,u=a.duration||250;/show|hide/.test(y)&&z.push("opacity"),d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",w=a.options.distance||(t=="top"?A.outerHeight({margin:!0})/3:A.outerWidth({margin:!0})/3);y=="show"&&A.css("opacity",0).css(t,s=="pos"?-w:w),y=="hide"&&(w=w/(v*2)),y!="hide"&&v--;if(y=="show"){var r={opacity:1};r[t]=(s=="pos"?"+=":"-=")+w,A.animate(r,u/2,a.options.easing),w=w/2,v--}for(var q=0;q<v;q++){var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing),w=y=="hide"?w*2:w/2}if(y=="hide"){var r={opacity:0};r[t]=(s=="pos"?"-=":"+=")+w,A.animate(r,u/2,a.options.easing,function(){A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}else{var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.clip=function(a){return this.queue(function(){var s=d(this),r=["position","top","bottom","left","right","height","width"],q=d.effects.setMode(s,a.options.mode||"hide"),p=a.options.direction||"vertical";d.effects.save(s,r),s.show();var o=d.effects.createWrapper(s).css({overflow:"hidden"}),n=s[0].tagName=="IMG"?o:s,m={size:p=="vertical"?"height":"width",position:p=="vertical"?"top":"left"},l=p=="vertical"?n.height():n.width();q=="show"&&(n.css(m.size,0),n.css(m.position,l/2));var b={};b[m.size]=q=="show"?l:0,b[m.position]=q=="show"?0:l/2,n.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){q=="hide"&&s.hide(),d.effects.restore(s,r),d.effects.removeWrapper(s),a.callback&&a.callback.apply(s[0],arguments),s.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.drop=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right","opacity"],o=d.effects.setMode(q,a.options.mode||"hide"),n=a.options.direction||"left";d.effects.save(q,p),q.show(),d.effects.createWrapper(q);var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?q.outerHeight({margin:!0})/2:q.outerWidth({margin:!0})/2);o=="show"&&q.css("opacity",0).css(m,l=="pos"?-k:k);var b={opacity:o=="show"?1:0};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,q.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(this,arguments),q.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.explode=function(a){return this.queue(function(){var q=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,p=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?d(this).is(":visible")?"hide":"show":a.options.mode;var o=d(this).show().css("visibility","hidden"),n=o.offset();n.top-=parseInt(o.css("marginTop"),10)||0,n.left-=parseInt(o.css("marginLeft"),10)||0;var m=o.outerWidth(!0),l=o.outerHeight(!0);for(var k=0;k<q;k++){for(var b=0;b<p;b++){o.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(m/p),top:-k*(l/q)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m/p,height:l/q,left:n.left+b*(m/p)+(a.options.mode=="show"?(b-Math.floor(p/2))*(m/p):0),top:n.top+k*(l/q)+(a.options.mode=="show"?(k-Math.floor(q/2))*(l/q):0),opacity:a.options.mode=="show"?0:1}).animate({left:n.left+b*(m/p)+(a.options.mode=="show"?0:(b-Math.floor(p/2))*(m/p)),top:n.top+k*(l/q)+(a.options.mode=="show"?0:(k-Math.floor(q/2))*(l/q)),opacity:a.options.mode=="show"?1:0},a.duration||500)}}setTimeout(function(){a.options.mode=="show"?o.css({visibility:"visible"}):o.css({visibility:"visible"}).hide(),a.callback&&a.callback.apply(o[0]),o.dequeue(),d("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fade=function(a){return this.queue(function(){var e=d(this),b=d.effects.setMode(e,a.options.mode||"hide");e.animate({opacity:b},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments),e.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fold=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"hide"),x=a.options.size||15,w=!!a.options.horizFirst,v=a.duration?a.duration/2:d.fx.speeds._default/2;d.effects.save(A,z),A.show();var u=d.effects.createWrapper(A).css({overflow:"hidden"}),t=y=="show"!=w,s=t?["width","height"]:["height","width"],r=t?[u.width(),u.height()]:[u.height(),u.width()],q=/([0-9]+)%/.exec(x);q&&(x=parseInt(q[1],10)/100*r[y=="hide"?0:1]),y=="show"&&u.css(w?{height:0,width:x}:{height:x,width:0});var o={},b={};o[s[0]]=y=="show"?r[0]:x,b[s[1]]=y=="show"?r[1]:0,u.animate(o,v,a.options.easing).animate(b,v,a.options.easing,function(){y=="hide"&&A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(A[0],arguments),A.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.highlight=function(a){return this.queue(function(){var j=d(this),i=["backgroundImage","backgroundColor","opacity"],h=d.effects.setMode(j,a.options.mode||"show"),b={backgroundColor:j.css("backgroundColor")};h=="hide"&&(b.opacity=0),d.effects.save(j,i),j.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){h=="hide"&&j.hide(),d.effects.restore(j,i),h=="show"&&!d.support.opacity&&this.style.removeAttribute("filter"),a.callback&&a.callback.apply(this,arguments),j.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.pulsate=function(a){return this.queue(function(){var o=d(this),n=d.effects.setMode(o,a.options.mode||"show"),m=(a.options.times||5)*2-1,l=a.duration?a.duration/2:d.fx.speeds._default/2,k=o.is(":visible"),j=0;k||(o.css("opacity",0).show(),j=1),(n=="hide"&&k||n=="show"&&!k)&&m--;for(var b=0;b<m;b++){o.animate({opacity:j},l,a.options.easing),j=(j+1)%2}o.animate({opacity:j},l,a.options.easing,function(){j==0&&o.hide(),a.callback&&a.callback.apply(this,arguments)}),o.queue("fx",function(){o.dequeue()}).dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.puff=function(a){return this.queue(function(){var k=d(this),j=d.effects.setMode(k,a.options.mode||"hide"),i=parseInt(a.options.percent,10)||150,h=i/100,b={height:k.height(),width:k.width()};d.extend(a.options,{fade:!0,mode:j,percent:j=="hide"?i:100,from:j=="hide"?b:{height:b.height*h,width:b.width*h}}),k.effect("scale",a.options,a.duration,a.callback),k.dequeue()})},d.effects.scale=function(a){return this.queue(function(){var q=d(this),p=d.extend(!0,{},a.options),o=d.effects.setMode(q,a.options.mode||"effect"),n=parseInt(a.options.percent,10)||(parseInt(a.options.percent,10)==0?0:o=="hide"?0:100),m=a.options.direction||"both",l=a.options.origin;o!="effect"&&(p.origin=l||["middle","center"],p.restore=!0);var k={height:q.height(),width:q.width()};q.from=a.options.from||(o=="show"?{height:0,width:0}:k);var b={y:m!="horizontal"?n/100:1,x:m!="vertical"?n/100:1};q.to={height:k.height*b.y,width:k.width*b.x},a.options.fade&&(o=="show"&&(q.from.opacity=0,q.to.opacity=1),o=="hide"&&(q.from.opacity=1,q.to.opacity=0)),p.from=q.from,p.to=q.to,p.mode=o,q.effect("size",p,a.duration,a.callback),q.dequeue()})},d.effects.size=function(a){return this.queue(function(){var C=d(this),B=["position","top","bottom","left","right","width","height","overflow","opacity"],A=["position","top","bottom","left","right","overflow","opacity"],z=["width","height","overflow"],y=["fontSize"],x=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],w=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],v=d.effects.setMode(C,a.options.mode||"effect"),u=a.options.restore||!1,t=a.options.scale||"both",s=a.options.origin,r={height:C.height(),width:C.width()};C.from=a.options.from||r,C.to=a.options.to||r;if(s){var o=d.effects.getBaseline(s,r);C.from.top=(r.height-C.from.height)*o.y,C.from.left=(r.width-C.from.width)*o.x,C.to.top=(r.height-C.to.height)*o.y,C.to.left=(r.width-C.to.width)*o.x}var b={from:{y:C.from.height/r.height,x:C.from.width/r.width},to:{y:C.to.height/r.height,x:C.to.width/r.width}};if(t=="box"||t=="both"){b.from.y!=b.to.y&&(B=B.concat(x),C.from=d.effects.setTransition(C,x,b.from.y,C.from),C.to=d.effects.setTransition(C,x,b.to.y,C.to)),b.from.x!=b.to.x&&(B=B.concat(w),C.from=d.effects.setTransition(C,w,b.from.x,C.from),C.to=d.effects.setTransition(C,w,b.to.x,C.to))}(t=="content"||t=="both")&&b.from.y!=b.to.y&&(B=B.concat(y),C.from=d.effects.setTransition(C,y,b.from.y,C.from),C.to=d.effects.setTransition(C,y,b.to.y,C.to)),d.effects.save(C,u?B:A),C.show(),d.effects.createWrapper(C),C.css("overflow","hidden").css(C.from);if(t=="content"||t=="both"){x=x.concat(["marginTop","marginBottom"]).concat(y),w=w.concat(["marginLeft","marginRight"]),z=B.concat(x).concat(w),C.find("*[width]").each(function(){var f=d(this);u&&d.effects.save(f,z);var e={height:f.height(),width:f.width()};f.from={height:e.height*b.from.y,width:e.width*b.from.x},f.to={height:e.height*b.to.y,width:e.width*b.to.x},b.from.y!=b.to.y&&(f.from=d.effects.setTransition(f,x,b.from.y,f.from),f.to=d.effects.setTransition(f,x,b.to.y,f.to)),b.from.x!=b.to.x&&(f.from=d.effects.setTransition(f,w,b.from.x,f.from),f.to=d.effects.setTransition(f,w,b.to.x,f.to)),f.css(f.from),f.animate(f.to,a.duration,a.options.easing,function(){u&&d.effects.restore(f,z)})})}C.animate(C.to,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){C.to.opacity===0&&C.css("opacity",C.from.opacity),v=="hide"&&C.hide(),d.effects.restore(C,u?B:A),d.effects.removeWrapper(C),a.callback&&a.callback.apply(this,arguments),C.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.shake=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"left",w=a.options.distance||20,v=a.options.times||3,u=a.duration||a.options.duration||140;d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",r={},q={},o={};r[t]=(s=="pos"?"-=":"+=")+w,q[t]=(s=="pos"?"+=":"-=")+w*2,o[t]=(s=="pos"?"-=":"+=")+w*2,A.animate(r,u,a.options.easing);for(var b=1;b<v;b++){A.animate(q,u,a.options.easing).animate(o,u,a.options.easing)}A.animate(q,u,a.options.easing).animate(r,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)}),A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.slide=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right"],o=d.effects.setMode(q,a.options.mode||"show"),n=a.options.direction||"left";d.effects.save(q,p),q.show(),d.effects.createWrapper(q).css({overflow:"hidden"});var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?q.outerHeight({margin:!0}):q.outerWidth({margin:!0}));o=="show"&&q.css(m,l=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,q.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(this,arguments),q.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.transfer=function(a){return this.queue(function(){var m=d(this),l=d(a.options.to),k=l.offset(),j={top:k.top,left:k.left,height:l.innerHeight(),width:l.innerWidth()},i=m.offset(),b=d('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:i.top,left:i.left,height:m.innerHeight(),width:m.innerWidth(),position:"absolute"}).animate(j,a.duration,a.options.easing,function(){b.remove(),a.callback&&a.callback.apply(m[0],arguments),m.dequeue()})})}})(jQuery);(function(){function af(b,n,m){if(b===n){return 0!==b||1/b==1/n}if(null==b||null==n){return b===n}b._chain&&(b=b._wrapped);n._chain&&(n=n._wrapped);if(b.isEqual&&at.isFunction(b.isEqual)){return b.isEqual(n)}if(n.isEqual&&at.isFunction(n.isEqual)){return n.isEqual(b)}var l=ao.call(b);if(l!=ao.call(n)){return !1}switch(l){case"[object String]":return b==""+n;case"[object Number]":return b!=+b?n!=+n:0==b?1/b==1/n:b==+n;case"[object Date]":case"[object Boolean]":return +b==+n;case"[object RegExp]":return b.source==n.source&&b.global==n.global&&b.multiline==n.multiline&&b.ignoreCase==n.ignoreCase}if("object"!=typeof b||"object"!=typeof n){return !1}for(var k=m.length;k--;){if(m[k]==b){return !0}}m.push(b);var k=0,j=!0;if("[object Array]"==l){if(k=b.length,j=k==n.length){for(;k--&&(j=k in b==k in n&&af(b[k],n[k],m));){}}}else{if("constructor" in b!="constructor" in n||b.constructor!=n.constructor){return !1}for(var i in b){if(at.has(b,i)&&(k++,!(j=at.has(n,i)&&af(b[i],n[i],m)))){break}}if(j){for(i in n){if(at.has(n,i)&&!k--){break}}j=!k}}m.pop();return j}var ae=this,U=ae._,al={},ap=Array.prototype,aj=Object.prototype,ar=ap.slice,S=ap.unshift,ao=aj.toString,Q=aj.hasOwnProperty,R=ap.forEach,h=ap.map,ak=ap.reduce,ai=ap.reduceRight,ag=ap.filter,ad=ap.every,ac=ap.some,ah=ap.indexOf,aa=ap.lastIndexOf,aj=Array.isArray,f=Object.keys,ab=Function.prototype.bind,at=function(b){return new an(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=at),exports._=at):ae._=at;at.VERSION="1.3.3";var aq=at.each=at.forEach=function(b,l,k){if(b!=null){if(R&&b.forEach===R){b.forEach(l,k)}else{if(b.length===+b.length){for(var j=0,i=b.length;j<i;j++){if(j in b&&l.call(k,b[j],j,b)===al){break}}}else{for(j in b){if(at.has(b,j)&&l.call(k,b[j],j,b)===al){break}}}}}};at.map=at.collect=function(j,l,i){var k=[];if(j==null){return k}if(h&&j.map===h){return j.map(l,i)}aq(j,function(b,n,m){k[k.length]=l.call(i,b,n,m)});if(j.length===+j.length){k.length=j.length}return k};at.reduce=at.foldl=at.inject=function(b,l,k,j){var i=arguments.length>2;b==null&&(b=[]);if(ak&&b.reduce===ak){j&&(l=at.bind(l,j));return i?b.reduce(l,k):b.reduce(l)}aq(b,function(n,m,o){if(i){k=l.call(j,k,n,m,o)}else{k=n;i=true}});if(!i){throw new TypeError("Reduce of empty array with no initial value")}return k};at.reduceRight=at.foldr=function(b,m,l,k){var j=arguments.length>2;b==null&&(b=[]);if(ai&&b.reduceRight===ai){k&&(m=at.bind(m,k));return j?b.reduceRight(m,l):b.reduceRight(m)}var i=at.toArray(b).reverse();k&&!j&&(m=at.bind(m,k));return j?at.reduce(i,m,l,k):at.reduce(i,m)};at.find=at.detect=function(j,l,i){var k;Y(j,function(b,n,m){if(l.call(i,b,n,m)){k=b;return true}});return k};at.filter=at.select=function(j,l,i){var k=[];if(j==null){return k}if(ag&&j.filter===ag){return j.filter(l,i)}aq(j,function(b,n,m){l.call(i,b,n,m)&&(k[k.length]=b)});return k};at.reject=function(j,l,i){var k=[];if(j==null){return k}aq(j,function(b,n,m){l.call(i,b,n,m)||(k[k.length]=b)});return k};at.every=at.all=function(j,l,i){var k=true;if(j==null){return k}if(ad&&j.every===ad){return j.every(l,i)}aq(j,function(b,n,m){if(!(k=k&&l.call(i,b,n,m))){return al}});return !!k};var Y=at.some=at.any=function(b,k,j){k||(k=at.identity);var i=false;if(b==null){return i}if(ac&&b.some===ac){return b.some(k,j)}aq(b,function(m,l,n){if(i||(i=k.call(j,m,l,n))){return al}});return !!i};at.include=at.contains=function(j,k){var i=false;if(j==null){return i}if(ah&&j.indexOf===ah){return j.indexOf(k)!=-1}return i=Y(j,function(b){return b===k})};at.invoke=function(b,j){var i=ar.call(arguments,2);return at.map(b,function(k){return(at.isFunction(j)?j||k:k[j]).apply(k,i)})};at.pluck=function(b,i){return at.map(b,function(j){return j[i]})};at.max=function(b,k,j){if(!k&&at.isArray(b)&&b[0]===+b[0]){return Math.max.apply(Math,b)}if(!k&&at.isEmpty(b)){return -Infinity}var i={computed:-Infinity};aq(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l>=i.computed&&(i={value:m,computed:l})});return i.value};at.min=function(b,k,j){if(!k&&at.isArray(b)&&b[0]===+b[0]){return Math.min.apply(Math,b)}if(!k&&at.isEmpty(b)){return Infinity}var i={computed:Infinity};aq(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l<i.computed&&(i={value:m,computed:l})});return i.value};at.shuffle=function(j){var i=[],k;aq(j,function(b,l){k=Math.floor(Math.random()*(l+1));i[l]=i[k];i[k]=b});return i};at.sortBy=function(b,k,j){var i=at.isFunction(k)?k:function(l){return l[k]};return at.pluck(at.map(b,function(m,l,n){return{value:m,criteria:i.call(j,m,l,n)}}).sort(function(m,l){var o=m.criteria,n=l.criteria;return o===void 0?1:n===void 0?-1:o<n?-1:o>n?1:0}),"value")};at.groupBy=function(b,k){var j={},i=at.isFunction(k)?k:function(l){return l[k]};aq(b,function(m,l){var n=i(m,l);(j[n]||(j[n]=[])).push(m)});return j};at.sortedIndex=function(b,m,l){l||(l=at.identity);for(var k=0,j=b.length;k<j;){var i=k+j>>1;l(b[i])<l(m)?k=i+1:j=i}return k};at.toArray=function(b){return !b?[]:at.isArray(b)||at.isArguments(b)?ar.call(b):b.toArray&&at.isFunction(b.toArray)?b.toArray():at.values(b)};at.size=function(b){return at.isArray(b)?b.length:at.keys(b).length};at.first=at.head=at.take=function(j,i,k){return i!=null&&!k?ar.call(j,0,i):j[0]};at.initial=function(j,i,k){return ar.call(j,0,j.length-(i==null||k?1:i))};at.last=function(j,i,k){return i!=null&&!k?ar.call(j,Math.max(j.length-i,0)):j[j.length-1]};at.rest=at.tail=function(j,i,k){return ar.call(j,i==null||k?1:i)};at.compact=function(b){return at.filter(b,function(i){return !!i})};at.flatten=function(b,i){return at.reduce(b,function(j,k){if(at.isArray(k)){return j.concat(i?k:at.flatten(k))}j[j.length]=k;return j},[])};at.without=function(b){return at.difference(b,ar.call(arguments,1))};at.uniq=at.unique=function(b,k,j){var j=j?at.map(b,j):b,i=[];b.length<3&&(k=true);at.reduce(j,function(n,m,l){if(k?at.last(n)!==m||!n.length:!at.include(n,m)){n.push(m);i.push(b[l])}return n},[]);return i};at.union=function(){return at.uniq(at.flatten(arguments,true))};at.intersection=at.intersect=function(b){var i=ar.call(arguments,1);return at.filter(at.uniq(b),function(j){return at.every(i,function(k){return at.indexOf(k,j)>=0})})};at.difference=function(b){var i=at.flatten(ar.call(arguments,1),true);return at.filter(b,function(j){return !at.include(i,j)})};at.zip=function(){for(var b=ar.call(arguments),k=at.max(at.pluck(b,"length")),j=Array(k),i=0;i<k;i++){j[i]=at.pluck(b,""+i)}return j};at.indexOf=function(b,k,j){if(b==null){return -1}var i;if(j){j=at.sortedIndex(b,k);return b[j]===k?j:-1}if(ah&&b.indexOf===ah){return b.indexOf(k)}j=0;for(i=b.length;j<i;j++){if(j in b&&b[j]===k){return j}}return -1};at.lastIndexOf=function(j,i){if(j==null){return -1}if(aa&&j.lastIndexOf===aa){return j.lastIndexOf(i)}for(var k=j.length;k--;){if(k in j&&j[k]===i){return k}}return -1};at.range=function(j,i,n){if(arguments.length<=1){i=j||0;j=0}for(var n=arguments[2]||1,m=Math.max(Math.ceil((i-j)/n),0),l=0,k=Array(m);l<m;){k[l++]=j;j=j+n}return k};var W=function(){};at.bind=function(b,k){var j,i;if(b.bind===ab&&ab){return ab.apply(b,ar.call(arguments,1))}if(!at.isFunction(b)){throw new TypeError}i=ar.call(arguments,2);return j=function(){if(!(this instanceof j)){return b.apply(k,i.concat(ar.call(arguments)))}W.prototype=b.prototype;var l=new W,m=b.apply(l,i.concat(ar.call(arguments)));return Object(m)===m?m:l}};at.bindAll=function(b){var i=ar.call(arguments,1);i.length==0&&(i=at.functions(b));aq(i,function(j){b[j]=at.bind(b[j],b)});return b};at.memoize=function(b,j){var i={};j||(j=at.identity);return function(){var k=j.apply(this,arguments);return at.has(i,k)?i[k]:i[k]=b.apply(this,arguments)}};at.delay=function(j,i){var k=ar.call(arguments,2);return setTimeout(function(){return j.apply(null,k)},i)};at.defer=function(b){return at.delay.apply(at,[b,1].concat(ar.call(arguments,1)))};at.throttle=function(r,q){var p,o,n,m,l,k,b=at.debounce(function(){l=m=false},q);return function(){p=this;o=arguments;n||(n=setTimeout(function(){n=null;l&&r.apply(p,o);b()},q));m?l=true:k=r.apply(p,o);b();m=true;return k}};at.debounce=function(j,i,l){var k;return function(){var m=this,b=arguments;l&&!k&&j.apply(m,b);clearTimeout(k);k=setTimeout(function(){k=null;l||j.apply(m,b)},i)}};at.once=function(j){var i=false,k;return function(){if(i){return k}i=true;return k=j.apply(this,arguments)}};at.wrap=function(j,i){return function(){var b=[j].concat(ar.call(arguments,0));return i.apply(this,b)}};at.compose=function(){var b=arguments;return function(){for(var i=arguments,j=b.length-1;j>=0;j--){i=[b[j].apply(this,i)]}return i[0]}};at.after=function(j,i){return j<=0?i():function(){if(--j<1){return i.apply(this,arguments)}}};at.keys=f||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var j=[],i;for(i in b){at.has(b,i)&&(j[j.length]=i)}return j};at.values=function(b){return at.map(b,at.identity)};at.functions=at.methods=function(b){var j=[],i;for(i in b){at.isFunction(b[i])&&j.push(i)}return j.sort()};at.extend=function(b){aq(ar.call(arguments,1),function(i){for(var j in i){b[j]=i[j]}});return b};at.pick=function(b){var i={};aq(at.flatten(ar.call(arguments,1)),function(j){j in b&&(i[j]=b[j])});return i};at.defaults=function(b){aq(ar.call(arguments,1),function(i){for(var j in i){b[j]==null&&(b[j]=i[j])}});return b};at.clone=function(b){return !at.isObject(b)?b:at.isArray(b)?b.slice():at.extend({},b)};at.tap=function(j,i){i(j);return j};at.isEqual=function(j,i){return af(j,i,[])};at.isEmpty=function(b){if(b==null){return true}if(at.isArray(b)||at.isString(b)){return b.length===0}for(var i in b){if(at.has(b,i)){return false}}return true};at.isElement=function(b){return !!(b&&b.nodeType==1)};at.isArray=aj||function(b){return ao.call(b)=="[object Array]"};at.isObject=function(b){return b===Object(b)};at.isArguments=function(b){return ao.call(b)=="[object Arguments]"};at.isArguments(arguments)||(at.isArguments=function(b){return !(!b||!at.has(b,"callee"))});at.isFunction=function(b){return ao.call(b)=="[object Function]"};at.isString=function(b){return ao.call(b)=="[object String]"};at.isNumber=function(b){return ao.call(b)=="[object Number]"};at.isFinite=function(b){return at.isNumber(b)&&isFinite(b)};at.isNaN=function(b){return b!==b};at.isBoolean=function(b){return b===true||b===false||ao.call(b)=="[object Boolean]"};at.isDate=function(b){return ao.call(b)=="[object Date]"};at.isRegExp=function(b){return ao.call(b)=="[object RegExp]"};at.isNull=function(b){return b===null};at.isUndefined=function(b){return b===void 0};at.has=function(j,i){return Q.call(j,i)};at.noConflict=function(){ae._=U;return this};at.identity=function(b){return b};at.times=function(j,i,l){for(var k=0;k<j;k++){i.call(l,k)}};at.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};at.result=function(b,j){if(b==null){return null}var i=b[j];return at.isFunction(i)?i.call(b):i};at.mixin=function(b){aq(at.functions(b),function(i){e(i,at[i]=b[i])})};var d=0;at.uniqueId=function(j){var i=d++;return j?j+i:i};at.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Z=/.^/,am={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},X;for(X in am){am[am[X]]=X}var c=/\\|'|\r|\n|\t|\u2028|\u2029/g,a=/\\(\\|'|r|n|t|u2028|u2029)/g,V=function(b){return b.replace(a,function(j,i){return am[i]})};at.template=function(b,k,j){j=at.defaults(j||{},at.templateSettings);b="__p+='"+b.replace(c,function(l){return"\\"+am[l]}).replace(j.escape||Z,function(m,l){return"'+\n_.escape("+V(l)+")+\n'"}).replace(j.interpolate||Z,function(m,l){return"'+\n("+V(l)+")+\n'"}).replace(j.evaluate||Z,function(m,l){return"';\n"+V(l)+"\n;__p+='"})+"';\n";j.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",i=new Function(j.variable||"obj","_",b);if(k){return i(k,at)}k=function(l){return i.call(this,l,at)};k.source="function("+(j.variable||"obj")+"){\n"+b+"}";return k};at.chain=function(b){return at(b).chain()};var an=function(b){this._wrapped=b};at.prototype=an.prototype;var T=function(b,i){return i?at(b).chain():b},e=function(b,i){an.prototype[b]=function(){var j=ar.call(arguments);S.call(j,this._wrapped);return T(i.apply(at,j),this._chain)}};at.mixin(at);aq("pop,push,reverse,shift,sort,splice,unshift".split(","),function(j){var i=ap[j];an.prototype[j]=function(){var k=this._wrapped;i.apply(k,arguments);var b=k.length;(j=="shift"||j=="splice")&&b===0&&delete k[0];return T(k,this._chain)}});aq(["concat","join","slice"],function(j){var i=ap[j];an.prototype[j]=function(){return T(i.apply(this._wrapped,arguments),this._chain)}});an.prototype.chain=function(){this._chain=true;return this};an.prototype.value=function(){return this._wrapped}}).call(this);((function(){var b;b=function(){function c(){this.options_index=0,this.parsed=[]}return c.prototype.add_node=function(d){return d.nodeName==="OPTGROUP"?this.add_group(d):this.add_option(d)},c.prototype.add_group=function(i){var h,n,m,l,k,j;h=this.parsed.length,this.parsed.push({array_index:h,group:!0,label:i.label,children:0,disabled:i.disabled}),k=i.childNodes,j=[];for(m=0,l=k.length;m<l;m++){n=k[m],j.push(this.add_option(n,h,i.disabled))}return j},c.prototype.add_option=function(e,d,f){if(e.nodeName==="OPTION"){return e.text!==""?(d!=null&&(this.parsed[d].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:f===!0?f:e.disabled,group_array_index:d,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1}},c}(),b.select_to_array=function(a){var l,k,j,i,h;k=new b,h=a.childNodes;for(j=0,i=h.length;j<i;j++){l=h[j],k.add_node(l)}return k.parsed},this.SelectParser=b})).call(this),function(){var d,c;c=this,d=function(){function b(f,e){this.form_field=f,this.options=e!=null?e:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return b.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(a){return e.test_active_click(a)},this.activate_action=function(a){return e.activate_field(a)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},b.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},b.prototype.mouse_enter=function(){return this.mouse_on_container=!0},b.prototype.mouse_leave=function(){return this.mouse_on_container=!1},b.prototype.input_focus=function(f){var e=this;if(!this.active_field){return setTimeout(function(){return e.container_mousedown()},50)}},b.prototype.input_blur=function(f){var e=this;if(!this.mouse_on_container){return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)}},b.prototype.result_add_option=function(f){var e,h;return f.disabled?"":(f.dom_id=this.container_id+"_o_"+f.array_index,e=f.selected&&this.is_multiple?[]:["active-result"],f.selected&&e.push("result-selected"),f.group_array_index!=null&&e.push("group-option"),f.classes!==""&&e.push(f.classes),h=f.style.cssText!==""?' style="'+f.style+'"':"",'<li id="'+f.dom_id+'" class="'+e.join(" ")+'"'+h+">"+f.html+"</li>")},b.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},b.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},b.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},b.prototype.keyup_checker=function(f){var e,h;e=(h=f.which)!=null?h:f.keyCode,this.search_field_scale();switch(e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0){return this.keydown_backstroke()}if(!this.pending_backstroke){return this.result_clear_highlight(),this.results_search()}break;case 13:f.preventDefault();if(this.results_showing){return this.result_select(f)}break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},b.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},b.prototype.generate_random_char=function(){var f,e,h;return f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",h=Math.floor(Math.random()*f.length),e=f.substring(h,h+1)},b}(),c.AbstractChosen=d}.call(this),function(){var i,h,m,l,k=Object.prototype.hasOwnProperty,j=function(f,e){function n(){this.constructor=f}for(var o in e){k.call(e,o)&&(f[o]=e[o])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};l=this,i=jQuery,i.fn.extend({chosen:function(a){return !i.browser.msie||i.browser.version!=="6.0"&&i.browser.version!=="7.0"?this.each(function(c){var b;b=i(this);if(!b.hasClass("chzn-done")){return b.data("chosen",new h(this,a))}}):this}}),h=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return j(c,a),c.prototype.setup=function(){return this.form_field_jq=i(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},c.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},c.prototype.set_up_html=function(){var n,q,p,o;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),n=i("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):n.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(n),this.container=i("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),q=this.container.height(),p=this.f_width-m(this.dropdown),this.dropdown.css({width:p+"px",top:q+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),o=p-m(this.search_container)-m(this.search_field),this.search_field.css({width:o+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},c.prototype.register_observers=function(){var b=this;return this.container.mousedown(function(d){return b.container_mousedown(d)}),this.container.mouseup(function(d){return b.container_mouseup(d)}),this.container.mouseenter(function(d){return b.mouse_enter(d)}),this.container.mouseleave(function(d){return b.mouse_leave(d)}),this.search_results.mouseup(function(d){return b.search_results_mouseup(d)}),this.search_results.mouseover(function(d){return b.search_results_mouseover(d)}),this.search_results.mouseout(function(d){return b.search_results_mouseout(d)}),this.form_field_jq.bind("liszt:updated",function(d){return b.results_update_field(d)}),this.search_field.blur(function(d){return b.input_blur(d)}),this.search_field.keyup(function(d){return b.keyup_checker(d)}),this.search_field.keydown(function(d){return b.keydown_checker(d)}),this.is_multiple?(this.search_choices.click(function(d){return b.choices_click(d)}),this.search_field.focus(function(d){return b.input_focus(d)})):this.container.click(function(d){return d.preventDefault()})},c.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()}this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple){return this.selected_item.bind("focus",this.activate_action)}},c.prototype.container_mousedown=function(d){var e;if(!this.is_disabled){return e=d!=null?i(d.target).hasClass("search-choice-close"):!1,d&&d.type==="mousedown"&&!this.results_showing&&d.stopPropagation(),!this.pending_destroy_click&&!e?(this.active_field?!this.is_multiple&&d&&(i(d.target)[0]===this.selected_item[0]||i(d.target).parents("a.chzn-single").length)&&(d.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),i(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1}},c.prototype.container_mouseup=function(b){if(b.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(b)}},c.prototype.blur_test=function(b){if(!this.active_field&&this.container.hasClass("chzn-container-active")){return this.close_field()}},c.prototype.close_field=function(){return i(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return !this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(d){return i(d.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){var n,d,q,p,o;this.parsing=!0,this.results_data=l.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),n="",o=this.results_data;for(q=0,p=o.length;q<p;q++){d=o[q],d.group?n+=this.result_add_group(d):d.empty||(n+=this.result_add_option(d),d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()))}return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(n),this.parsing=!1},c.prototype.result_add_group=function(d){return d.disabled?"":(d.dom_id=this.container_id+"_g_"+d.array_index,'<li id="'+d.dom_id+'" class="group-result">'+i("<div />").text(d.label).html()+"</li>")},c.prototype.result_do_highlight=function(o){var n,s,r,q,p;if(o.length){this.result_clear_highlight(),this.result_highlight=o,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),p=this.search_results.scrollTop(),q=r+p,s=this.result_highlight.position().top+this.search_results.scrollTop(),n=s+this.result_highlight.outerHeight();if(n>=q){return this.search_results.scrollTop(n-r>0?n-r:0)}if(s<p){return this.search_results.scrollTop(s)}}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){var b;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)}else{if(this.max_selected_options<=this.choices){return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}}return b=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:b+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},c.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},c.prototype.set_tab_index=function(e){var d;if(this.form_field_jq.attr("tabindex")){return d=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",d):(this.selected_item.attr("tabindex",d),this.search_field.attr("tabindex",-1))}},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(d){var e;e=i(d.target).hasClass("active-result")?i(d.target):i(d.target).parents(".active-result").first();if(e.length){return this.result_highlight=e,this.result_select(d)}},c.prototype.search_results_mouseover=function(d){var e;e=i(d.target).hasClass("active-result")?i(d.target):i(d.target).parents(".active-result").first();if(e){return this.result_do_highlight(e)}},c.prototype.search_results_mouseout=function(d){if(i(d.target).hasClass("active-result")){return this.result_clear_highlight()}},c.prototype.choices_click=function(d){d.preventDefault();if(this.active_field&&!i(d.target).hasClass("search-choice")&&!this.results_showing){return this.results_show()}},c.prototype.choice_build=function(f){var p,o,n=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(p=this.container_id+"_c_"+f.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+p+'"><span>'+f.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+f.array_index+'"></a></li>'),o=i("#"+p).find("a").first(),o.click(function(b){return n.choice_destroy_link_click(b)}))},c.prototype.choice_destroy_link_click=function(d){return d.preventDefault(),this.is_disabled?d.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(i(d.target)))},c.prototype.choice_destroy=function(b){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(b.attr("rel")),b.parents("li").first().remove()},c.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}},c.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},c.prototype.result_select=function(n){var f,q,p,o;if(this.result_highlight){return f=this.result_highlight,q=f.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(f):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=f,this.selected_item.removeClass("chzn-default")),f.addClass("result-selected"),o=q.substr(q.lastIndexOf("_")+1),p=this.results_data[o],p.selected=!0,this.form_field.options[p.options_index].selected=!0,this.is_multiple?this.choice_build(p):(this.selected_item.find("span").first().text(p.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!n.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[p.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()}},c.prototype.result_activate=function(b){return b.addClass("active-result")},c.prototype.result_deactivate=function(b){return b.removeClass("active-result")},c.prototype.result_deselect=function(e){var n,f;return f=this.results_data[e],f.selected=!1,this.form_field.options[f.options_index].selected=!1,n=i("#"+this.container_id+"_o_"+e),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[f.options_index].value}),this.search_field_scale()},c.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1){return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}},c.prototype.winnow_results=function(){var K,J,I,H,G,F,E,D,C,B,A,z,y,x,w,v,u,t;this.no_results_clear(),C=0,B=this.search_field.val()===this.default_text?"":i("<div/>").text(i.trim(this.search_field.val())).html(),F=this.search_contains?"":"^",G=new RegExp(F+B.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=new RegExp(B.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),t=this.results_data;for(x=0,v=t.length;x<v;x++){J=t[x];if(!J.disabled&&!J.empty){if(J.group){i("#"+J.dom_id).css("display","none")}else{if(!this.is_multiple||!J.selected){K=!1,D=J.dom_id,E=i("#"+D);if(G.test(J.html)){K=!0,C+=1}else{if(J.html.indexOf(" ")>=0||J.html.indexOf("[")===0){H=J.html.replace(/\[|\]/g,"").split(" ");if(H.length){for(w=0,u=H.length;w<u;w++){I=H[w],G.test(I)&&(K=!0,C+=1)}}}}K?(B.length?(A=J.html.search(y),z=J.html.substr(0,A+B.length)+"</em>"+J.html.substr(A+B.length),z=z.substr(0,A)+"<em>"+z.substr(A)):z=J.html,E.html(z),this.result_activate(E),J.group_array_index!=null&&i("#"+this.results_data[J.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&D===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(E))}}}}return C<1&&B.length?this.no_results(B):this.winnow_results_set_highlight()},c.prototype.winnow_results_clear=function(){var n,r,q,p,o;this.search_field.val(""),r=this.search_results.find("li"),o=[];for(q=0,p=r.length;q<p;q++){n=r[q],n=i(n),n.hasClass("group-result")?o.push(n.css("display","auto")):!this.is_multiple||!n.hasClass("result-selected")?o.push(this.result_activate(n)):o.push(void 0)}return o},c.prototype.winnow_results_set_highlight=function(){var e,d;if(!this.result_highlight){d=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=d.length?d.first():this.search_results.find(".active-result").first();if(e!=null){return this.result_do_highlight(e)}}},c.prototype.no_results=function(d){var e;return e=i('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),e.find("span").first().html(d),this.search_results.append(e)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var d,e;this.result_highlight?this.results_showing&&(e=this.result_highlight.nextAll("li.active-result").first(),e&&this.result_do_highlight(e)):(d=this.search_results.find("li.active-result").first(),d&&this.result_do_highlight(i(d)));if(!this.results_showing){return this.results_show()}},c.prototype.keyup_arrow=function(){var b;if(!this.results_showing&&!this.is_multiple){return this.results_show()}if(this.result_highlight){return b=this.result_highlight.prevAll("li.active-result"),b.length?this.result_do_highlight(b.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())}},c.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(e){var d,f;d=(f=e.which)!=null?f:e.keyCode,this.search_field_scale(),d!==8&&this.pending_backstroke&&this.clear_backstroke();switch(d){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},c.prototype.search_field_scale=function(){var v,u,t,s,r,q,p,o,n;if(this.is_multiple){t=0,p=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",q=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(o=0,n=q.length;o<n;o++){s=q[o],r+=s+":"+this.search_field.css(s)+";"}return u=i("<div />",{style:r}),u.text(this.search_field.val()),i("body").append(u),p=u.width()+25,u.remove(),p>this.f_width-10&&(p=this.f_width-10),this.search_field.css({width:p+"px"}),v=this.container.height(),this.dropdown.css({top:v+"px"})}},c.prototype.generate_random_id=function(){var d;d="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(i("#"+d).length>0){d+=this.generate_random_char()}return d},c}(AbstractChosen),m=function(d){var c;return c=d.outerWidth()-d.width()},l.get_side_border_padding=m}.call(this);var CodeMirror=(function(){function O(aO,c4){var bz={},by=O.defaults;for(var aH in by){if(by.hasOwnProperty(aH)){bz[aH]=(c4&&c4.hasOwnProperty(aH)?c4:by)[aH]}}var aL=document.createElement("div");aL.className="CodeMirror"+(bz.lineWrapping?" CodeMirror-wrap":"");aL.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scrollbar"><div class="CodeMirror-scrollbar-inner"></div></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><pre class="CodeMirror-cursor" style="visibility: hidden">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';if(aO.appendChild){aO.appendChild(aL)}else{aO(aL)}var ci=aL.firstChild,bC=ci.firstChild,cl=aL.lastChild,b6=cl.firstChild,cF=b6.firstChild,c7=cF.firstChild,cJ=c7.firstChild,b8=c7.nextSibling.firstChild,ay=b8.firstChild,cr=ay.nextSibling,bq=cr.nextSibling,cn=bq.nextSibling,at=cn.nextSibling,aP=ci.nextSibling,be=aP.firstChild;cV();a5();if(K){bC.style.width="0px"}if(!ah){cl.draggable=true}b8.style.outline="none";if(bz.tabindex!=null){bC.tabIndex=bz.tabindex}if(bz.autofocus){b1()}if(!bz.gutter&&!bz.lineNumbers){c7.style.display="none"}if(w){ci.style.height="1px",ci.style.position="absolute"}if(ag){aP.className+=(bO()?" cm-sb-overlap":" cm-sb-nonoverlap")}else{if(F){aP.className+=" cm-sb-ie7"}}try{a6("x")}catch(cy){if(cy.message.match(/runtime/i)){cy=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")}throw cy}var cx=new M(),df=new M(),aM;var cA,cS=new q([new b([new j("")])]),cE,bh;cf();var dg={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var bi,bJ,bc,b4=0,cq=0,cs,ba=false,cN=false;var a9,bo,aJ,aR,aV,bu,a0,a1;var cp=0,c9=0,bN=0,b7=0;var cu;var bW="",aY=false,ce=true;var ax={};au(function(){a8(bz.value||"");a9=false})();var br=new ad();G(cl,"mousedown",au(cG));G(cl,"dblclick",au(bB));G(b8,"selectstart",s);if(!Z){G(cl,"contextmenu",bg)}G(cl,"scroll",b5);G(aP,"scroll",b5);G(aP,"mousedown",function(){setTimeout(b1,0)});G(cl,"mousewheel",aC);G(cl,"DOMMouseScroll",aC);G(window,"resize",function(){cC(true)});G(bC,"keyup",au(bd));G(bC,"input",aX);G(bC,"keydown",au(cB));G(bC,"keypress",au(cg));G(bC,"focus",aG);G(bC,"blur",c8);if(bz.dragDrop){G(cl,"dragstart",c6);function bU(dh){if(bz.onDragEvent&&bz.onDragEvent(cz,v(dh))){return}Q(dh)}G(cl,"dragenter",bU);G(cl,"dragover",bU);G(cl,"drop",au(aA))}G(cl,"paste",function(){b1();aX()});G(bC,"paste",aX);G(bC,"cut",au(function(){if(!bz.readOnly){bK("")}}));if(w){G(b6,"mouseup",function(){if(document.activeElement==bC){bC.blur()}b1()})}var cQ;try{cQ=(document.activeElement==bC)}catch(cy){}if(cQ||bz.autofocus){setTimeout(aG,20)}else{c8()}function cc(dh){return dh>=0&&dh<cS.size}var cz=aL.CodeMirror={getValue:cm,setValue:au(a8),getSelection:bw,replaceSelection:au(bK),focus:function(){window.focus();b1();aG();aX()},setOption:function(dh,dj){var di=bz[dh];bz[dh]=dj;if(dh=="mode"||dh=="indentUnit"){cf()}else{if(dh=="readOnly"&&dj=="nocursor"){c8();bC.blur()}else{if(dh=="readOnly"&&!dj){aZ(true)}else{if(dh=="theme"){cV()}else{if(dh=="lineWrapping"&&di!=dj){au(cX)()}else{if(dh=="tabSize"){cC(true)}else{if(dh=="keyMap"){a5()}}}}}}}if(dh=="lineNumbers"||dh=="gutter"||dh=="firstLineNumber"||dh=="theme"){co();cC(true)}},getOption:function(dh){return bz[dh]},undo:au(dc),redo:au(c0),indentLine:au(function(di,dh){if(typeof dh!="string"){if(dh==null){dh=bz.smartIndent?"smart":"prev"}else{dh=dh?"add":"subtract"}}if(cc(di)){bQ(di,dh)}}),indentSelection:au(cU),historySize:function(){return{undo:br.done.length,redo:br.undone.length}},clearHistory:function(){br=new ad()},matchBrackets:au(function(){bl(true)}),getTokenAt:au(function(dh){dh=a2(dh);return aW(dh.line).getTokenAt(cA,cO(dh.line),dh.ch)}),getStateAfter:function(dh){dh=ch(dh==null?cS.size-1:dh);return cO(dh+1)},cursorCoords:function(di,dh){if(di==null){di=dg.inverted}return this.charCoords(di?dg.from:dg.to,dh)},charCoords:function(di,dh){di=a2(di);if(dh=="local"){return da(di,false)}if(dh=="div"){return da(di,true)}return ar(di)},coordsChar:function(dh){var di=am(b8);return bX(dh.x-di.left,dh.y-di.top)},markText:au(bV),setBookmark:cP,findMarksAt:bF,setMarker:au(bE),clearMarker:au(aq),setLineClass:au(ck),hideLine:au(function(dh){return aT(dh,true)}),showLine:au(function(dh){return aT(dh,false)}),onDeleteLine:function(dh,di){if(typeof dh=="number"){if(!cc(dh)){return null}dh=aW(dh)}(dh.handlers||(dh.handlers=[])).push(di);return dh},lineInfo:a7,addWidget:function(dm,dh,dp,dj,dq){dm=da(a2(dm));var dl=dm.yBot,di=dm.x;dh.style.position="absolute";b6.appendChild(dh);if(dj=="over"){dl=dm.y}else{if(dj=="near"){var dk=Math.max(cl.offsetHeight,cS.height*b9()),dn=Math.max(b6.clientWidth,b8.clientWidth)-cw();if(dm.yBot+dh.offsetHeight>dk&&dm.y>dh.offsetHeight){dl=dm.y-dh.offsetHeight}if(di+dh.offsetWidth>dn){di=dn-dh.offsetWidth}}}dh.style.top=(dl+cM())+"px";dh.style.left=dh.style.right="";if(dq=="right"){di=b6.clientWidth-dh.offsetWidth;dh.style.right="0px"}else{if(dq=="left"){di=0}else{if(dq=="middle"){di=(b6.clientWidth-dh.offsetWidth)/2}}dh.style.left=(di+cw())+"px"}if(dp){aI(di,dl,di+dh.offsetWidth,dl+dh.offsetHeight)}},lineCount:function(){return cS.size},clipPos:a2,getCursor:function(dh){if(dh==null){dh=dg.inverted}return ai(dh?dg.from:dg.to)},somethingSelected:function(){return !ak(dg.from,dg.to)},setCursor:au(function(dh,dj,di){if(dj==null&&typeof dh.line=="number"){bp(dh.line,dh.ch,di)}else{bp(dh,dj,di)}}),setSelection:au(function(dj,di,dh){(dh?b2:b3)(a2(dj),a2(di||dj))}),getLine:function(dh){if(cc(dh)){return aW(dh).text}},getLineHandle:function(dh){if(cc(dh)){return aW(dh)}},setLine:au(function(dh,di){if(cc(dh)){cb(di,{line:dh,ch:0},{line:dh,ch:aW(dh).text.length})}}),removeLine:au(function(dh){if(cc(dh)){cb("",{line:dh,ch:0},a2({line:dh+1,ch:0}))}}),replaceRange:au(cb),getRange:function(di,dh){return c3(a2(di),a2(dh))},triggerOnKeyDown:au(cB),execCommand:function(dh){return y[dh](cz)},moveH:au(cW),deleteH:au(cH),moveV:au(cR),toggleOverwrite:function(){if(ba){ba=false;cr.className=cr.className.replace(" CodeMirror-overwrite","")}else{ba=true;cr.className+=" CodeMirror-overwrite"}},posFromIndex:function(dj){var di=0,dh;cS.iter(0,cS.size,function(dk){var dl=dk.text.length+1;if(dl>dj){dh=dj;return true}dj-=dl;++di});return a2({line:di,ch:dh})},indexFromPos:function(dh){if(dh.line<0||dh.ch<0){return 0}var di=dh.ch;cS.iter(0,dh.line,function(dj){di+=dj.text.length+1});return di},scrollTo:function(dh,di){if(dh!=null){cl.scrollLeft=dh}if(di!=null){aP.scrollTop=di}cC([])},getScrollInfo:function(){return{x:cl.scrollLeft,y:aP.scrollTop,height:aP.scrollHeight,width:cl.scrollWidth}},operation:function(dh){return au(dh)()},compoundChange:function(dh){return bL(dh)},refresh:function(){cC(true);if(aP.scrollHeight>b4){aP.scrollTop=b4}},getInputField:function(){return bC},getWrapperElement:function(){return aL},getScrollerElement:function(){return cl},getGutterElement:function(){return c7}};function aW(dh){return S(cS,dh)}function cD(dh,di){a0=true;var dj=di-dh.height;for(var dk=dh;dk;dk=dk.parent){dk.height+=dj}}function a8(dh){var di={line:0,ch:0};cZ(di,{line:cS.size-1,ch:aW(cS.size-1).text.length},J(dh),di,di);a9=true}function cm(){var dh=[];cS.iter(0,cS.size,function(di){dh.push(di.text)});return dh.join("\n")}function b5(dh){if(b4!=aP.scrollTop||cq!=cl.scrollLeft){b4=aP.scrollTop;cq=cl.scrollLeft;cC([]);if(bz.fixedGutter){c7.style.left=cl.scrollLeft+"px"}if(bz.onScroll){bz.onScroll(cz)}}}function cG(ds){bm(N(ds,"shiftKey"));for(var dn=p(ds);dn!=aL;dn=dn.parentNode){if(dn.parentNode==b6&&dn!=cF){return}}for(var dn=p(ds);dn!=aL;dn=dn.parentNode){if(dn.parentNode==cJ){if(bz.onGutterClick){bz.onGutterClick(cz,E(cJ.childNodes,dn)+c9,ds)}return s(ds)}}var dj=bj(ds);switch(R(ds)){case 3:if(Z&&!Y){bg(ds)}return;case 2:if(dj){bp(dj.line,dj.ch,true)}setTimeout(b1,20);s(ds);return}if(!dj){if(p(ds)==cl){s(ds)}return}if(!bh){aG()}var di=+new Date;if(bc&&bc.time>di-400&&ak(bc.pos,dj)){s(ds);setTimeout(b1,20);return c5(dj.line)}else{if(bJ&&bJ.time>di-400&&ak(bJ.pos,dj)){bc={time:di,pos:dj};s(ds);return bS(dj)}else{bJ={time:di,pos:dj}}}var dt=dj,dk;if(bz.dragDrop&&U&&!bz.readOnly&&!ak(dg.from,dg.to)&&!k(dj,dg.from)&&!k(dg.to,dj)){if(ah){cl.draggable=true}function dm(du){if(ah){cl.draggable=false}cs=false;dr();dl();if(Math.abs(ds.clientX-du.clientX)+Math.abs(ds.clientY-du.clientY)<10){s(du);bp(dj.line,dj.ch,true);b1()}}var dr=G(document,"mouseup",au(dm),true);var dl=G(cl,"drop",au(dm),true);cs=true;if(cl.dragDrop){cl.dragDrop()}return}s(ds);bp(dj.line,dj.ch,true);function dh(du){var dw=bj(du,true);if(dw&&!ak(dw,dt)){if(!bh){aG()}dt=dw;b2(dj,dw);a9=false;var dv=bZ();if(dw.line>=dv.to||dw.line<dv.from){dk=setTimeout(au(function(){dh(du)}),150)}}}function dq(du){clearTimeout(dk);var dv=bj(du);if(dv){b2(dj,dv)}s(du);b1();a9=true;dp();dr()}var dp=G(document,"mousemove",au(function(du){clearTimeout(dk);s(du);if(!W&&!R(du)){dq(du)}else{dh(du)}}),true);var dr=G(document,"mouseup",au(dq),true)}function bB(dh){for(var dj=p(dh);dj!=aL;dj=dj.parentNode){if(dj.parentNode==cJ){return s(dh)}}var di=bj(dh);if(!di){return}bc={time:+new Date,pos:di};s(dh);bS(di)}function aA(dl){if(bz.onDragEvent&&bz.onDragEvent(cz,v(dl))){return}dl.preventDefault();var dp=bj(dl,true),di=dl.dataTransfer.files;if(!dp||bz.readOnly){return}if(di&&di.length&&window.FileReader&&window.File){function dk(dr,dq){var ds=new FileReader;ds.onload=function(){dm[dq]=ds.result;if(++dj==dn){dp=a2(dp);au(function(){var dt=cb(dm.join(""),dp,dp);b2(dp,dt)})()}};ds.readAsText(dr)}var dn=di.length,dm=Array(dn),dj=0;for(var dh=0;dh<dn;++dh){dk(di[dh],dh)}}else{if(cs&&!(k(dp,dg.from)||k(dg.to,dp))){return}try{var dm=dl.dataTransfer.getData("Text");if(dm){bL(function(){var dr=dg.from,dq=dg.to;b2(dp,dp);if(cs){cb("",dr,dq)}bK(dm);b1()})}}catch(dl){}}}function c6(dj){var dh=bw();dj.dataTransfer.setData("Text",dh);if(Z||c||X){var di=document.createElement("img");di.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=";dj.dataTransfer.setDragImage(di,0,0)}}function bx(di,dj){if(typeof di=="string"){di=y[di];if(!di){return false}}var dh=bi;try{if(bz.readOnly){cN=true}if(dj){bi=null}di(cz)}catch(dk){if(dk!=aj){throw dk}return false}finally{bi=dh;cN=false}return true}function c1(dm){var dh=f(bz.keyMap),dk=dh.auto;clearTimeout(bT);if(dk&&!ab(dm)){bT=setTimeout(function(){if(f(bz.keyMap)==dh){bz.keyMap=(dk.call?dk.call(null,cz):dk)}},50)}var di=ac[N(dm,"keyCode")],dl=false;if(di==null||dm.altGraphKey){return false}if(N(dm,"altKey")){di="Alt-"+di}if(N(dm,"ctrlKey")){di="Ctrl-"+di}if(N(dm,"metaKey")){di="Cmd-"+di}var dn=false;function dj(){dn=true}if(N(dm,"shiftKey")){dl=u("Shift-"+di,bz.extraKeys,bz.keyMap,function(dp){return bx(dp,true)},dj)||u(di,bz.extraKeys,bz.keyMap,function(dp){if(typeof dp=="string"&&/^go[A-Z]/.test(dp)){return bx(dp)}},dj)}else{dl=u(di,bz.extraKeys,bz.keyMap,bx,dj)}if(dn){dl=false}if(dl){s(dm);aQ();if(W){dm.oldKeyCode=dm.keyCode;dm.keyCode=0}}return dl}function bA(dj,dh){var di=u("'"+dh+"'",bz.extraKeys,bz.keyMap,function(dk){return bx(dk,true)});if(di){s(dj);aQ()}return di}var aU=null,bT;function cB(dj){if(!bh){aG()}if(W&&dj.keyCode==27){dj.returnValue=false}if(ca){if(bR()){ca=false}}if(bz.onKeyEvent&&bz.onKeyEvent(cz,v(dj))){return}var dh=N(dj,"keyCode");bm(dh==16||N(dj,"shiftKey"));var di=c1(dj);if(X){aU=di?dh:null;if(!di&&dh==88&&N(dj,Y?"metaKey":"ctrlKey")){bK("")}}}function cg(dj){if(ca){bR()}if(bz.onKeyEvent&&bz.onKeyEvent(cz,v(dj))){return}var dk=N(dj,"keyCode"),dh=N(dj,"charCode");if(X&&dk==aU){aU=null;s(dj);return}if(((X&&(!dj.which||dj.which<10))||w)&&c1(dj)){return}var di=String.fromCharCode(dh==null?dk:dh);if(bz.electricChars&&cA.electricChars&&bz.smartIndent&&!bz.readOnly){if(cA.electricChars.indexOf(di)>-1){setTimeout(au(function(){bQ(dg.to.line,"smart")}),75)}}if(bA(dj,di)){return}aX()}function bd(dh){if(bz.onKeyEvent&&bz.onKeyEvent(cz,v(dh))){return}if(N(dh,"keyCode")==16){bi=null}}function aG(){if(bz.readOnly=="nocursor"){return}if(!bh){if(bz.onFocus){bz.onFocus(cz)}bh=true;if(cl.className.search(/\bCodeMirror-focused\b/)==-1){cl.className+=" CodeMirror-focused"}if(!bu){aZ(true)}}az();aQ()}function c8(){if(bh){if(bz.onBlur){bz.onBlur(cz)}bh=false;if(cu){au(function(){if(cu){cu();cu=null}})()}cl.className=cl.className.replace(" CodeMirror-focused","")}clearInterval(aM);setTimeout(function(){if(!bh){bi=null}},150)}function dd(dh){if(dh>0&&dh<1){return 1}else{if(dh>-1&&dh<0){return -1}else{return Math.round(dh)}}}function aC(dk){var di=0,dj=0;if(dk.type=="DOMMouseScroll"){var dl=-dk.detail*8;if(dk.axis==dk.HORIZONTAL_AXIS){di=dl}else{if(dk.axis==dk.VERTICAL_AXIS){dj=dl}}}else{if(dk.wheelDeltaX!==undefined&&dk.wheelDeltaY!==undefined){di=dk.wheelDeltaX/3;dj=dk.wheelDeltaY/3}else{if(dk.wheelDelta!==undefined){dj=dk.wheelDelta/3}}}var dh=false;di=dd(di);dj=dd(dj);if((di>0&&cl.scrollLeft>0)||(di<0&&cl.scrollLeft+cl.clientWidth<cl.scrollWidth)){cl.scrollLeft-=di;dh=true}if((dj>0&&aP.scrollTop>0)||(dj<0&&aP.scrollTop+aP.clientHeight<aP.scrollHeight)){aP.scrollTop-=dj;dh=true}if(dh){Q(dk)}}function cZ(dm,dl,dk,di,dh){if(cN){return}if(br){var dj=[];cS.iter(dm.line,dl.line+1,function(dn){dj.push(dn.text)});br.addChange(dm.line,dk.length,dj);while(br.done.length>bz.undoDepth){br.done.shift()}}aw(dm,dl,dk,di,dh)}function bn(dp,dn){if(!dp.length){return}var dm=dp.pop(),di=[];for(var dj=dm.length-1;dj>=0;dj-=1){var dq=dm[dj];var dl=[],dh=dq.start+dq.added;cS.iter(dq.start,dh,function(dr){dl.push(dr.text)});di.push({start:dq.start,added:dq.old.length,old:dl});var dk={line:dq.start+dq.old.length-1,ch:o(dl[dl.length-1],dq.old[dq.old.length-1])};aw({line:dq.start,ch:0},{line:dh-1,ch:aW(dh-1).text.length},dq.old,dk,dk)}a9=true;dn.push(di)}function dc(){bn(br.done,br.undone)}function c0(){bn(br.undone,br.done)}function aw(dw,dj,dC,dh,dD){if(cN){return}var du=false,dr=bW.length;if(!bz.lineWrapping){cS.iter(dw.line,dj.line+1,function(dF){if(!dF.hidden&&dF.text.length==dr){du=true;return true}})}if(dw.line!=dj.line||dC.length>1){a0=true}var dE=dj.line-dw.line,dt=aW(dw.line),ds=aW(dj.line);if(dw.ch==0&&dj.ch==0&&dC[dC.length-1]==""){var dp=[],dk=null;if(dw.line){dk=aW(dw.line-1);dk.fixMarkEnds(ds)}else{ds.fixMarkStarts()}for(var dy=0,dB=dC.length-1;dy<dB;++dy){dp.push(j.inheritMarks(dC[dy],dk))}if(dE){cS.remove(dw.line,dE,a1)}if(dp.length){cS.insert(dw.line,dp)}}else{if(dt==ds){if(dC.length==1){dt.replace(dw.ch,dj.ch,dC[0])}else{ds=dt.split(dj.ch,dC[dC.length-1]);dt.replace(dw.ch,null,dC[0]);dt.fixMarkEnds(ds);var dp=[];for(var dy=1,dB=dC.length-1;dy<dB;++dy){dp.push(j.inheritMarks(dC[dy],dt))}dp.push(ds);cS.insert(dw.line+1,dp)}}else{if(dC.length==1){dt.replace(dw.ch,null,dC[0]);ds.replace(null,dj.ch,"");dt.append(ds);cS.remove(dw.line+1,dE,a1)}else{var dp=[];dt.replace(dw.ch,null,dC[0]);ds.replace(null,dj.ch,dC[dC.length-1]);dt.fixMarkEnds(ds);for(var dy=1,dB=dC.length-1;dy<dB;++dy){dp.push(j.inheritMarks(dC[dy],dt))}if(dE>1){cS.remove(dw.line+1,dE-1,a1)}cS.insert(dw.line+1,dp)}}}if(bz.lineWrapping){var dq=Math.max(5,cl.clientWidth/bv()-3);cS.iter(dw.line,dw.line+dC.length,function(dF){if(dF.hidden){return}var dG=Math.ceil(dF.text.length/dq)||1;if(dG!=dF.height){cD(dF,dG)}})}else{cS.iter(dw.line,dw.line+dC.length,function(dG){var dF=dG.text;if(!dG.hidden&&dF.length>dr){bW=dF;dr=dF.length;ce=true;du=false}});if(du){aY=true}}var di=[],dn=dC.length-dE-1;for(var dy=0,dv=cE.length;dy<dv;++dy){var dz=cE[dy];if(dz<dw.line){di.push(dz)}else{if(dz>dj.line){di.push(dz+dn)}}}var dx=dw.line+Math.min(dC.length,500);cY(dw.line,dx);di.push(dx);cE=di;bY(100);aJ.push({from:dw.line,to:dj.line+1,diff:dn});var dm={from:dw,to:dj,text:dC};if(aR){for(var dl=aR;dl.next;dl=dl.next){}dl.next=dm}else{aR=dm}function dA(dF){return dF<=Math.min(dj.line,dj.line+dn)?dF:dF+dn}b3(a2(dh),a2(dD),dA(dg.from.line),dA(dg.to.line))}function av(dj){var dh=b9(),di=Math.floor(cS.height*dh+2*cM()),dk=cl.clientHeight;aP.style.height=dk+"px";if(cl.clientHeight){be.style.height=di+"px"}if(dj!=null){aP.scrollTop=dj}cF.style.top=(cp*dh-aP.scrollTop)+"px";aP.style.display=(di>dk)?"block":"none"}function bO(){var dj=document.createElement("div"),dh=document.createElement("div");dj.className="CodeMirror-scrollbar";dj.style.cssText="position: absolute; left: -9999px; height: 100px;";dh.className="CodeMirror-scrollbar-inner";dh.style.height="200px";dj.appendChild(dh);document.body.appendChild(dj);var di=(dj.offsetWidth<=1);document.body.removeChild(dj);return di}function bP(){var dh=0;bW="";ce=true;cS.iter(0,cS.size,function(dj){var di=dj.text;if(!dj.hidden&&di.length>dh){dh=di.length;bW=di}});aY=false}function cb(di,dl,dk){dl=a2(dl);if(!dk){dk=dl}else{dk=a2(dk)}di=J(di);function dj(dp){if(k(dp,dl)){return dp}if(!k(dk,dp)){return dh}var dm=dp.line+di.length-(dk.line-dl.line)-1;var dn=dp.ch;if(dp.line==dk.line){dn+=di[di.length-1].length-(dk.ch-(dk.line==dl.line?dl.ch:0))}return{line:dm,ch:dn}}var dh;aK(di,dl,dk,function(dm){dh=dm;return{from:dj(dg.from),to:dj(dg.to)}});return dh}function bK(dh,di){aK(J(dh),dg.from,dg.to,function(dj){if(di=="end"){return{from:dj,to:dj}}else{if(di=="start"){return{from:dg.from,to:dg.from}}else{return{from:dg.from,to:dj}}}})}function aK(dj,dm,dl,dk){var dh=dj.length==1?dj[0].length+dm.ch:dj[dj.length-1].length;var di=dk({line:dm.line+dj.length-1,ch:dh});cZ(dm,dl,dj,di.from,di.to)}function c3(dl,dk){var di=dl.line,dh=dk.line;if(di==dh){return aW(di).text.slice(dl.ch,dk.ch)}var dj=[aW(di).text.slice(dl.ch)];cS.iter(di+1,dh,function(dm){dj.push(dm.text)});dj.push(aW(dh).text.slice(0,dk.ch));return dj.join("\n")}function bw(){return c3(dg.from,dg.to)}var ca=false;function az(){if(ca){return}cx.set(bz.pollInterval,function(){aS();bR();if(bh){az()}aF()})}function aX(){var dh=false;ca=true;function di(){aS();var dj=bR();if(!dj&&!dh){dh=true;cx.set(60,di)}else{ca=false;az()}aF()}cx.set(20,di)}var ct="";function bR(){if(bu||!bh||al(bC)||bz.readOnly){return false}var di=bC.value;if(di==ct){return false}bi=null;var dj=0,dh=Math.min(ct.length,di.length);while(dj<dh&&ct[dj]==di[dj]){++dj}if(dj<ct.length){dg.from={line:dg.from.line,ch:dg.from.ch-(ct.length-dj)}}else{if(ba&&ak(dg.from,dg.to)){dg.to={line:dg.to.line,ch:Math.min(aW(dg.to.line).text.length,dg.to.ch+(di.length-dj))}}}bK(di.slice(dj),"end");if(di.length>1000){bC.value=ct=""}else{ct=di}return true}function aZ(dh){if(!ak(dg.from,dg.to)){ct="";bC.value=bw();d(bC)}else{if(dh){ct=bC.value=""}}}function b1(){if(bz.readOnly!="nocursor"){bC.focus()}}function aD(){if(!cr.getBoundingClientRect){return}var dh=cr.getBoundingClientRect();if(W&&dh.top==dh.bottom){return}var di=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);if(dh.top<0||dh.bottom>di){bk()}}function bk(){var dh=cd();return aI(dh.x,dh.y,dh.x,dh.yBot)}function cd(){var di=da(dg.inverted?dg.from:dg.to);var dh=bz.lineWrapping?Math.min(di.x,b8.offsetWidth):di.x;return{x:dh,y:di.y,yBot:di.yBot}}function aI(di,dl,dh,dk){var dm=cI(di,dl,dh,dk),dj=false;if(dm.scrollLeft!=null){cl.scrollLeft=dm.scrollLeft;dj=true}if(dm.scrollTop!=null){aP.scrollTop=dm.scrollTop;dj=true}if(dj&&bz.onScroll){bz.onScroll(cz)}}function cI(dj,dt,di,dr){var dl=cw(),dv=cM();dt+=dv;dr+=dv;dj+=dl;di+=dl;var ds=cl.clientHeight,dk=aP.scrollTop,dq={};var dh=dt<cM()+10;if(dt<dk){dq.scrollTop=dh?0:Math.max(0,dt)}else{if(dr>dk+ds){dq.scrollTop=dr-ds}}var du=cl.clientWidth,dp=cl.scrollLeft;var dn=bz.fixedGutter?c7.clientWidth:0;var dm=dj<dn+dl+10;if(dj<dp+dn||dm){if(dm){dj=0}dq.scrollLeft=Math.max(0,dj-10-dn)}else{if(di>du+dp-3){dq.scrollLeft=di+10-du}}return dq}function bZ(dl){var dh=b9(),dk=(dl!=null?dl:aP.scrollTop)-cM();var dj=Math.max(0,Math.floor(dk/dh));var di=Math.ceil((dk+cl.clientHeight)/dh);return{from:n(cS,dj),to:n(cS,di)}}function cC(dt,dp,dl){if(!cl.clientWidth){c9=bN=cp=0;return}var dn=bZ(dl);if(dt!==true&&dt.length==0&&dn.from>c9&&dn.to<bN){av(dl);return}var dv=Math.max(dn.from-100,0),du=Math.min(cS.size,dn.to+100);if(c9<dv&&dv-c9<20){dv=c9}if(bN>du&&bN-du<20){du=Math.min(cS.size,bN)}var ds=dt===true?[]:cj([{from:c9,to:bN,domStart:0}],dt);var dm=0;for(var dq=0;dq<ds.length;++dq){var dr=ds[dq];if(dr.from<dv){dr.domStart+=(dv-dr.from);dr.from=dv}if(dr.to>du){dr.to=du}if(dr.from>=dr.to){ds.splice(dq--,1)}else{dm+=dr.to-dr.from}}if(dm==du-dv&&dv==c9&&du==bN){av(dl);return}ds.sort(function(dz,dy){return dz.domStart-dy.domStart});var dk=b9(),dh=c7.style.display;at.style.display="none";cT(dv,du,ds);at.style.display=c7.style.display="";var dj=dv!=c9||du!=bN||b7!=cl.clientHeight+dk;if(dj){b7=cl.clientHeight+dk}c9=dv;bN=du;cp=m(cS,dv);if(at.childNodes.length!=bN-c9){throw new Error("BAD PATCH! "+JSON.stringify(ds)+" size="+(bN-c9)+" nodes="+at.childNodes.length)}function dw(){var dz=at.firstChild,dy=false;cS.iter(c9,bN,function(dA){if(!dA.hidden){var dB=Math.round(dz.offsetHeight/dk)||1;if(dA.height!=dB){cD(dA,dB);a0=dy=true}}dz=dz.nextSibling});return dy}if(bz.lineWrapping){var dx=Math.floor(cS.height*dk+2*cM()),di=cl.clientHeight;if(dx>di){aP.style.display="block"}dw()}c7.style.display=dh;if(dj||a0){c2()&&bz.lineWrapping&&dw()&&c2()}aE();av(dl);if(!dp&&bz.onUpdate){bz.onUpdate(cz)}return true}function cj(dn,dp){for(var dl=0,dj=dp.length||0;dl<dj;++dl){var dr=dp[dl],dh=[],dq=dr.diff||0;for(var dk=0,di=dn.length;dk<di;++dk){var dm=dn[dk];if(dr.to<=dm.from&&dr.diff){dh.push({from:dm.from+dq,to:dm.to+dq,domStart:dm.domStart})}else{if(dr.to<=dm.from||dr.from>=dm.to){dh.push(dm)}else{if(dr.from>dm.from){dh.push({from:dm.from,to:dr.from,domStart:dm.domStart})}if(dr.to<dm.to){dh.push({from:dr.to+dq,to:dm.to+dq,domStart:dm.domStart+(dr.to-dm.from)})}}}}dn=dh}return dn}function cT(dt,ds,dr){if(!dr.length){at.innerHTML=""}else{function dq(dw){var dv=dw.nextSibling;dw.parentNode.removeChild(dw);return dv}var dk=0,dj=at.firstChild,dh;for(var dm=0;dm<dr.length;++dm){var du=dr[dm];while(du.domStart>dk){dj=dq(dj);dk++}for(var dl=0,dn=du.to-du.from;dl<dn;++dl){dj=dj.nextSibling;dk++}}while(dj){dj=dq(dj)}}var di=dr.shift(),dj=at.firstChild,dl=dt;var dp=document.createElement("div");cS.iter(dt,ds,function(dv){if(di&&di.to==dl){di=dr.shift()}if(!di||di.from>dl){if(dv.hidden){var dw=dp.innerHTML="<pre></pre>"}else{var dw="<pre"+(dv.className?' class="'+dv.className+'"':"")+">"+dv.getHTML(bt)+"</pre>";if(dv.bgClassName){dw='<div style="position: relative"><pre class="'+dv.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+dw+"</div>"}}dp.innerHTML=dw;at.insertBefore(dp.firstChild,dj)}else{dj=dj.nextSibling}++dl})}function c2(){if(!bz.gutter&&!bz.lineNumbers){return}var dh=cF.offsetHeight,dq=cl.clientHeight;c7.style.height=(dh-dq<2?dq:dh)+"px";var dp=[],dl=c9,dr;cS.iter(c9,Math.max(bN,c9+1),function(ds){if(ds.hidden){dp.push("<pre></pre>")}else{var du=ds.gutterMarker;var dv=bz.lineNumbers?dl+bz.firstLineNumber:null;if(du&&du.text){dv=du.text.replace("%N%",dv!=null?dv:"")}else{if(dv==null){dv="\u00a0"}}dp.push((du&&du.style?'<pre class="'+du.style+'">':"<pre>"),dv);for(var dt=1;dt<ds.height;++dt){dp.push("<br/>&#160;")}dp.push("</pre>");if(!du){dr=dl}}++dl});c7.style.display="none";cJ.innerHTML=dp.join("");if(dr!=null&&bz.lineNumbers){var dk=cJ.childNodes[dr-c9];var dm=String(cS.size).length,di=B(dk.firstChild),dj="";while(di.length+dj.length<dm){dj+="\u00a0"}if(dj){dk.insertBefore(document.createTextNode(dj),dk.firstChild)}}c7.style.display="";var dn=Math.abs((parseInt(b8.style.marginLeft)||0)-c7.offsetWidth)>2;b8.style.marginLeft=c7.offsetWidth+"px";a0=false;return dn}function aE(){var dl=ak(dg.from,dg.to);var dr=da(dg.from,true);var dq=dl?dr:da(dg.to,true);var dp=dg.inverted?dr:dq,di=b9();var dh=am(aL),dk=am(at);ci.style.top=Math.max(0,Math.min(cl.offsetHeight,dp.y+dk.top-dh.top))+"px";ci.style.left=Math.max(0,Math.min(cl.offsetWidth,dp.x+dk.left-dh.left))+"px";if(dl){cr.style.top=dp.y+"px";cr.style.left=(bz.lineWrapping?Math.min(dp.x,b8.offsetWidth):dp.x)+"px";cr.style.display="";cn.style.display="none"}else{var dt=dr.y==dq.y,dn="";var du=b8.clientWidth||b8.offsetWidth;var dj=b8.clientHeight||b8.offsetHeight;function dv(dB,dA,dy,dz){var dx=T?"width: "+(!dy?du:du-dy-dB)+"px":"right: "+dy+"px";dn+='<div class="CodeMirror-selected" style="position: absolute; left: '+dB+"px; top: "+dA+"px; "+dx+"; height: "+dz+'px"></div>'}if(dg.from.ch&&dr.y>=0){var ds=dt?du-dq.x:0;dv(dr.x,dr.y,ds,di)}var dm=Math.max(0,dr.y+(dg.from.ch?di:0));var dw=Math.min(dq.y,dj)-dm;if(dw>0.2*di){dv(0,dm,0,dw)}if((!dt||!dg.from.ch)&&dq.y<dj-0.5*di){dv(0,dq.y,du-dq.x,di)}cn.innerHTML=dn;cr.style.display="none";cn.style.display=""}}function bm(dh){if(dh){bi=bi||(dg.inverted?dg.to:dg.from)}else{bi=null}}function b2(dj,di){var dh=bi&&a2(bi);if(dh){if(k(dh,dj)){dj=dh}else{if(k(di,dh)){di=dh}}}b3(dj,di);bo=true}function b3(dp,dn,dl,dm){a4=null;if(dl==null){dl=dg.from.line;dm=dg.to.line}if(ak(dg.from,dp)&&ak(dg.to,dn)){return}if(k(dn,dp)){var dj=dn;dn=dp;dp=dj}if(dp.line!=dl){var dk=bI(dp,dl,dg.from.ch);if(!dk){aT(dp.line,false)}else{dp=dk}}if(dn.line!=dm){dn=bI(dn,dm,dg.to.ch)}if(ak(dp,dn)){dg.inverted=false}else{if(ak(dp,dg.to)){dg.inverted=false}else{if(ak(dn,dg.from)){dg.inverted=true}}}if(bz.autoClearEmptyLines&&ak(dg.from,dg.to)){var di=dg.inverted?dp:dn;if(di.line!=dg.from.line&&dg.from.line<cS.size){var dh=aW(dg.from.line);if(/^\s+$/.test(dh.text)){setTimeout(au(function(){if(dh.parent&&/^\s+$/.test(dh.text)){var dq=l(dh);cb("",{line:dq,ch:0},{line:dq,ch:dh.text.length})}},10))}}}dg.from=dp;dg.to=dn;aV=true}function bI(dm,dj,di){function dl(dq){var ds=dm.line+dq,dp=dq==1?cS.size:-1;while(ds!=dp){var dn=aW(ds);if(!dn.hidden){var dr=dm.ch;if(dk||dr>di||dr>dn.text.length){dr=dn.text.length}return{line:ds,ch:dr}}ds+=dq}}var dh=aW(dm.line);var dk=dm.ch==dh.text.length&&dm.ch!=di;if(!dh.hidden){return dm}if(dm.line>=dj){return dl(1)||dl(-1)}else{return dl(-1)||dl(1)}}function bp(dh,dj,di){var dk=a2({line:dh,ch:dj||0});(di?b2:b3)(dk,dk)}function ch(dh){return Math.max(0,Math.min(dh,cS.size-1))}function a2(dj){if(dj.line<0){return{line:0,ch:0}}if(dj.line>=cS.size){return{line:cS.size-1,ch:aW(cS.size-1).text.length}}var dh=dj.ch,di=aW(dj.line).text.length;if(dh==null||dh>di){return{line:dj.line,ch:di}}else{if(dh<0){return{line:dj.line,ch:0}}else{return dj}}}function bb(dk,dp){var dm=dg.inverted?dg.from:dg.to,dq=dm.line,dh=dm.ch;var dn=aW(dq);function di(){for(var dr=dq+dk,dt=dk<0?-1:cS.size;dr!=dt;dr+=dk){var ds=aW(dr);if(!ds.hidden){dq=dr;dn=ds;return true}}}function dl(dr){if(dh==(dk<0?0:dn.text.length)){if(!dr&&di()){dh=dk<0?dn.text.length:0}else{return false}}else{dh+=dk}return true}if(dp=="char"){dl()}else{if(dp=="column"){dl(true)}else{if(dp=="word"){var dj=false;for(;;){if(dk<0){if(!dl()){break}}if(a(dn.text.charAt(dh))){dj=true}else{if(dj){if(dk<0){dk=1;dl()}break}}if(dk>0){if(!dl()){break}}}}}}return{line:dq,ch:dh}}function cW(dh,di){var dj=dh<0?dg.from:dg.to;if(bi||ak(dg.from,dg.to)){dj=bb(dh,di)}bp(dj.line,dj.ch,true)}function cH(dh,di){if(!ak(dg.from,dg.to)){cb("",dg.from,dg.to)}else{if(dh<0){cb("",bb(dh,di),dg.to)}else{cb("",dg.from,bb(dh,di))}}bo=true}var a4=null;function cR(dh,di){var dj=0,dl=da(dg.inverted?dg.from:dg.to,true);if(a4!=null){dl.x=a4}if(di=="page"){dj=Math.min(cl.clientHeight,window.innerHeight||document.documentElement.clientHeight)}else{if(di=="line"){dj=b9()}}var dk=bX(dl.x,dl.y+dj*dh+2);if(di=="page"){aP.scrollTop+=da(dk,true).y-dl.y}bp(dk.line,dk.ch,true);a4=dl.x}function bS(dk){var di=aW(dk.line).text;var dj=dk.ch,dh=dk.ch;while(dj>0&&a(di.charAt(dj-1))){--dj}while(dh<di.length&&a(di.charAt(dh))){++dh}b2({line:dk.line,ch:dj},{line:dk.line,ch:dh})}function c5(dh){b2({line:dh,ch:0},a2({line:dh+1,ch:0}))}function cU(dj){if(ak(dg.from,dg.to)){return bQ(dg.from.line,dj)}var di=dg.to.line-(dg.to.ch?0:1);for(var dh=dg.from.line;dh<=di;++dh){bQ(dh,dj)}}function bQ(di,dq){if(!dq){dq="add"}if(dq=="smart"){if(!cA.indent){dq="prev"}else{var dh=cO(di)}}var ds=aW(di),dk=ds.indentation(bz.tabSize),dl=ds.text.match(/^\s*/)[0],dn;if(dq=="smart"){dn=cA.indent(dh,ds.text.slice(dl.length),ds.text);if(dn==aj){dq="prev"}}if(dq=="prev"){if(di){dn=aW(di-1).indentation(bz.tabSize)}else{dn=0}}else{if(dq=="add"){dn=dk+bz.indentUnit}else{if(dq=="subtract"){dn=dk-bz.indentUnit}}}dn=Math.max(0,dn);var dr=dn-dk;if(!dr){if(dg.from.line!=di&&dg.to.line!=di){return}var dp=dl}else{var dp="",dm=0;if(bz.indentWithTabs){for(var dj=Math.floor(dn/bz.tabSize);dj;--dj){dm+=bz.tabSize;dp+="\t"}}while(dm<dn){++dm;dp+=" "}}cb(dp,{line:di,ch:0},{line:di,ch:dl.length})}function cf(){cA=O.getMode(bz,bz.mode);cS.iter(0,cS.size,function(dh){dh.stateAfter=null});cE=[0];bY()}function co(){var dh=bz.gutter||bz.lineNumbers;c7.style.display=dh?"":"none";if(dh){a0=true}else{at.parentNode.style.marginLeft=0}}function cX(dj,di){if(bz.lineWrapping){aL.className+=" CodeMirror-wrap";var dh=cl.clientWidth/bv()-3;cS.iter(0,cS.size,function(dk){if(dk.hidden){return}var dl=Math.ceil(dk.text.length/dh)||1;if(dl!=1){cD(dk,dl)}});b8.style.width=b6.style.width="";bq.style.left=""}else{aL.className=aL.className.replace(" CodeMirror-wrap","");bW="";ce=true;cS.iter(0,cS.size,function(dk){if(dk.height!=1&&!dk.hidden){cD(dk,1)}if(dk.text.length>bW.length){bW=dk.text}})}aJ.push({from:0,to:cS.size})}function bt(dj){var dh=bz.tabSize-dj%bz.tabSize,di=ax[dh];if(di){return di}for(var dl='<span class="cm-tab">',dk=0;dk<dh;++dk){dl+=" "}return(ax[dh]={html:dl+"</span>",width:dh})}function cV(){cl.className=cl.className.replace(/\s*cm-s-\S+/g,"")+bz.theme.replace(/(^|\s)\s*/g," cm-s-")}function a5(){var dh=P[bz.keyMap].style;aL.className=aL.className.replace(/\s*cm-keymap-\S+/g,"")+(dh?" cm-keymap-"+dh:"")}function aB(){this.set=[]}aB.prototype.clear=au(function(){var dm=Infinity,di=-Infinity;for(var dl=0,dp=this.set.length;dl<dp;++dl){var dj=this.set[dl],dh=dj.marked;if(!dh||!dj.parent){continue}var dn=l(dj);dm=Math.min(dm,dn);di=Math.max(di,dn);for(var dk=0;dk<dh.length;++dk){if(dh[dk].marker==this){dh.splice(dk--,1)}}}if(dm!=Infinity){aJ.push({from:dm,to:di+1})}});aB.prototype.find=function(){var dn,dm;for(var dk=0,dl=this.set.length;dk<dl;++dk){var dq=this.set[dk],dj=dq.marked;for(var di=0;di<dj.length;++di){var dh=dj[di];if(dh.marker==this){if(dh.from!=null||dh.to!=null){var dp=l(dq);if(dp!=null){if(dh.from!=null){dn={line:dp,ch:dh.from}}if(dh.to!=null){dm={line:dp,ch:dh.to}}}}}}}return{from:dn,to:dm}};function bV(dn,dm,di){dn=a2(dn);dm=a2(dm);var dh=new aB();if(!k(dn,dm)){return dh}function dl(dp,ds,dr,dq){aW(dp).addMark(new z(ds,dr,dq,dh))}if(dn.line==dm.line){dl(dn.line,dn.ch,dm.ch,di)}else{dl(dn.line,dn.ch,null,di);for(var dj=dn.line+1,dk=dm.line;dj<dk;++dj){dl(dj,null,null,di)}dl(dm.line,null,dm.ch,di)}aJ.push({from:dn.line,to:dm.line+1});return dh}function cP(di){di=a2(di);var dh=new V(di.ch);aW(di.line).addMark(dh);return dh}function bF(dm){dm=a2(dm);var dl=[],di=aW(dm.line).marked;if(!di){return dl}for(var dj=0,dk=di.length;dj<dk;++dj){var dh=di[dj];if((dh.from==null||dh.from<=dm.ch)&&(dh.to==null||dh.to>=dm.ch)){dl.push(dh.marker||dh)}}return dl}function bE(dh,dj,di){if(typeof dh=="number"){dh=aW(ch(dh))}dh.gutterMarker={text:dj,style:di};a0=true;return dh}function aq(dh){if(typeof dh=="number"){dh=aW(ch(dh))}dh.gutterMarker=null;a0=true}function cK(dh,dk){var dj=dh,di=dh;if(typeof dh=="number"){di=aW(ch(dh))}else{dj=l(dh)}if(dj==null){return null}if(dk(di,dj)){aJ.push({from:dj,to:dj+1})}else{return null}return di}function ck(dh,di,dj){return cK(dh,function(dk){if(dk.className!=di||dk.bgClassName!=dj){dk.className=di;dk.bgClassName=dj;return true}})}function aT(di,dh){return cK(di,function(dk,dn){if(dk.hidden!=dh){dk.hidden=dh;if(!bz.lineWrapping){var dj=dk.text;if(dh&&dj.length==bW.length){aY=true}else{if(!dh&&dj.length>bW.length){bW=dj;maxWidth=null;aY=false}}}cD(dk,dh?0:1);var dm=dg.from.line,dl=dg.to.line;if(dh&&(dm==dn||dl==dn)){var dq=dm==dn?bI({line:dm,ch:0},dm,0):dg.from;var dp=dl==dn?bI({line:dl,ch:0},dl,0):dg.to;if(!dp){return}b3(dq,dp)}return(a0=true)}})}function a7(dh){if(typeof dh=="number"){if(!cc(dh)){return null}var dj=dh;dh=aW(dh);if(!dh){return null}}else{var dj=l(dh);if(dj==null){return null}}var di=dh.gutterMarker;return{line:dj,handle:dh,text:dh.text,markerText:di&&di.text,markerClass:di&&di.style,lineClass:dh.className,bgClass:dh.bgClassName}}function a6(dh){ay.innerHTML="<pre><span>x</span></pre>";ay.firstChild.firstChild.firstChild.nodeValue=dh;return ay.firstChild.firstChild.offsetWidth||10}function aN(du,dn){if(dn<=0){return 0}var dj=aW(du),dt=dj.text;function ds(dv){return bs(dj,dv).left}var dr=0,dp=0,dq=dt.length,dm;var dk=Math.min(dq,Math.ceil(dn/bv()));for(;;){var di=ds(dk);if(di<=dn&&dk<dq){dk=Math.min(dq,Math.ceil(dk*1.2))}else{dm=di;dq=dk;break}}if(dn>dm){return dq}dk=Math.floor(dq*0.8);di=ds(dk);if(di<dn){dr=dk;dp=di}for(;;){if(dq-dr<=1){return(dm-dn>dn-dp)?dr:dq}var dl=Math.ceil((dr+dq)/2),dh=ds(dl);if(dh>dn){dq=dl;dm=dh}else{dr=dl;dp=dh}}}var a3="CodeMirror-temp-"+Math.floor(Math.random()*16777215).toString(16);function bs(di,dl){if(dl==0){return{top:0,left:0}}var dh=bz.lineWrapping&&dl<di.text.length&&C.test(di.text.slice(dl-1,dl+1));ay.innerHTML="<pre>"+di.getHTML(bt,dl,a3,dh)+"</pre>";var dj=document.getElementById(a3);var dn=dj.offsetTop,dm=dj.offsetLeft;if(W&&dn==0&&dm==0){var dk=document.createElement("span");dk.innerHTML="x";dj.parentNode.insertBefore(dk,dj.nextSibling);dn=dk.offsetTop}return{top:dn,left:dm}}function da(dm,dk){var dh,di=b9(),dl=di*(m(cS,dm.line)-(dk?cp:0));if(dm.ch==0){dh=0}else{var dj=bs(aW(dm.line),dm.ch);dh=dj.left;if(bz.lineWrapping){dl+=Math.max(0,dj.top)}}return{x:dh,y:dl,yBot:dl+di}}function bX(dt,ds){if(ds<0){ds=0}var dp=b9(),dn=bv(),dy=cp+Math.floor(ds/dp);var di=n(cS,dy);if(di>=cS.size){return{line:cS.size-1,ch:aW(cS.size-1).text.length}}var dj=aW(di),du=dj.text;var dA=bz.lineWrapping,dr=dA?dy-m(cS,di):0;if(dt<=0&&dr==0){return{line:di,ch:0}}function dz(dB){var dC=bs(dj,dB);if(dA){var dD=Math.round(dC.top/dp);return Math.max(0,dC.left+(dD-dr)*cl.clientWidth)}return dC.left}var dx=0,dv=0,dl=du.length,dk;var dh=Math.min(dl,Math.ceil((dt+dr*cl.clientWidth*0.9)/dn));for(;;){var dq=dz(dh);if(dq<=dt&&dh<dl){dh=Math.min(dl,Math.ceil(dh*1.2))}else{dk=dq;dl=dh;break}}if(dt>dk){return{line:di,ch:dl}}dh=Math.floor(dl*0.8);dq=dz(dh);if(dq<dt){dx=dh;dv=dq}for(;;){if(dl-dx<=1){return{line:di,ch:(dk-dt>dt-dv)?dx:dl}}var dw=Math.ceil((dx+dl)/2),dm=dz(dw);if(dm>dt){dl=dw;dk=dm}else{dx=dw;dv=dm}}}function ar(dj){var dh=da(dj,true),di=am(b8);return{x:di.left+dh.x,y:di.top+dh.y,yBot:di.top+dh.yBot}}var bf,de,bD;function b9(){if(bD==null){bD="<pre>";for(var di=0;di<49;++di){bD+="x<br/>"}bD+="x</pre>"}var dh=at.clientHeight;if(dh==de){return bf}de=dh;ay.innerHTML=bD;bf=ay.firstChild.offsetHeight/50||1;ay.innerHTML="";return bf}var db,bM=0;function bv(){if(cl.clientWidth==bM){return db}bM=cl.clientWidth;return(db=a6("x"))}function cM(){return b8.offsetTop}function cw(){return b8.offsetLeft}function bj(dl,dk){var dj=am(cl,true),dh,dm;try{dh=dl.clientX;dm=dl.clientY}catch(dl){return null}if(!dk&&(dh-dj.left>cl.clientWidth||dm-dj.top>cl.clientHeight)){return null}var di=am(b8,true);return bX(dh-di.left,dm-di.top)}function bg(di){var dn=bj(di),dm=aP.scrollTop;if(!dn||X){return}if(ak(dg.from,dg.to)||k(dn,dg.from)||!k(dn,dg.to)){au(bp)(dn.line,dn.ch)}var dl=bC.style.cssText;ci.style.position="absolute";bC.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(di.clientY-5)+"px; left: "+(di.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";bu=true;var dk=bC.value=bw();b1();d(bC);function dh(){var dp=J(bC.value).join("\n");if(dp!=dk&&!bz.readOnly){au(bK)(dp,"end")}ci.style.position="relative";bC.style.cssText=dl;if(I){aP.scrollTop=dm}bu=false;aZ(true);az()}if(Z){Q(di);var dj=G(window,"mouseup",function(){dj();setTimeout(dh,20)},true)}else{setTimeout(dh,50)}}function aQ(){clearInterval(aM);var dh=true;cr.style.visibility="";aM=setInterval(function(){cr.style.visibility=(dh=!dh)?"":"hidden"},650)}var bH={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function bl(dn){var di=dg.inverted?dg.from:dg.to,dq=aW(di.line),dj=di.ch-1;var dp=(dj>=0&&bH[dq.text.charAt(dj)])||bH[dq.text.charAt(++dj)];if(!dp){return}var dr=dp.charAt(0),dh=dp.charAt(1)==">",dB=dh?1:-1,dw=dq.styles;for(var dC=dj+1,dy=0,dA=dw.length;dy<dA;dy+=2){if((dC-=dw[dy].length)<=0){var dz=dw[dy+1];break}}var dm=[dq.text.charAt(dj)],dv=/[(){}[\]]/;function dt(dO,dK,dJ){if(!dO.text){return}var dN=dO.styles,dI=dh?0:dO.text.length-1,dL;for(var dF=dh?0:dN.length-2,dH=dh?dN.length:-2;dF!=dH;dF+=2*dB){var dM=dN[dF];if(dN[dF+1]!=dz){dI+=dB*dM.length;continue}for(var dE=dh?0:dM.length-1,dD=dh?dM.length:-1;dE!=dD;dE+=dB,dI+=dB){if(dI>=dK&&dI<dJ&&dv.test(dL=dM.charAt(dE))){var dG=bH[dL];if(dG.charAt(1)==">"==dh){dm.push(dL)}else{if(dm.pop()!=dG.charAt(0)){return{pos:dI,match:false}}else{if(!dm.length){return{pos:dI,match:true}}}}}}}}for(var dy=di.line,dA=dh?Math.min(dy+100,cS.size):Math.max(-1,dy-100);dy!=dA;dy+=dB){var dq=aW(dy),dl=dy==di.line;var ds=dt(dq,dl&&dh?dj+1:0,dl&&!dh?dj:dq.text.length);if(ds){break}}if(!ds){ds={pos:null,match:false}}var dz=ds.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var dx=bV({line:di.line,ch:dj},{line:di.line,ch:dj+1},dz),dk=ds.pos!=null&&bV({line:dy,ch:ds.pos},{line:dy,ch:ds.pos+1},dz);var du=au(function(){dx.clear();dk&&dk.clear()});if(dn){setTimeout(du,800)}else{cu=du}}function cv(dn){var dm,dj;for(var di=dn,dk=dn-40;di>dk;--di){if(di==0){return 0}var dh=aW(di-1);if(dh.stateAfter){return di}var dl=dh.indentation(bz.tabSize);if(dj==null||dm>dl){dj=di-1;dm=dl}}return dj}function cO(dj){var di=cv(dj),dh=di&&aW(di-1).stateAfter;if(!dh){dh=r(cA)}else{dh=D(cA,dh)}cS.iter(di,dj,function(dk){dk.highlight(cA,dh,bz.tabSize);dk.stateAfter=D(cA,dh)});if(di<dj){aJ.push({from:di,to:dj})}if(dj<cS.size&&!aW(dj).stateAfter){cE.push(dj)}return dh}function cY(dj,dh){var di=cO(dj);cS.iter(dj,dh,function(dk){dk.highlight(cA,di,bz.tabSize);dk.stateAfter=D(cA,di)})}function bG(){var dm=+new Date+bz.workTime;var dr=cE.length;while(cE.length){if(!aW(c9).stateAfter){var dk=c9}else{var dk=cE.pop()}if(dk>=cS.size){continue}var dj=cv(dk),dh=dj&&aW(dj-1).stateAfter;if(dh){dh=D(cA,dh)}else{dh=r(cA)}var dn=0,di=cA.compareStates,dq=false,dp=dj,dl=false;cS.iter(dp,cS.size,function(du){var dt=du.stateAfter;if(+new Date>dm){cE.push(dp);bY(bz.workDelay);if(dq){aJ.push({from:dk,to:dp+1})}return(dl=true)}var dv=du.highlight(cA,dh,bz.tabSize);if(dv){dq=true}du.stateAfter=D(cA,dh);var ds=null;if(di){var dw=dt&&di(dt,dh);if(dw!=aj){ds=!!dw}}if(ds==null){if(dv!==false||!dt){dn=0}else{if(++dn>3&&(!cA.indent||cA.indent(dt,"")==cA.indent(dh,""))){ds=true}}}if(ds){return true}++dp});if(dl){return}if(dq){aJ.push({from:dk,to:dp+1})}}if(dr&&bz.onHighlightComplete){bz.onHighlightComplete(cz)}}function bY(dh){if(!cE.length){return}df.set(dh,au(bG))}function aS(){a9=bo=aR=null;aJ=[];aV=false;a1=[]}function aF(){if(aY){bP()}if(ce&&!bz.lineWrapping){bq.style.left=a6(bW)+"px";ce=false}var dk,dl;if(aV){var dh=cd();dk=cI(dh.x,dh.y,dh.x,dh.yBot)}if(aJ.length){dl=cC(aJ,true,(dk?dk.scrollTop:null))}else{if(aV){aE()}if(a0){c2()}}if(dk){bk()}if(aV){aD();aQ()}if(bh&&!bu&&(a9===true||(a9!==false&&aV))){aZ(bo)}if(aV&&bz.matchBrackets){setTimeout(au(function(){if(cu){cu();cu=null}if(ak(dg.from,dg.to)){bl(false)}}),20)}var dm=aV,di=a1;if(aR&&bz.onChange&&cz){bz.onChange(cz,aR)}if(dm&&bz.onCursorActivity){bz.onCursorActivity(cz)}for(var dj=0;dj<di.length;++dj){di[dj](cz)}if(dl&&bz.onUpdate){bz.onUpdate(cz)}}var cL=0;function au(dh){return function(){if(!cL++){aS()}try{var di=dh.apply(this,arguments)}finally{if(!--cL){aF()}}return di}}function bL(dh){br.startCompound();try{return dh()}finally{br.endCompound()}}for(var b0 in i){if(i.propertyIsEnumerable(b0)&&!cz.propertyIsEnumerable(b0)){cz[b0]=i[b0]}}return cz}O.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var K=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var Y=K||/Mac/.test(navigator.platform);var ae=/Win/.test(navigator.platform);var ao=O.modes={},t=O.mimeModes={};O.defineMode=function(aq,at){if(!O.defaults.mode&&aq!="null"){O.defaults.mode=aq}if(arguments.length>2){at.dependencies=[];for(var ar=2;ar<arguments.length;++ar){at.dependencies.push(arguments[ar])}}ao[aq]=at};O.defineMIME=function(ar,aq){t[ar]=aq};O.resolveMode=function(aq){if(typeof aq=="string"&&t.hasOwnProperty(aq)){aq=t[aq]}else{if(typeof aq=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(aq)){return O.resolveMode("application/xml")}}if(typeof aq=="string"){return{name:aq}}else{return aq||{name:"null"}}};O.getMode=function(at,aq){var aq=O.resolveMode(aq);var ar=ao[aq.name];if(!ar){return O.getMode(at,"text/plain")}return ar(at,aq)};O.listModes=function(){var ar=[];for(var aq in ao){if(ao.propertyIsEnumerable(aq)){ar.push(aq)}}return ar};O.listMIMEs=function(){var ar=[];for(var aq in t){if(t.propertyIsEnumerable(aq)){ar.push({mime:aq,mode:t[aq]})}}return ar};var i=O.extensions={};O.defineExtension=function(aq,ar){i[aq]=ar};var y=O.commands={selectAll:function(aq){aq.setSelection({line:0,ch:0},{line:aq.lineCount()-1})},killLine:function(aq){var au=aq.getCursor(true),at=aq.getCursor(false),ar=!ak(au,at);if(!ar&&aq.getLine(au.line).length==au.ch){aq.replaceRange("",au,{line:au.line+1,ch:0})}else{aq.replaceRange("",au,ar?at:{line:au.line})}},deleteLine:function(aq){var ar=aq.getCursor().line;aq.replaceRange("",{line:ar,ch:0},{line:ar})},undo:function(aq){aq.undo()},redo:function(aq){aq.redo()},goDocStart:function(aq){aq.setCursor(0,0,true)},goDocEnd:function(aq){aq.setSelection({line:aq.lineCount()-1},null,true)},goLineStart:function(aq){aq.setCursor(aq.getCursor().line,0,true)},goLineStartSmart:function(aq){var at=aq.getCursor();var ar=aq.getLine(at.line),au=Math.max(0,ar.search(/\S/));aq.setCursor(at.line,at.ch<=au&&at.ch?0:au,true)},goLineEnd:function(aq){aq.setSelection({line:aq.getCursor().line},null,true)},goLineUp:function(aq){aq.moveV(-1,"line")},goLineDown:function(aq){aq.moveV(1,"line")},goPageUp:function(aq){aq.moveV(-1,"page")},goPageDown:function(aq){aq.moveV(1,"page")},goCharLeft:function(aq){aq.moveH(-1,"char")},goCharRight:function(aq){aq.moveH(1,"char")},goColumnLeft:function(aq){aq.moveH(-1,"column")},goColumnRight:function(aq){aq.moveH(1,"column")},goWordLeft:function(aq){aq.moveH(-1,"word")},goWordRight:function(aq){aq.moveH(1,"word")},delCharLeft:function(aq){aq.deleteH(-1,"char")},delCharRight:function(aq){aq.deleteH(1,"char")},delWordLeft:function(aq){aq.deleteH(-1,"word")},delWordRight:function(aq){aq.deleteH(1,"word")},indentAuto:function(aq){aq.indentSelection("smart")},indentMore:function(aq){aq.indentSelection("add")},indentLess:function(aq){aq.indentSelection("subtract")},insertTab:function(aq){aq.replaceSelection("\t","end")},defaultTab:function(aq){if(aq.somethingSelected()){aq.indentSelection("add")}else{aq.replaceSelection("\t","end")}},transposeChars:function(aq){var at=aq.getCursor(),ar=aq.getLine(at.line);if(at.ch>0&&at.ch<ar.length-1){aq.replaceRange(ar.charAt(at.ch)+ar.charAt(at.ch-1),{line:at.line,ch:at.ch-1},{line:at.line,ch:at.ch+1})}},newlineAndIndent:function(aq){aq.replaceSelection("\n","end");aq.indentLine(aq.getCursor().line)},toggleOverwrite:function(aq){aq.toggleOverwrite()}};var P=O.keyMap={};P.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};P.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};P.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};P["default"]=Y?P.macDefault:P.pcDefault;P.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function f(aq){if(typeof aq=="string"){return P[aq]}else{return aq}}function u(ar,au,av,aq,at){function aw(aB){aB=f(aB);var az=aB[ar];if(az!=null&&aq(az)){return true}if(aB.nofallthrough){if(at){at()}return true}var ax=aB.fallthrough;if(ax==null){return false}if(Object.prototype.toString.call(ax)!="[object Array]"){return aw(ax)}for(var ay=0,aA=ax.length;ay<aA;++ay){if(aw(ax[ay])){return true}}return false}if(au&&aw(au)){return true}return aw(av)}function ab(ar){var aq=ac[N(ar,"keyCode")];return aq=="Ctrl"||aq=="Alt"||aq=="Shift"||aq=="Mod"}O.fromTextArea=function(aw,ar){if(!ar){ar={}}ar.value=aw.value;if(!ar.tabindex&&aw.tabindex){ar.tabindex=aw.tabindex}if(ar.autofocus==null&&aw.getAttribute("autofocus")!=null){ar.autofocus=true}function av(){aw.value=aq.getValue()}if(aw.form){var au=G(aw.form,"submit",av,true);if(typeof aw.form.submit=="function"){var at=aw.form.submit;function ax(){av();aw.form.submit=at;aw.form.submit();aw.form.submit=ax}aw.form.submit=ax}}aw.style.display="none";var aq=O(function(ay){aw.parentNode.insertBefore(ay,aw.nextSibling)},ar);aq.save=av;aq.getTextArea=function(){return aw};aq.toTextArea=function(){av();aw.parentNode.removeChild(aq.getWrapperElement());aw.style.display="";if(aw.form){au();if(typeof aw.form.submit=="function"){aw.form.submit=at}}};return aq};function D(au,aq){if(aq===true){return aq}if(au.copyState){return au.copyState(aq)}var at={};for(var av in aq){var ar=aq[av];if(ar instanceof Array){ar=ar.concat([])}at[av]=ar}return at}O.copyState=D;function r(at,ar,aq){return at.startState?at.startState(ar,aq):true}O.startState=r;function e(aq,ar){this.pos=this.start=0;this.string=aq;this.tabSize=ar||8}e.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(aq){var at=this.string.charAt(this.pos);if(typeof aq=="string"){var ar=at==aq}else{var ar=at&&(aq.test?aq.test(at):aq(at))}if(ar){++this.pos;return at}},eatWhile:function(aq){var ar=this.pos;while(this.eat(aq)){}return this.pos>ar},eatSpace:function(){var aq=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>aq},skipToEnd:function(){this.pos=this.string.length},skipTo:function(aq){var ar=this.string.indexOf(aq,this.pos);if(ar>-1){this.pos=ar;return true}},backUp:function(aq){this.pos-=aq},column:function(){return x(this.string,this.start,this.tabSize)},indentation:function(){return x(this.string,null,this.tabSize)},match:function(ar,at,aq){if(typeof ar=="string"){function av(aw){return aq?aw.toLowerCase():aw}if(av(this.string).indexOf(av(ar),this.pos)==this.pos){if(at!==false){this.pos+=ar.length}return true}}else{var au=this.string.slice(this.pos).match(ar);if(au&&at!==false){this.pos+=au[0].length}return au}},current:function(){return this.string.slice(this.start,this.pos)}};O.StringStream=e;function z(au,at,aq,ar){this.from=au;this.to=at;this.style=aq;this.marker=ar}z.prototype={attach:function(aq){this.marker.set.push(aq)},detach:function(ar){var aq=E(this.marker.set,ar);if(aq>-1){this.marker.set.splice(aq,1)}},split:function(au,aq){if(this.to<=au&&this.to!=null){return null}var at=this.from<au||this.from==null?null:this.from-au+aq;var ar=this.to==null?null:this.to-au+aq;return new z(at,ar,this.style,this.marker)},dup:function(){return new z(null,null,this.style,this.marker)},clipTo:function(aq,av,ar,au,at){if(aq&&au>this.from&&(au<this.to||this.to==null)){this.from=null}else{if(this.from!=null&&this.from>=av){this.from=Math.max(au,this.from)+at}}if(ar&&(av<this.to||this.to==null)&&(av>this.from||this.from==null)){this.to=null}else{if(this.to!=null&&this.to>av){this.to=au<this.to?this.to+at:av}}},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(aq){return this.marker==aq.marker}};function V(aq){this.from=aq;this.to=aq;this.line=null}V.prototype={attach:function(aq){this.line=aq},detach:function(aq){if(this.line==aq){this.line=null}},split:function(ar,aq){if(ar<this.from){this.from=this.to=(this.from-ar)+aq;return this}},isDead:function(){return this.from>this.to},clipTo:function(aq,av,ar,au,at){if((aq||av<this.from)&&(ar||au>this.to)){this.from=0;this.to=-1}else{if(this.from>av){this.from=this.to=Math.max(au,this.from)+at}}},sameSet:function(aq){return false},find:function(){if(!this.line||!this.line.parent){return null}return{line:l(this.line),ch:this.from}},clear:function(){if(this.line){var aq=E(this.line.marked,this);if(aq!=-1){this.line.marked.splice(aq,1)}this.line=null}}};function j(ar,aq){this.styles=aq||[ar,null];this.text=ar;this.height=1;this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null;this.stateAfter=this.parent=this.hidden=null}j.inheritMarks=function(av,ay){var au=new j(av),aq=ay&&ay.marked;if(aq){for(var at=0;at<aq.length;++at){if(aq[at].to==null&&aq[at].style){var ar=au.marked||(au.marked=[]),ax=aq[at];var aw=ax.dup();ar.push(aw);aw.attach(au)}}}return au};j.prototype={replace:function(ax,au,ay){var az=[],ar=this.marked,aw=au==null?this.text.length:au;an(0,ax,this.styles,az);if(ay){az.push(ay,null)}an(aw,this.text.length,this.styles,az);this.styles=az;this.text=this.text.slice(0,ax)+ay+this.text.slice(aw);this.stateAfter=null;if(ar){var av=ay.length-(aw-ax);for(var at=0;at<ar.length;++at){var aq=ar[at];aq.clipTo(ax==null,ax||0,au==null,aw,av);if(aq.isDead()){aq.detach(this);ar.splice(at--,1)}}}},split:function(ay,aw){var au=[aw,null],ar=this.marked;an(ay,this.text.length,this.styles,au);var at=new j(aw+this.text.slice(ay),au);if(ar){for(var av=0;av<ar.length;++av){var ax=ar[av];var aq=ax.split(ay,aw.length);if(aq){if(!at.marked){at.marked=[]}at.marked.push(aq);aq.attach(at);if(aq==ax){ar.splice(av--,1)}}}}return at},append:function(ar){var ax=this.text.length,aq=ar.marked,au=this.marked;this.text+=ar.text;an(0,ar.text.length,ar.styles,this.styles);if(au){for(var av=0;av<au.length;++av){if(au[av].to==null){au[av].to=ax}}}if(aq&&aq.length){if(!au){this.marked=au=[]}outer:for(var av=0;av<aq.length;++av){var ay=aq[av];if(!ay.from){for(var at=0;at<au.length;++at){var aw=au[at];if(aw.to==ax&&aw.sameSet(ay)){aw.to=ay.to==null?null:ay.to+ax;if(aw.isDead()){aw.detach(this);aq.splice(av--,1)}continue outer}}}au.push(ay);ay.attach(this);ay.from+=ax;if(ay.to!=null){ay.to+=ax}}}},fixMarkEnds:function(ar){var aq=this.marked,av=ar.marked;if(!aq){return}for(var au=0;au<aq.length;++au){var ax=aq[au],aw=ax.to==null;if(aw&&av){for(var at=0;at<av.length;++at){if(av[at].sameSet(ax)){aw=false;break}}}if(aw){ax.to=this.text.length}}},fixMarkStarts:function(){var aq=this.marked;if(!aq){return}for(var ar=0;ar<aq.length;++ar){if(aq[ar].from==null){aq[ar].from=0}}},addMark:function(aq){aq.attach(this);if(this.marked==null){this.marked=[]}this.marked.push(aq);this.marked.sort(function(at,ar){return(at.from||0)-(ar.from||0)})},highlight:function(ax,ar,au){var aA=new e(this.text,au),aB=this.styles,ay=0;var av=false,at=aB[0],az;if(this.text==""&&ax.blankLine){ax.blankLine(ar)}while(!aA.eol()){var aq=ax.token(aA,ar);var aw=this.text.slice(aA.start,aA.pos);aA.start=aA.pos;if(ay&&aB[ay-1]==aq){aB[ay-2]+=aw}else{if(aw){if(!av&&(aB[ay+1]!=aq||(ay&&aB[ay-2]!=az))){av=true}aB[ay++]=aw;aB[ay++]=aq;az=at;at=aB[ay]}}if(aA.pos>5000){aB[ay++]=this.text.slice(aA.pos);aB[ay++]=null;break}}if(aB.length!=ay){aB.length=ay;av=true}if(ay&&aB[ay-2]!=az){av=true}return av||(aB.length<5&&this.text.length<10?null:false)},getTokenAt:function(aw,au,at){var aq=this.text,av=new e(aq);while(av.pos<at&&!av.eol()){av.start=av.pos;var ar=aw.token(av,au)}return{start:av.start,end:av.pos,string:av.current(),className:ar||null,state:au}},indentation:function(aq){return x(this.text,null,aq)},getHTML:function(aQ,aD,az,at){var aA=[],ax=true,au=0;function aL(a1,a0){if(!a1){return}if(ax&&W&&a1.charAt(0)==" "){a1="\u00a0"+a1.slice(1)}ax=false;if(a1.indexOf("\t")==-1){au+=a1.length;var a3=aa(a1)}else{var a3="";for(var a2=0;;){var aY=a1.indexOf("\t",a2);if(aY==-1){a3+=aa(a1.slice(a2));au+=a1.length-a2;break}else{au+=aY-a2;var aZ=aQ(au);a3+=aa(a1.slice(a2,aY))+aZ.html;au+=aZ.width;a2=aY+1}}}if(a0){aA.push('<span class="',a0,'">',a3,"</span>")}else{aA.push(a3)}}var aR=aL;if(aD!=null){var aV=0,aF='<span id="'+az+'">';aR=function(a1,aZ){var aY=a1.length;if(aD>=aV&&aD<aV+aY){if(aD>aV){aL(a1.slice(0,aD-aV),aZ);if(at){aA.push("<wbr>")}}aA.push(aF);var a0=aD-aV;aL(X?a1.slice(a0,a0+1):a1.slice(a0),aZ);aA.push("</span>");if(X){aL(a1.slice(a0+1),aZ)}aD--;aV+=aY}else{aV+=aY;aL(a1,aZ);if(aV==aD&&aV==aT){aA.push(aF+" </span>")}else{if(aV>aD+10&&/\s/.test(a1)){aR=function(){}}}}}}var aJ=this.styles,aq=this.text,aW=this.marked;var aT=aq.length;function av(aY){if(!aY){return null}return"cm-"+aY.replace(/ +/g," cm-")}if(!aq&&aD==null){aR(" ")}else{if(!aW||!aW.length){for(var aP=0,aB=0;aB<aT;aP+=2){var aI=aJ[aP],aS=aJ[aP+1],aK=aI.length;if(aB+aK>aT){aI=aI.slice(0,aT-aB)}aB+=aK;aR(aI,av(aS))}}else{var aw=0,aP=0,aE="",aS,aX=0;var aG=aW[0].from||0,aN=[],aU=0;function aO(){var aY;while(aU<aW.length&&((aY=aW[aU]).from==aw||aY.from==null)){if(aY.style!=null){aN.push(aY)}++aU}aG=aU<aW.length?aW[aU].from:Infinity;for(var aZ=0;aZ<aN.length;++aZ){var a0=aN[aZ].to||Infinity;if(a0==aw){aN.splice(aZ--,1)}else{aG=Math.min(a0,aG)}}}var aH=0;while(aw<aT){if(aG==aw){aO()}var aC=Math.min(aT,aG);while(true){if(aE){var ar=aw+aE.length;var ay=aS;for(var aM=0;aM<aN.length;++aM){ay=(ay?ay+" ":"")+aN[aM].style}aR(ar>aC?aE.slice(0,aC-aw):aE,ay);if(ar>=aC){aE=aE.slice(aC-aw);aw=aC;break}aw=ar}aE=aJ[aP++];aS=av(aJ[aP++])}}}}return aA.join("")},cleanUp:function(){this.parent=null;if(this.marked){for(var aq=0,ar=this.marked.length;aq<ar;++aq){this.marked[aq].detach(this)}}}};function an(az,ay,av,ax){for(var au=0,aw=0,aq=0;aw<ay;au+=2){var ar=av[au],at=aw+ar.length;if(aq==0){if(at>az){ax.push(ar.slice(az-aw,Math.min(ar.length,ay-aw)),av[au+1])}if(at>=az){aq=1}}else{if(aq==1){if(at>ay){ax.push(ar.slice(0,ay-aw),av[au+1])}else{ax.push(ar,av[au+1])}}}aw=at}}function b(aq){this.lines=aq;this.parent=null;for(var ar=0,au=aq.length,at=0;ar<au;++ar){aq[ar].parent=this;at+=aq[ar].height}this.height=at}b.prototype={chunkSize:function(){return this.lines.length},remove:function(aq,ay,au){for(var aw=aq,ax=aq+ay;aw<ax;++aw){var ar=this.lines[aw];this.height-=ar.height;ar.cleanUp();if(ar.handlers){for(var av=0;av<ar.handlers.length;++av){au.push(ar.handlers[av])}}}this.lines.splice(aq,ay)},collapse:function(aq){aq.splice.apply(aq,[aq.length,0].concat(this.lines))},insertHeight:function(aq,ar,av){this.height+=av;this.lines=this.lines.slice(0,aq).concat(ar).concat(this.lines.slice(aq));for(var au=0,aw=ar.length;au<aw;++au){ar[au].parent=this}},iterN:function(aq,av,au){for(var ar=aq+av;aq<ar;++aq){if(au(this.lines[aq])){return true}}}};function q(at){this.children=at;var ar=0,av=0;for(var aq=0,aw=at.length;aq<aw;++aq){var au=at[aq];ar+=au.chunkSize();av+=au.height;au.parent=this}this.size=ar;this.height=av;this.parent=null}q.prototype={chunkSize:function(){return this.size},remove:function(au,av,aq){this.size-=av;for(var aw=0;aw<this.children.length;++aw){var ar=this.children[aw],ay=ar.chunkSize();if(au<ay){var ax=Math.min(av,ay-au),az=ar.height;ar.remove(au,ax,aq);this.height-=az-ar.height;if(ay==ax){this.children.splice(aw--,1);ar.parent=null}if((av-=ax)==0){break}au=0}else{au-=ay}}if(this.size-av<25){var aA=[];this.collapse(aA);this.children=[new b(aA)];this.children[0].parent=this}},collapse:function(aq){for(var ar=0,at=this.children.length;ar<at;++ar){this.children[ar].collapse(aq)}},insert:function(aq,ar){var av=0;for(var au=0,aw=ar.length;au<aw;++au){av+=ar[au].height}this.insertHeight(aq,ar,av)},insertHeight:function(au,aA,az){this.size+=aA.length;this.height+=az;for(var av=0,aw=this.children.length;av<aw;++av){var ar=this.children[av],ax=ar.chunkSize();if(au<=ax){ar.insertHeight(au,aA,az);if(ar.lines&&ar.lines.length>50){while(ar.lines.length>50){var aq=ar.lines.splice(ar.lines.length-25,25);var ay=new b(aq);ar.height-=ay.height;this.children.splice(av+1,0,ay);ay.parent=this}this.maybeSpill()}break}au-=ax}},maybeSpill:function(){if(this.children.length<=10){return}var au=this;do{var ar=au.children.splice(au.children.length-5,5);var at=new q(ar);if(!au.parent){var av=new q(au.children);av.parent=au;au.children=[av,at];au=av}else{au.size-=at.size;au.height-=at.height;var aq=E(au.parent.children,au);au.parent.children.splice(aq+1,0,at)}at.parent=au.parent}while(au.children.length>10);au.parent.maybeSpill()},iter:function(at,ar,aq){this.iterN(at,ar-at,aq)},iterN:function(aq,az,ay){for(var ar=0,aw=this.children.length;ar<aw;++ar){var ax=this.children[ar],av=ax.chunkSize();if(aq<av){var au=Math.min(az,av-aq);if(ax.iterN(aq,au,ay)){return true}if((az-=au)==0){break}aq=0}else{aq-=av}}}};function S(aq,av){while(!aq.lines){for(var ar=0;;++ar){var au=aq.children[ar],at=au.chunkSize();if(av<at){aq=au;break}av-=at}}return aq.lines[av]}function l(aq){if(aq.parent==null){return null}var aw=aq.parent,av=E(aw.lines,aq);for(var ar=aw.parent;ar;aw=ar,ar=ar.parent){for(var at=0,au=ar.children.length;;++at){if(ar.children[at]==aw){break}av+=ar.children[at].chunkSize()}}return av}function n(ax,av){var at=0;outer:do{for(var au=0,aw=ax.children.length;au<aw;++au){var ar=ax.children[au],aq=ar.height;if(av<aq){ax=ar;continue outer}av-=aq;at+=ar.chunkSize()}return at}while(!ax.lines);for(var au=0,aw=ax.lines.length;au<aw;++au){var az=ax.lines[au],ay=az.height;if(av<ay){break}av-=ay}return at+au}function m(aq,ax){var at=0;outer:do{for(var ar=0,av=aq.children.length;ar<av;++ar){var aw=aq.children[ar],au=aw.chunkSize();if(ax<au){aq=aw;continue outer}ax-=au;at+=aw.height}return at}while(!aq.lines);for(var ar=0;ar<ax;++ar){at+=aq.lines[ar].height}return at}function ad(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}ad.prototype={addChange:function(aq,aw,ar){this.undone.length=0;var at=+new Date,az=this.done[this.done.length-1],ay=az&&az[az.length-1];var av=at-this.time;if(this.compound&&az&&!this.closed){az.push({start:aq,added:aw,old:ar})}else{if(av>400||!ay||this.closed||ay.start>aq+ar.length||ay.start+ay.added<aq){this.done.push([{start:aq,added:aw,old:ar}]);this.closed=false}else{var ax=Math.max(0,ay.start-aq),aA=Math.max(0,(aq+ar.length)-(ay.start+ay.added));for(var au=ax;au>0;--au){ay.old.unshift(ar[au-1])}for(var au=aA;au>0;--au){ay.old.push(ar[ar.length-au])}if(ax){ay.start=aq}ay.added+=aw-(ar.length-ax-aA)}}this.time=at},startCompound:function(){if(!this.compound++){this.closed=true}},endCompound:function(){if(!--this.compound){this.closed=true}}};function A(){Q(this)}function v(aq){if(!aq.stop){aq.stop=A}return aq}function s(aq){if(aq.preventDefault){aq.preventDefault()}else{aq.returnValue=false}}function H(aq){if(aq.stopPropagation){aq.stopPropagation()}else{aq.cancelBubble=true}}function Q(aq){s(aq);H(aq)}O.e_stop=Q;O.e_preventDefault=s;O.e_stopPropagation=H;function p(aq){return aq.target||aq.srcElement}function R(aq){if(aq.which){return aq.which}else{if(aq.button&1){return 1}else{if(aq.button&2){return 3}else{if(aq.button&4){return 2}}}}}function N(ar,at){var aq=ar.override&&ar.override.hasOwnProperty(at);return aq?ar.override[at]:ar[at]}function G(au,at,ar,aq){if(typeof au.addEventListener=="function"){au.addEventListener(at,ar,false);if(aq){return function(){au.removeEventListener(at,ar,false)}}}else{var av=function(aw){ar(aw||window.event)};au.attachEvent("on"+at,av);if(aq){return function(){au.detachEvent("on"+at,av)}}}}O.connect=G;function M(){this.id=null}M.prototype={set:function(aq,ar){clearTimeout(this.id);this.id=setTimeout(ar,aq)}};var aj=O.Pass={toString:function(){return"CodeMirror.Pass"}};var Z=/gecko\/\d{7}/i.test(navigator.userAgent);var W=/MSIE \d/.test(navigator.userAgent);var F=/MSIE [1-7]\b/.test(navigator.userAgent);var I=/MSIE [1-8]\b/.test(navigator.userAgent);var T=W&&document.documentMode==5;var ah=/WebKit\//.test(navigator.userAgent);var c=/Chrome\//.test(navigator.userAgent);var X=/Opera\//.test(navigator.userAgent);var af=/Apple Computer/.test(navigator.vendor);var w=/KHTML\//.test(navigator.userAgent);var ag=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);var U=function(){if(I){return false}var aq=document.createElement("div");return"draggable" in aq||"dragDrop" in aq}();var h=function(){var aq=document.createElement("textarea");aq.value="foo\nbar";if(aq.value.indexOf("\r")>-1){return"\r\n"}return"\n"}();var C=/^$/;if(Z){C=/$'/}else{if(af){C=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/}else{if(c){C=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/}}}function x(at,aq,av){if(aq==null){aq=at.search(/[^\s\u00a0]/);if(aq==-1){aq=at.length}}for(var ar=0,au=0;ar<aq;++ar){if(at.charAt(ar)=="\t"){au+=av-(au%av)}else{++au}}return au}function L(aq){if(aq.currentStyle){return aq.currentStyle}return window.getComputedStyle(aq,null)}function am(ar,aA){var au=ar.ownerDocument.body;var az=0,ay=0,aw=false;for(var aq=ar;aq;aq=aq.offsetParent){var ax=aq.offsetLeft,at=aq.offsetTop;if(aq==au){az+=Math.abs(ax);ay+=Math.abs(at)}else{az+=ax,ay+=at}if(aA&&L(aq).position=="fixed"){aw=true}}var av=aA&&!aw?null:au;for(var aq=ar.parentNode;aq!=av;aq=aq.parentNode){if(aq.scrollLeft!=null){az-=aq.scrollLeft;ay-=aq.scrollTop}}return{left:az,top:ay}}if(document.documentElement.getBoundingClientRect!=null){am=function(au,ar){try{var at=au.getBoundingClientRect();at={top:at.top,left:at.left}}catch(av){at={top:0,left:0}}if(!ar){if(window.pageYOffset==null){var aq=document.documentElement||document.body.parentNode;if(aq.scrollTop==null){aq=document.body}at.top+=aq.scrollTop;at.left+=aq.scrollLeft}else{at.top+=window.pageYOffset;at.left+=window.pageXOffset}}return at}}function B(aq){return aq.textContent||aq.innerText||aq.nodeValue||""}function d(aq){if(K){aq.selectionStart=0;aq.selectionEnd=aq.value.length}else{aq.select()}}function ak(ar,aq){return ar.line==aq.line&&ar.ch==aq.ch}function k(ar,aq){return ar.line<aq.line||(ar.line==aq.line&&ar.ch<aq.ch)}function ai(aq){return{line:aq.line,ch:aq.ch}}var ap=document.createElement("pre");function aa(aq){ap.textContent=aq;return ap.innerHTML}if(aa("a")=="\na"){aa=function(aq){ap.textContent=aq;return ap.innerHTML.slice(1)}}else{if(aa("\t")!="\t"){aa=function(aq){ap.innerHTML="";ap.appendChild(document.createTextNode(aq));return ap.innerHTML}}}O.htmlEscape=aa;function o(au,at){if(!at){return 0}if(!au){return at.length}for(var ar=au.length,aq=at.length;ar>=0&&aq>=0;--ar,--aq){if(au.charAt(ar)!=at.charAt(aq)){break}}return aq+1}function E(au,aq){if(au.indexOf){return au.indexOf(aq)}for(var ar=0,at=au.length;ar<at;++ar){if(au[ar]==aq){return ar}}return -1}function a(aq){return/\w/.test(aq)||aq.toUpperCase()!=aq.toLowerCase()}var J="\n\nb".split(/\n/).length!=3?function(ar){var au=0,aq,at=[];while((aq=ar.indexOf("\n",au))>-1){at.push(ar.slice(au,ar.charAt(aq-1)=="\r"?aq-1:aq));au=aq+1}at.push(ar.slice(au));return at}:function(aq){return aq.split(/\r?\n/)};O.splitLines=J;var al=window.getSelection?function(ar){try{return ar.selectionStart!=ar.selectionEnd}catch(aq){return false}}:function(at){try{var aq=at.ownerDocument.selection.createRange()}catch(ar){}if(!aq||aq.parentElement()!=at){return false}return aq.compareEndPoints("StartToEnd",aq)!=0};O.defineMode("null",function(){return{token:function(aq){aq.skipToEnd()}}});O.defineMIME("text/plain","null");var ac={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};O.keyNames=ac;(function(){for(var aq=0;aq<10;aq++){ac[aq+48]=String(aq)}for(var aq=65;aq<=90;aq++){ac[aq]=String.fromCharCode(aq)}for(var aq=1;aq<=12;aq++){ac[aq+111]=ac[aq+63235]="F"+aq}})();return O})();if(!CodeMirror.modeExtensions){CodeMirror.modeExtensions={}}CodeMirror.defineExtension("getModeExt",function(){var b=CodeMirror.resolveMode(this.getOption("mode")).name;var a=CodeMirror.modeExtensions[b];if(!a){throw new Error("No extensions found for mode "+b)}return a});CodeMirror.defineExtension("getModeExtAtPos",function(b){var a=this.getTokenAt(b);if(a&&a.state&&a.state.mode){return CodeMirror.modeExtensions[a.state.mode=="html"?"htmlmixed":a.state.mode]}else{return this.getModeExt()}});CodeMirror.defineExtension("commentRange",function(a,i,h){var d=this.getModeExtAtPos(this.getCursor());if(a){var c=this.getRange(i,h);this.replaceRange(d.commentStart+this.getRange(i,h)+d.commentEnd,i,h);if(i.line==h.line&&i.ch==h.ch){this.setCursor(i.line,i.ch+d.commentStart.length)}}else{var f=this.getRange(i,h);var e=f.indexOf(d.commentStart);var b=f.lastIndexOf(d.commentEnd);if(e>-1&&b>-1&&b>e){f=f.substr(0,e)+f.substring(e+d.commentStart.length,b)+f.substr(b+d.commentEnd.length)}this.replaceRange(f,i,h)}});CodeMirror.defineExtension("autoIndentRange",function(c,b){var a=this;this.operation(function(){for(var d=c.line;d<=b.line;d++){a.indentLine(d,"smart")}})});CodeMirror.defineExtension("autoFormatRange",function(f,e){var b=this.indexFromPos(f);var d=this.indexFromPos(e);var c=this.getModeExt().autoFormatLineBreaks(this.getValue(),b,d);var a=this;this.operation(function(){a.replaceRange(c,f,e);var k=a.posFromIndex(b).line;var h=a.posFromIndex(b+c.length).line;for(var j=k;j<=h;j++){a.indentLine(j,"smart")}})});CodeMirror.modeExtensions.css={commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(c,a,b){c=c.substring(a,b);return c.replace(new RegExp("(;|\\{|\\})([^\r\n])","g"),"$1\n$2")}};CodeMirror.modeExtensions.javascript={commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],getNonBreakableBlocks:function(f){var e=[new RegExp("for\\s*?\\(([\\s\\S]*?)\\)"),new RegExp("'([\\s\\S]*?)('|$)"),new RegExp('"([\\s\\S]*?)("|$)'),new RegExp("//.*([\r\n]|$)")];var c=new Array();for(var d=0;d<e.length;d++){var b=0;while(b<f.length){var a=f.substr(b).match(e[d]);if(a!=null){c.push({start:b+a.index,end:b+a.index+a[0].length});b+=a.index+Math.max(1,a[0].length)}else{break}}}c.sort(function(i,h){return i.start-h.start});return c},autoFormatLineBreaks:function(j,d,h){j=j.substring(d,h);var b=0;var a=new RegExp("(;|\\{|\\})([^\r\n])","g");var c=this.getNonBreakableBlocks(j);if(c!=null){var f="";for(var e=0;e<c.length;e++){if(c[e].start>b){f+=j.substring(b,c[e].start).replace(a,"$1\n$2");b=c[e].start}if(c[e].start<=b&&c[e].end>=b){f+=j.substring(b,c[e].end);b=c[e].end}}if(b<j.length-1){f+=j.substr(b).replace(a,"$1\n$2")}return f}else{return j.replace(a,"$1\n$2")}}};CodeMirror.modeExtensions.xml={commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">"],autoFormatLineBreaks:function(j,e,f){j=j.substring(e,f);var k=j.split("\n");var h=new RegExp("(^\\s*?<|^[^<]*?)(.+)(>\\s*?$|[^>]*?$)");var c=new RegExp("<","g");var a=new RegExp("(>)([^\r\n])","g");for(var d=0;d<k.length;d++){var b=k[d].match(h);if(b!=null&&b.length>3){k[d]=b[1]+b[2].replace(c,"\n$&").replace(a,"$1\n$2")+b[3];continue}}return k.join("\n")}};CodeMirror.modeExtensions.htmlmixed={commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">",";","\\{","\\}"],getModeInfos:function(l,k){var j=new Array();j[0]={pos:0,modeExt:CodeMirror.modeExtensions.xml,modeName:"xml"};var h=new Array();h[0]={regex:new RegExp("<style[^>]*>([\\s\\S]*?)(</style[^>]*>|$)","i"),modeExt:CodeMirror.modeExtensions.css,modeName:"css"};h[1]={regex:new RegExp("<script[^>]*>([\\s\\S]*?)(<\/script[^>]*>|$)","i"),modeExt:CodeMirror.modeExtensions.javascript,modeName:"javascript"};var c=(typeof(k)!=="undefined"?k:l.length-1);for(var d=0;d<h.length;d++){var e=0;while(e<=c){var b=l.substr(e).match(h[d].regex);if(b!=null){if(b.length>1&&b[1].length>0){var f=e+b.index+b[0].indexOf(b[1]);j.push({pos:f,modeExt:h[d].modeExt,modeName:h[d].modeName});j.push({pos:f+b[1].length,modeExt:j[0].modeExt,modeName:j[0].modeName});e+=b.index+b[0].length;continue}else{e+=b.index+Math.max(b[0].length,1)}}else{break}}}j.sort(function a(m,i){return m.pos-i.pos});return j},autoFormatLineBreaks:function(m,e,f){var h=this.getModeInfos(m);var c=new RegExp("^\\s*?\n");var l=new RegExp("\n\\s*?$");var j="";if(h.length>1){for(var d=1;d<=h.length;d++){var b=h[d-1].pos;var a=(d<h.length?h[d].pos:f);if(b>=f){break}if(b<e){if(a<=e){continue}b=e}if(a>f){a=f}var k=m.substring(b,a);if(h[d-1].modeName!="xml"){if(!c.test(k)&&b>0){k="\n"+k}if(!l.test(k)&&a<m.length-1){k+="\n"}}j+=h[d-1].modeExt.autoFormatLineBreaks(k)}}else{j=h[0].modeExt.autoFormatLineBreaks(m.substring(e,f))}return j}};(function(){function a(b,c){var e=b.getWrapperElement();var d=e.insertBefore(document.createElement("div"),e.firstChild);d.className="CodeMirror-dialog";d.innerHTML="<div>"+c+"</div>";return d}CodeMirror.defineExtension("openDialog",function(b,h){var c=a(this,b);var d=false,f=this;function i(){if(d){return}d=true;c.parentNode.removeChild(c)}var e=c.getElementsByTagName("input")[0];if(e){CodeMirror.connect(e,"keydown",function(j){if(j.keyCode==13||j.keyCode==27){CodeMirror.e_stop(j);i();f.focus();if(j.keyCode==13){h(e.value)}}});e.focus();CodeMirror.connect(e,"blur",i)}return i});CodeMirror.defineExtension("openConfirm",function(m,d){var c=a(this,m);var k=c.getElementsByTagName("button");var e=false,j=this,h=1;function n(){if(e){return}e=true;c.parentNode.removeChild(c);j.focus()}k[0].focus();for(var f=0;f<k.length;++f){var l=k[f];(function(b){CodeMirror.connect(l,"click",function(i){CodeMirror.e_preventDefault(i);n();if(b){b(j)}})})(d[f]);CodeMirror.connect(l,"blur",function(){--h;setTimeout(function(){if(h<=0){n()}},200)});CodeMirror.connect(l,"focus",function(){++h})}})})();(function(){function a(b,e,h,d){this.atOccurrence=false;this.cm=b;if(d==null&&typeof e=="string"){d=false}h=h?b.clipPos(h):{line:0,ch:0};this.pos={from:h,to:h};if(typeof e!="string"){this.matches=function(k,o){if(k){var i=b.getLine(o.line).slice(0,o.ch),j=i.match(e),n=0;while(j){var l=i.indexOf(j[0]);n+=l;i=i.slice(l+1);var m=i.match(e);if(m){j=m}else{break}n++}}else{var i=b.getLine(o.line).slice(o.ch),j=i.match(e),n=j&&o.ch+i.indexOf(j[0])}if(j){return{from:{line:o.line,ch:n},to:{line:o.line,ch:n+j[0].length},match:j}}}}else{if(d){e=e.toLowerCase()}var c=d?function(i){return i.toLowerCase()}:function(i){return i};var f=e.split("\n");if(f.length==1){this.matches=function(l,m){var j=c(b.getLine(m.line)),i=e.length,k;if(l?(m.ch>=i&&(k=j.lastIndexOf(e,m.ch-i))!=-1):(k=j.indexOf(e,m.ch))!=-1){return{from:{line:m.line,ch:k},to:{line:m.line,ch:k+i}}}}}else{this.matches=function(n,p){var o=p.line,q=(n?f.length-1:0),m=f[q],r=c(b.getLine(o));var j=(n?r.indexOf(m)+m.length:r.lastIndexOf(m));if(n?j>=p.ch||j!=m.length:j<=p.ch||j!=r.length-m.length){return}for(;;){if(n?!o:o==b.lineCount()-1){return}r=c(b.getLine(o+=n?-1:1));m=f[n?--q:++q];if(q>0&&q<f.length-1){if(r!=m){return}else{continue}}var k=(n?r.lastIndexOf(m):r.indexOf(m)+m.length);if(n?k!=r.length-m.length:k!=m.length){return}var i={line:p.line,ch:j},l={line:o,ch:k};return{from:n?l:i,to:n?i:l}}}}}}a.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(d){var c=this,f=this.cm.clipPos(d?this.pos.from:this.pos.to);function b(h){var i={line:h,ch:0};c.pos={from:i,to:i};c.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(d,f)){this.atOccurrence=true;return this.pos.match||true}if(d){if(!f.line){return b(0)}f={line:f.line-1,ch:this.cm.getLine(f.line-1).length}}else{var e=this.cm.lineCount();if(f.line==e-1){return b(e)}f={line:f.line+1,ch:0}}}},from:function(){if(this.atOccurrence){return this.pos.from}},to:function(){if(this.atOccurrence){return this.pos.to}},replace:function(c){var b=this;if(this.atOccurrence){b.pos.to=this.cm.replaceRange(c,b.pos.from,b.pos.to)}}};CodeMirror.defineExtension("getSearchCursor",function(c,d,b){return new a(this,c,d,b)})})();CodeMirror.defineMode("clike",function(i,d){var e=i.indentUnit,f=d.keywords||{},l=d.blockKeywords||{},h=d.atoms||{},q=d.hooks||{},b=d.multiLineStrings;var k=/[+\-*&%=<>!?|\/]/;var n;function c(v,t){var r=v.next();if(q[r]){var s=q[r](v,t);if(s!==false){return s}}if(r=='"'||r=="'"){t.tokenize=p(r);return t.tokenize(v,t)}if(/[\[\]{}\(\),;\:\.]/.test(r)){n=r;return null}if(/\d/.test(r)){v.eatWhile(/[\w\.]/);return"number"}if(r=="/"){if(v.eat("*")){t.tokenize=a;return a(v,t)}if(v.eat("/")){v.skipToEnd();return"comment"}}if(k.test(r)){v.eatWhile(k);return"operator"}v.eatWhile(/[\w\$_]/);var u=v.current();if(f.propertyIsEnumerable(u)){if(l.propertyIsEnumerable(u)){n="newstatement"}return"keyword"}if(h.propertyIsEnumerable(u)){return"atom"}return"word"}function p(r){return function(v,u){var w=false,t,s=false;while((t=v.next())!=null){if(t==r&&!w){s=true;break}w=!w&&t=="\\"}if(s||!(w||b)){u.tokenize=null}return"string"}}function a(u,t){var r=false,s;while(s=u.next()){if(s=="/"&&r){t.tokenize=null;break}r=(s=="*")}return"comment"}function o(v,r,s,u,t){this.indented=v;this.column=r;this.type=s;this.align=u;this.prev=t}function j(t,r,s){return t.context=new o(t.indented,r,s,null,t.context)}function m(s){var r=s.context.type;if(r==")"||r=="]"||r=="}"){s.indented=s.context.indented}return s.context=s.context.prev}return{startState:function(r){return{tokenize:null,context:new o((r||0)-e,0,"top",false),indented:0,startOfLine:true}},token:function(u,t){var r=t.context;if(u.sol()){if(r.align==null){r.align=false}t.indented=u.indentation();t.startOfLine=true}if(u.eatSpace()){return null}n=null;var s=(t.tokenize||c)(u,t);if(s=="comment"||s=="meta"){return s}if(r.align==null){r.align=true}if((n==";"||n==":")&&r.type=="statement"){m(t)}else{if(n=="{"){j(t,u.column(),"}")}else{if(n=="["){j(t,u.column(),"]")}else{if(n=="("){j(t,u.column(),")")}else{if(n=="}"){while(r.type=="statement"){r=m(t)}if(r.type=="}"){r=m(t)}while(r.type=="statement"){r=m(t)}}else{if(n==r.type){m(t)}else{if(r.type=="}"||r.type=="top"||(r.type=="statement"&&n=="newstatement")){j(t,u.column(),"statement")}}}}}}}t.startOfLine=false;return s},indent:function(v,t){if(v.tokenize!=c&&v.tokenize!=null){return 0}var r=v.context,u=t&&t.charAt(0);if(r.type=="statement"&&u=="}"){r=r.prev}var s=u==r.type;if(r.type=="statement"){return r.indented+(u=="{"?0:e)}else{if(r.align){return r.column+(s?0:1)}else{return r.indented+(s?0:e)}}},electricChars:"{}"}});(function(){function c(j){var f={},h=j.split(" ");for(var e=0;e<h.length;++e){f[h[e]]=true}return f}var a="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";function d(f,e){if(!e.startOfLine){return false}f.skipToEnd();return"meta"}function b(h,f){var e;while((e=h.next())!=null){if(e=='"'&&!h.eat('"')){f.tokenize=null;break}}return"string"}CodeMirror.defineMIME("text/x-csrc",{name:"clike",keywords:c(a),blockKeywords:c("case do else for if switch while struct"),atoms:c("null"),hooks:{"#":d}});CodeMirror.defineMIME("text/x-c++src",{name:"clike",keywords:c(a+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:c("catch class do else finally for if struct switch try while"),atoms:c("true false null"),hooks:{"#":d}});CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:c("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:c("catch class do else finally for if switch try while"),atoms:c("true false null"),hooks:{"@":function(f,e){f.eatWhile(/[\w\$_]/);return"meta"}}});CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:c("abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:c("catch class do else finally for foreach if struct switch try while"),atoms:c("true false null"),hooks:{"@":function(f,e){if(f.eat('"')){e.tokenize=b;return b(f,e)}f.eatWhile(/[\w\$_]/);return"meta"}}});CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:c("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:c("catch class do else finally for forSome if match switch try while"),atoms:c("true false null"),hooks:{"@":function(f,e){f.eatWhile(/[\w\$_]/);return"meta"}}})}());CodeMirror.defineMode("css",function(e){var d=e.indentUnit,f;function c(j,k){f=k;return j}function i(l,k){var j=l.next();if(j=="@"){l.eatWhile(/[\w\\\-]/);return c("meta",l.current())}else{if(j=="/"&&l.eat("*")){k.tokenize=h;return h(l,k)}else{if(j=="<"&&l.eat("!")){k.tokenize=b;return b(l,k)}else{if(j=="="){c(null,"compare")}else{if((j=="~"||j=="|")&&l.eat("=")){return c(null,"compare")}else{if(j=='"'||j=="'"){k.tokenize=a(j);return k.tokenize(l,k)}else{if(j=="#"){l.eatWhile(/[\w\\\-]/);return c("atom","hash")}else{if(j=="!"){l.match(/^\s*\w*/);return c("keyword","important")}else{if(/\d/.test(j)){l.eatWhile(/[\w.%]/);return c("number","unit")}else{if(/[,.+>*\/]/.test(j)){return c(null,"select-op")}else{if(/[;{}:\[\]]/.test(j)){return c(null,j)}else{l.eatWhile(/[\w\\\-]/);return c("variable","variable")}}}}}}}}}}}}function h(m,l){var j=false,k;while((k=m.next())!=null){if(j&&k=="/"){l.tokenize=i;break}j=(k=="*")}return c("comment","comment")}function b(m,l){var j=0,k;while((k=m.next())!=null){if(j>=2&&k==">"){l.tokenize=i;break}j=(k=="-")?j+1:0}return c("comment","comment")}function a(j){return function(m,l){var n=false,k;while((k=m.next())!=null){if(k==j&&!n){break}n=!n&&k=="\\"}if(!n){l.tokenize=i}return c("string","string")}}return{startState:function(j){return{tokenize:i,baseIndent:j||0,stack:[]}},token:function(m,l){if(m.eatSpace()){return null}var k=l.tokenize(m,l);var j=l.stack[l.stack.length-1];if(f=="hash"&&j!="rule"){k="string-2"}else{if(k=="variable"){if(j=="rule"){k="number"}else{if(!j||j=="@media{"){k="tag"}}}}if(j=="rule"&&/^[\{\};]$/.test(f)){l.stack.pop()}if(f=="{"){if(j=="@media"){l.stack[l.stack.length-1]="@media{"}else{l.stack.push("{")}}else{if(f=="}"){l.stack.pop()}else{if(f=="@media"){l.stack.push("@media")}else{if(j=="{"&&f!="comment"){l.stack.push("rule")}}}}return k},indent:function(k,j){var l=k.stack.length;if(/^\}/.test(j)){l-=k.stack[k.stack.length-1]=="rule"?2:1}return k.baseIndent+l*d},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");CodeMirror.defineMode("javascript",function(p,L){var v=p.indentUnit;var h=L.json;var b=function(){function X(aa){return{type:aa,style:"keyword"}}var U=X("keyword a"),Z=X("keyword b"),Y=X("keyword c");var V=X("operator"),W={type:"atom",style:"atom"};return{"if":U,"while":U,"with":U,"else":Z,"do":Z,"try":Z,"finally":Z,"return":Y,"break":Y,"continue":Y,"new":Y,"delete":Y,"throw":Y,"var":X("var"),"const":X("var"),let:X("var"),"function":X("function"),"catch":X("catch"),"for":X("for"),"switch":X("switch"),"case":X("case"),"default":X("default"),"in":V,"typeof":V,"instanceof":V,"true":W,"false":W,"null":W,"undefined":W,"NaN":W,"Infinity":W}}();var k=/[+\-*&%=<>!?|]/;function S(W,V,U){V.tokenize=U;return U(W,V)}function f(W,U){var X=false,V;while((V=W.next())!=null){if(V==U&&!X){return false}X=!X&&V=="\\"}return X}var T,o;function B(W,V,U){T=W;o=U;return V}function N(Y,W){var U=Y.next();if(U=='"'||U=="'"){return S(Y,W,z(U))}else{if(/[\[\]{}\(\),;\:\.]/.test(U)){return B(U)}else{if(U=="0"&&Y.eat(/x/i)){Y.eatWhile(/[\da-f]/i);return B("number","number")}else{if(/\d/.test(U)||U=="-"&&Y.eat(/\d/)){Y.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return B("number","number")}else{if(U=="/"){if(Y.eat("*")){return S(Y,W,Q)}else{if(Y.eat("/")){Y.skipToEnd();return B("comment","comment")}else{if(W.reAllowed){f(Y,"/");Y.eatWhile(/[gimy]/);return B("regexp","string-2")}else{Y.eatWhile(k);return B("operator",null,Y.current())}}}}else{if(U=="#"){Y.skipToEnd();return B("error","error")}else{if(k.test(U)){Y.eatWhile(k);return B("operator",null,Y.current())}else{Y.eatWhile(/[\w\$_]/);var X=Y.current(),V=b.propertyIsEnumerable(X)&&b[X];return(V&&W.kwAllowed)?B(V.type,V.style,X):B("variable","variable",X)}}}}}}}}function z(U){return function(W,V){if(!f(W,U)){V.tokenize=N}return B("string","string")}}function Q(X,W){var U=false,V;while(V=X.next()){if(V=="/"&&U){W.tokenize=N;break}U=(V=="*")}return B("comment","comment")}var l={atom:true,number:true,variable:true,string:true,regexp:true};function C(Z,U,V,Y,W,X){this.indented=Z;this.column=U;this.type=V;this.prev=W;this.info=X;if(Y!=null){this.align=Y}}function x(W,V){for(var U=W.localVars;U;U=U.next){if(U.name==V){return true}}}function r(Y,W,V,X,Z){var aa=Y.cc;u.state=Y;u.stream=Z;u.marked=null,u.cc=aa;if(!Y.lexical.hasOwnProperty("align")){Y.lexical.align=true}while(true){var U=aa.length?aa.pop():h?y:w;if(U(V,X)){while(aa.length&&aa[aa.length-1].lex){aa.pop()()}if(u.marked){return u.marked}if(V=="variable"&&x(Y,X)){return"variable-2"}return W}}}var u={state:null,column:null,marked:null,cc:null};function a(){for(var U=arguments.length-1;U>=0;U--){u.cc.push(arguments[U])}}function E(){a.apply(null,arguments);return true}function M(V){var W=u.state;if(W.context){u.marked="def";for(var U=W.localVars;U;U=U.next){if(U.name==V){return}}W.localVars={name:V,next:W.localVars}}}var s={name:"this",next:{name:"arguments"}};function D(){if(!u.state.context){u.state.localVars=s}u.state.context={prev:u.state.context,vars:u.state.localVars}}function F(){u.state.localVars=u.state.context.vars;u.state.context=u.state.context.prev}function O(U,W){var V=function(){var X=u.state;X.lexical=new C(X.indented,u.stream.column(),U,null,X.lexical,W)};V.lex=true;return V}function q(){var U=u.state;if(U.lexical.prev){if(U.lexical.type==")"){U.indented=U.lexical.indented}U.lexical=U.lexical.prev}}q.lex=true;function R(V){return function U(W){if(W==V){return E()}else{if(V==";"){return a()}else{return E(arguments.callee)}}}}function w(U){if(U=="var"){return E(O("vardef"),I,R(";"),q)}if(U=="keyword a"){return E(O("form"),y,w,q)}if(U=="keyword b"){return E(O("form"),w,q)}if(U=="{"){return E(O("}"),n,q)}if(U==";"){return E()}if(U=="function"){return E(P)}if(U=="for"){return E(O("form"),R("("),O(")"),e,R(")"),q,w,q)}if(U=="variable"){return E(O("stat"),A)}if(U=="switch"){return E(O("form"),y,O("}","switch"),R("{"),n,q,q)}if(U=="case"){return E(y,R(":"))}if(U=="default"){return E(R(":"))}if(U=="catch"){return E(O("form"),D,R("("),G,R(")"),w,q,F)}return a(O("stat"),y,R(";"),q)}function y(U){if(l.hasOwnProperty(U)){return E(m)}if(U=="function"){return E(P)}if(U=="keyword c"){return E(t)}if(U=="("){return E(O(")"),t,R(")"),q,m)}if(U=="operator"){return E(y)}if(U=="["){return E(O("]"),j(y,"]"),q,m)}if(U=="{"){return E(O("}"),j(K,"}"),q,m)}return E()}function t(U){if(U.match(/[;\}\)\],]/)){return a()}return a(y)}function m(U,V){if(U=="operator"&&/\+\+|--/.test(V)){return E(m)}if(U=="operator"||U==":"){return E(y)}if(U==";"){return}if(U=="("){return E(O(")"),j(y,")"),q,m)}if(U=="."){return E(i,m)}if(U=="["){return E(O("]"),y,R("]"),q,m)}}function A(U){if(U==":"){return E(q,w)}return a(m,R(";"),q)}function i(U){if(U=="variable"){u.marked="property";return E()}}function K(U){if(U=="variable"){u.marked="property"}if(l.hasOwnProperty(U)){return E(R(":"),y)}}function j(W,V){function U(Y){if(Y==","){return E(W,U)}if(Y==V){return E()}return E(R(V))}return function X(Y){if(Y==V){return E()}else{return a(W,U)}}}function n(U){if(U=="}"){return E()}return a(w,n)}function I(U,V){if(U=="variable"){M(V);return E(H)}return E()}function H(U,V){if(V=="="){return E(y,H)}if(U==","){return E(I)}}function e(U){if(U=="var"){return E(I,d)}if(U==";"){return a(d)}if(U=="variable"){return E(J)}return a(d)}function J(U,V){if(V=="in"){return E(y)}return E(m,d)}function d(U,V){if(U==";"){return E(c)}if(V=="in"){return E(y)}return E(y,R(";"),c)}function c(U){if(U!=")"){E(y)}}function P(U,V){if(U=="variable"){M(V);return E(P)}if(U=="("){return E(O(")"),D,j(G,")"),q,w,F)}}function G(U,V){if(U=="variable"){M(V);return E()}}return{startState:function(U){return{tokenize:N,reAllowed:true,kwAllowed:true,cc:[],lexical:new C((U||0)-v,0,"block",false),localVars:L.localVars,context:L.localVars&&{vars:L.localVars},indented:0}},token:function(W,V){if(W.sol()){if(!V.lexical.hasOwnProperty("align")){V.lexical.align=false}V.indented=W.indentation()}if(W.eatSpace()){return null}var U=V.tokenize(W,V);if(T=="comment"){return U}V.reAllowed=!!(T=="operator"||T=="keyword c"||T.match(/^[\[{}\(,;:]$/));V.kwAllowed=T!=".";return r(V,U,T,o,W)},indent:function(Z,X){if(Z.tokenize!=N){return 0}var Y=X&&X.charAt(0),V=Z.lexical;if(V.type=="stat"&&Y=="}"){V=V.prev}var W=V.type,U=Y==W;if(W=="vardef"){return V.indented+4}else{if(W=="form"&&Y=="{"){return V.indented}else{if(W=="stat"||W=="form"){return V.indented+v}else{if(V.info=="switch"&&!U){return V.indented+(/^(?:case|default)\b/.test(X)?v:2*v)}else{if(V.align){return V.column+(U?0:1)}else{return V.indented+(U?0:v)}}}}}},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});(function(){function c(h){var e={},f=h.split(" ");for(var d=0;d<f.length;++d){e[f[d]]=true}return e}function a(d){return function(f,e){if(f.match(d)){e.tokenize=null}else{f.skipToEnd()}return"string"}}var b={name:"clike",keywords:c("abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent"),blockKeywords:c("catch do else elseif for foreach if switch try while"),atoms:c("true false null TRUE FALSE NULL"),multiLineStrings:true,hooks:{"$":function(e,d){e.eatWhile(/[\w\$_]/);return"variable-2"},"<":function(e,d){if(e.match(/<</)){e.eatWhile(/[\w\.]/);d.tokenize=a(e.current().slice(3));return d.tokenize(e,d)}return false},"#":function(e,d){while(!e.eol()&&!e.match("?>",false)){e.next()}return"comment"},"/":function(e,d){if(e.eat("/")){while(!e.eol()&&!e.match("?>",false)){e.next()}return"comment"}return false}}};CodeMirror.defineMode("php",function(e,i){var j=CodeMirror.getMode(e,{name:"xml",htmlMode:true});var k=CodeMirror.getMode(e,"javascript");var f=CodeMirror.getMode(e,"css");var h=CodeMirror.getMode(e,b);function d(q,o){var n=o.mode=="php";if(q.sol()&&o.pending!='"'){o.pending=null}if(o.curMode==j){if(q.match(/^<\?\w*/)){o.curMode=h;o.curState=o.php;o.curClose="?>";o.mode="php";return"meta"}if(o.pending=='"'){while(!q.eol()&&q.next()!='"'){}var m="string"}else{if(o.pending&&q.pos<o.pending.end){q.pos=o.pending.end;var m=o.pending.style}else{var m=j.token(q,o.curState)}}o.pending=null;var p=q.current(),l=p.search(/<\?/);if(l!=-1){if(m=="string"&&/\"$/.test(p)&&!/\?>/.test(p)){o.pending='"'}else{o.pending={end:q.pos,style:m}}q.backUp(p.length-l)}else{if(m=="tag"&&q.current()==">"&&o.curState.context){if(/^script$/i.test(o.curState.context.tagName)){o.curMode=k;o.curState=k.startState(j.indent(o.curState,""));o.curClose=/^<\/\s*script\s*>/i;o.mode="javascript"}else{if(/^style$/i.test(o.curState.context.tagName)){o.curMode=f;o.curState=f.startState(j.indent(o.curState,""));o.curClose=/^<\/\s*style\s*>/i;o.mode="css"}}}}return m}else{if((!n||o.php.tokenize==null)&&q.match(o.curClose,n)){o.curMode=j;o.curState=o.html;o.curClose=null;o.mode="html";if(n){return"meta"}else{return d(q,o)}}else{return o.curMode.token(q,o.curState)}}}return{startState:function(){var l=j.startState();return{html:l,php:h.startState(),curMode:i.startOpen?h:j,curState:i.startOpen?h.startState():l,curClose:i.startOpen?/^\?>/:null,mode:i.startOpen?"php":"html",pending:null}},copyState:function(o){var m=o.html,n=CodeMirror.copyState(j,m),q=o.php,l=CodeMirror.copyState(h,q),p;if(o.curState==m){p=n}else{if(o.curState==q){p=l}else{p=CodeMirror.copyState(o.curMode,o.curState)}}return{html:n,php:l,curMode:o.curMode,curState:p,curClose:o.curClose,mode:o.mode,pending:o.pending}},token:d,indent:function(m,l){if((m.curMode!=h&&/^\s*<\//.test(l))||(m.curMode==h&&/^\?>/.test(l))){return j.indent(m.html,l)}return m.curMode.indent(m.curState,l)},electricChars:"/{}:"}},"xml","clike","javascript","css");CodeMirror.defineMIME("application/x-httpd-php","php");CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:true});CodeMirror.defineMIME("text/x-php",b)})();CodeMirror.defineMode("ruby",function(k,h){function b(s){var r={};for(var p=0,q=s.length;p<q;++p){r[s[p]]=true}return r}var i=b(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload"]);var j=b(["def","class","case","for","while","do","module","then","catch","loop","proc","begin"]);var l=b(["end","until"]);var c={"[":"]","{":"}","(":")"};var m;function a(q,r,p){p.tokenize.push(q);return q(r,p)}function e(u,s){m=null;if(u.sol()&&u.match("=begin")&&u.eol()){s.tokenize.push(d);return"comment"}if(u.eatSpace()){return null}var r=u.next(),p;if(r=="`"||r=="'"||r=='"'||(r=="/"&&!u.eol()&&u.peek()!=" ")){return a(o(r,"string",r=='"'||r=="`"),u,s)}else{if(r=="%"){var q,v=false;if(u.eat("s")){q="atom"}else{if(u.eat(/[WQ]/)){q="string";v=true}else{if(u.eat(/[wxqr]/)){q="string"}}}var t=u.eat(/[^\w\s]/);if(!t){return"operator"}if(c.propertyIsEnumerable(t)){t=c[t]}return a(o(t,q,v,true),u,s)}else{if(r=="#"){u.skipToEnd();return"comment"}else{if(r=="<"&&(p=u.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/))){return a(f(p[1]),u,s)}else{if(r=="0"){if(u.eat("x")){u.eatWhile(/[\da-fA-F]/)}else{if(u.eat("b")){u.eatWhile(/[01]/)}else{u.eatWhile(/[0-7]/)}}return"number"}else{if(/\d/.test(r)){u.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/);return"number"}else{if(r=="?"){while(u.match(/^\\[CM]-/)){}if(u.eat("\\")){u.eatWhile(/\w/)}else{u.next()}return"string"}else{if(r==":"){if(u.eat("'")){return a(o("'","atom",false),u,s)}if(u.eat('"')){return a(o('"',"atom",true),u,s)}u.eatWhile(/[\w\?]/);return"atom"}else{if(r=="@"){u.eat("@");u.eatWhile(/[\w\?]/);return"variable-2"}else{if(r=="$"){u.next();u.eatWhile(/[\w\?]/);return"variable-3"}else{if(/\w/.test(r)){u.eatWhile(/[\w\?]/);if(u.eat(":")){return"atom"}return"ident"}else{if(r=="|"&&(s.varList||s.lastTok=="{"||s.lastTok=="do")){m="|";return null}else{if(/[\(\)\[\]{}\\;]/.test(r)){m=r;return null}else{if(r=="-"&&u.eat(">")){return"arrow"}else{if(/[=+\-\/*:\.^%<>~|]/.test(r)){u.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"operator"}else{return null}}}}}}}}}}}}}}}}function n(){var p=1;return function(r,q){if(r.peek()=="}"){p--;if(p==0){q.tokenize.pop();return q.tokenize[q.tokenize.length-1](r,q)}}else{if(r.peek()=="{"){p++}}return e(r,q)}}function o(p,q,s,r){return function(v,u){var w=false,t;while((t=v.next())!=null){if(t==p&&(r||!w)){u.tokenize.pop();break}if(s&&t=="#"&&!w&&v.eat("{")){u.tokenize.push(n(arguments.callee));break}w=!w&&t=="\\"}return q}}function f(p){return function(r,q){if(r.match(p)){q.tokenize.pop()}else{r.skipToEnd()}return"string"}}function d(q,p){if(q.sol()&&q.match("=end")&&q.eol()){p.tokenize.pop()}q.skipToEnd();return"comment"}return{startState:function(){return{tokenize:[e],indented:0,context:{type:"top",indented:-k.indentUnit},continuedLine:false,lastTok:null,varList:false}},token:function(t,q){if(t.sol()){q.indented=t.indentation()}var p=q.tokenize[q.tokenize.length-1](t,q),s;if(p=="ident"){var r=t.current();p=i.propertyIsEnumerable(t.current())?"keyword":/^[A-Z]/.test(r)?"tag":(q.lastTok=="def"||q.lastTok=="class"||q.varList)?"def":"variable";if(j.propertyIsEnumerable(r)){s="indent"}else{if(l.propertyIsEnumerable(r)){s="dedent"}else{if((r=="if"||r=="unless")&&t.column()==t.indentation()){s="indent"}}}}if(m||(p&&p!="comment")){q.lastTok=r||m||p}if(m=="|"){q.varList=!q.varList}if(s=="indent"||/[\(\[\{]/.test(m)){q.context={prev:q.context,type:m||p,indented:q.indented}}else{if((s=="dedent"||/[\)\]\}]/.test(m))&&q.context.prev){q.context=q.context.prev}}if(t.eol()){q.continuedLine=(m=="\\"||p=="operator")}return p},indent:function(t,r){if(t.tokenize[t.tokenize.length-1]!=e){return 0}var s=r&&r.charAt(0);var q=t.context;var p=q.type==c[s]||q.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(r);return q.indented+(p?0:k.indentUnit)+(t.continuedLine?k.indentUnit:0)},electricChars:"}de"}});CodeMirror.defineMIME("text/x-ruby","ruby");CodeMirror.defineMode("htmlmixed",function(e,b){var h=CodeMirror.getMode(e,{name:"xml",htmlMode:true});var a=CodeMirror.getMode(e,"javascript");var j=CodeMirror.getMode(e,"css");function c(m,l){var k=h.token(m,l.htmlState);if(k=="tag"&&m.current()==">"&&l.htmlState.context){if(/^script$/i.test(l.htmlState.context.tagName)){l.token=i;l.localState=a.startState(h.indent(l.htmlState,""));l.mode="javascript"}else{if(/^style$/i.test(l.htmlState.context.tagName)){l.token=d;l.localState=j.startState(h.indent(l.htmlState,""));l.mode="css"}}}return k}function f(o,k,l){var n=o.current();var m=n.search(k);if(m>-1){o.backUp(n.length-m)}return l}function i(l,k){if(l.match(/^<\/\s*script\s*>/i,false)){k.token=c;k.localState=null;k.mode="html";return c(l,k)}return f(l,/<\/\s*script\s*>/,a.token(l,k.localState))}function d(l,k){if(l.match(/^<\/\s*style\s*>/i,false)){k.token=c;k.localState=null;k.mode="html";return c(l,k)}return f(l,/<\/\s*style\s*>/,j.token(l,k.localState))}return{startState:function(){var k=h.startState();return{token:c,localState:null,mode:"html",htmlState:k}},copyState:function(l){if(l.localState){var k=CodeMirror.copyState(l.token==d?j:a,l.localState)}return{token:l.token,localState:k,mode:l.mode,htmlState:CodeMirror.copyState(h,l.htmlState)}},token:function(l,k){return k.token(l,k)},indent:function(l,k){if(l.token==c||/^\s*<\//.test(k)){return h.indent(l.htmlState,k)}else{if(l.token==i){return a.indent(l.localState,k)}else{return j.indent(l.localState,k)}}},compareStates:function(l,k){if(l.mode!=k.mode){return false}if(l.localState){return CodeMirror.Pass}return h.compareStates(l.htmlState,k.htmlState)},electricChars:"/{}:"}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed");CodeMirror.defineMode("mysql",function(h){var e=h.indentUnit;var l;function c(n){return new RegExp("^(?:"+n.join("|")+")$","i")}var a=c(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","isblank","isliteral","union","a"]);var f=c([("ACCESSIBLE"),("ALTER"),("AS"),("BEFORE"),("BINARY"),("BY"),("CASE"),("CHARACTER"),("COLUMN"),("CONTINUE"),("CROSS"),("CURRENT_TIMESTAMP"),("DATABASE"),("DAY_MICROSECOND"),("DEC"),("DEFAULT"),("DESC"),("DISTINCT"),("DOUBLE"),("EACH"),("ENCLOSED"),("EXIT"),("FETCH"),("FLOAT8"),("FOREIGN"),("GRANT"),("HIGH_PRIORITY"),("HOUR_SECOND"),("IN"),("INNER"),("INSERT"),("INT2"),("INT8"),("INTO"),("JOIN"),("KILL"),("LEFT"),("LINEAR"),("LOCALTIME"),("LONG"),("LOOP"),("MATCH"),("MEDIUMTEXT"),("MINUTE_SECOND"),("NATURAL"),("NULL"),("OPTIMIZE"),("OR"),("OUTER"),("PRIMARY"),("RANGE"),("READ_WRITE"),("REGEXP"),("REPEAT"),("RESTRICT"),("RIGHT"),("SCHEMAS"),("SENSITIVE"),("SHOW"),("SPECIFIC"),("SQLSTATE"),("SQL_CALC_FOUND_ROWS"),("STARTING"),("TERMINATED"),("TINYINT"),("TRAILING"),("UNDO"),("UNLOCK"),("USAGE"),("UTC_DATE"),("VALUES"),("VARCHARACTER"),("WHERE"),("WRITE"),("ZEROFILL"),("ALL"),("AND"),("ASENSITIVE"),("BIGINT"),("BOTH"),("CASCADE"),("CHAR"),("COLLATE"),("CONSTRAINT"),("CREATE"),("CURRENT_TIME"),("CURSOR"),("DAY_HOUR"),("DAY_SECOND"),("DECLARE"),("DELETE"),("DETERMINISTIC"),("DIV"),("DUAL"),("ELSEIF"),("EXISTS"),("FALSE"),("FLOAT4"),("FORCE"),("FULLTEXT"),("HAVING"),("HOUR_MINUTE"),("IGNORE"),("INFILE"),("INSENSITIVE"),("INT1"),("INT4"),("INTERVAL"),("ITERATE"),("KEYS"),("LEAVE"),("LIMIT"),("LOAD"),("LOCK"),("LONGTEXT"),("MASTER_SSL_VERIFY_SERVER_CERT"),("MEDIUMINT"),("MINUTE_MICROSECOND"),("MODIFIES"),("NO_WRITE_TO_BINLOG"),("ON"),("OPTIONALLY"),("OUT"),("PRECISION"),("PURGE"),("READS"),("REFERENCES"),("RENAME"),("REQUIRE"),("REVOKE"),("SCHEMA"),("SELECT"),("SET"),("SPATIAL"),("SQLEXCEPTION"),("SQL_BIG_RESULT"),("SSL"),("TABLE"),("TINYBLOB"),("TO"),("TRUE"),("UNIQUE"),("UPDATE"),("USING"),("UTC_TIMESTAMP"),("VARCHAR"),("WHEN"),("WITH"),("YEAR_MONTH"),("ADD"),("ANALYZE"),("ASC"),("BETWEEN"),("BLOB"),("CALL"),("CHANGE"),("CHECK"),("CONDITION"),("CONVERT"),("CURRENT_DATE"),("CURRENT_USER"),("DATABASES"),("DAY_MINUTE"),("DECIMAL"),("DELAYED"),("DESCRIBE"),("DISTINCTROW"),("DROP"),("ELSE"),("ESCAPED"),("EXPLAIN"),("FLOAT"),("FOR"),("FROM"),("GROUP"),("HOUR_MICROSECOND"),("IF"),("INDEX"),("INOUT"),("INT"),("INT3"),("INTEGER"),("IS"),("KEY"),("LEADING"),("LIKE"),("LINES"),("LOCALTIMESTAMP"),("LONGBLOB"),("LOW_PRIORITY"),("MEDIUMBLOB"),("MIDDLEINT"),("MOD"),("NOT"),("NUMERIC"),("OPTION"),("ORDER"),("OUTFILE"),("PROCEDURE"),("READ"),("REAL"),("RELEASE"),("REPLACE"),("RETURN"),("RLIKE"),("SECOND_MICROSECOND"),("SEPARATOR"),("SMALLINT"),("SQL"),("SQLWARNING"),("SQL_SMALL_RESULT"),("STRAIGHT_JOIN"),("THEN"),("TINYTEXT"),("TRIGGER"),("UNION"),("UNSIGNED"),("USE"),("UTC_TIME"),("VARBINARY"),("VARYING"),("WHILE"),("XOR"),("FULL"),("COLUMNS"),("MIN"),("MAX"),("STDEV"),("COUNT")]);var d=/[*+\-<>=&|]/;function b(r,p){var o=r.next();l=null;if(o=="$"||o=="?"){r.match(/^[\w\d]*/);return"variable-2"}else{if(o=="<"&&!r.match(/^[\s\u00a0=]/,false)){r.match(/^[^\s\u00a0>]*>?/);return"atom"}else{if(o=='"'||o=="'"){p.tokenize=m(o);return p.tokenize(r,p)}else{if(o=="`"){p.tokenize=j(o);return p.tokenize(r,p)}else{if(/[{}\(\),\.;\[\]]/.test(o)){l=o;return null}else{if(o=="-"){ch2=r.next();if(ch2=="-"){r.skipToEnd();return"comment"}}else{if(d.test(o)){r.eatWhile(d);return null}else{if(o==":"){r.eatWhile(/[\w\d\._\-]/);return"atom"}else{r.eatWhile(/[_\w\d]/);if(r.eat(":")){r.eatWhile(/[\w\d_\-]/);return"atom"}var q=r.current(),n;if(a.test(q)){return null}else{if(f.test(q)){return"keyword"}else{return"variable"}}}}}}}}}}}function m(n){return function(q,p){var r=false,o;while((o=q.next())!=null){if(o==n&&!r){p.tokenize=b;break}r=!r&&o=="\\"}return"string"}}function j(n){return function(q,p){var r=false,o;while((o=q.next())!=null){if(o==n&&!r){p.tokenize=b;break}r=!r&&o=="\\"}return"variable-2"}}function i(p,o,n){p.context={prev:p.context,indent:p.indent,col:n,type:o}}function k(n){n.indent=n.context.indent;n.context=n.context.prev}return{startState:function(n){return{tokenize:b,context:null,indent:0,col:0}},token:function(p,o){if(p.sol()){if(o.context&&o.context.align==null){o.context.align=false}o.indent=p.indentation()}if(p.eatSpace()){return null}var n=o.tokenize(p,o);if(n!="comment"&&o.context&&o.context.align==null&&o.context.type!="pattern"){o.context.align=true}if(l=="("){i(o,")",p.column())}else{if(l=="["){i(o,"]",p.column())}else{if(l=="{"){i(o,"}",p.column())}else{if(/[\]\}\)]/.test(l)){while(o.context&&o.context.type=="pattern"){k(o)}if(o.context&&l==o.context.type){k(o)}}else{if(l=="."&&o.context&&o.context.type=="pattern"){k(o)}else{if(/atom|string|variable/.test(n)&&o.context){if(/[\}\]]/.test(o.context.type)){i(o,"pattern",p.column())}else{if(o.context.type=="pattern"&&!o.context.align){o.context.align=true;o.context.col=p.column()}}}}}}}}return n},indent:function(r,p){var q=p&&p.charAt(0);var o=r.context;if(/[\]\}]/.test(q)){while(o&&o.type=="pattern"){o=o.prev}}var n=o&&q==o.type;if(!o){return 0}else{if(o.type=="pattern"){return o.col}else{if(o.align){return o.col+(n?0:1)}else{return o.indent+(n?0:e)}}}}}});CodeMirror.defineMIME("text/x-mysql","mysql");CodeMirror.defineMode("python",function(p,s){var f="error";function q(A){return new RegExp("^(("+A.join(")|(")+"))\\b")}var c=new RegExp("^[\\+\\-\\*/%&|\\^~<>!]");var z=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]");var a=new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))");var m=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))");var r=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");var j=new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var l=q(["and","or","not","is","in"]);var t=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"];var w=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];var e={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]};var b={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(!!s.version&&parseInt(s.version,10)===3){t=t.concat(b.keywords);w=w.concat(b.builtins);var o=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{t=t.concat(e.keywords);w=w.concat(e.builtins);var o=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var n=q(t);var k=q(w);var v=null;function y(G,F){if(G.sol()){var E=F.scopes[0].offset;if(G.eatSpace()){var C=G.indentation();if(C>E){v="indent"}else{if(C<E){v="dedent"}}return null}else{if(E>0){i(G,F)}}}if(G.eatSpace()){return null}var D=G.peek();if(D==="#"){G.skipToEnd();return"comment"}if(G.match(/^[0-9\.]/,false)){var B=false;if(G.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){B=true}if(G.match(/^\d+\.\d*/)){B=true}if(G.match(/^\.\d+/)){B=true}if(B){G.eat(/J/i);return"number"}var A=false;if(G.match(/^0x[0-9a-f]+/i)){A=true}if(G.match(/^0b[01]+/i)){A=true}if(G.match(/^0o[0-7]+/i)){A=true}if(G.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){G.eat(/J/i);A=true}if(G.match(/^0(?![\dx])/i)){A=true}if(A){G.eat(/L/i);return"number"}}if(G.match(o)){F.tokenize=u(G.current());return F.tokenize(G,F)}if(G.match(r)||G.match(m)){return null}if(G.match(a)||G.match(c)||G.match(l)){return"operator"}if(G.match(z)){return null}if(G.match(n)){return"keyword"}if(G.match(k)){return"builtin"}if(G.match(j)){return"variable"}G.next();return f}function u(D){while("rub".indexOf(D.charAt(0).toLowerCase())>=0){D=D.substr(1)}var C=D.length==1;var B="string";return function A(F,E){while(!F.eol()){F.eatWhile(/[^'"\\]/);if(F.eat("\\")){F.next();if(C&&F.eol()){return B}}else{if(F.match(D)){E.tokenize=y;return B}else{F.eat(/['"]/)}}}if(C){if(s.singleLineStringErrors){return f}else{E.tokenize=y}}return B}}function d(E,D,C){C=C||"py";var A=0;if(C==="py"){if(D.scopes[0].type!=="py"){D.scopes[0].offset=E.indentation();return}for(var B=0;B<D.scopes.length;++B){if(D.scopes[B].type==="py"){A=D.scopes[B].offset+p.indentUnit;break}}}else{A=E.column()+E.current().length}D.scopes.unshift({offset:A,type:C})}function i(F,E,D){D=D||"py";if(E.scopes.length==1){return}if(E.scopes[0].type==="py"){var C=F.indentation();var A=-1;for(var B=0;B<E.scopes.length;++B){if(C===E.scopes[B].offset){A=B;break}}if(A===-1){return true}while(E.scopes[0].offset!==C){E.scopes.shift()}return false}else{if(D==="py"){E.scopes[0].offset=F.indentation();return false}else{if(E.scopes[0].type!=D){return true}E.scopes.shift();return false}}}function x(E,C){v=null;var B=C.tokenize(E,C);var D=E.current();if(D==="."){B=E.match(j,false)?null:f;if(B===null&&C.lastToken==="meta"){B="meta"}return B}if(D==="@"){return E.match(j,false)?"meta":f}if((B==="variable"||B==="builtin")&&C.lastToken==="meta"){B="meta"}if(D==="pass"||D==="return"){C.dedent+=1}if(D==="lambda"){C.lambda=true}if((D===":"&&!C.lambda&&C.scopes[0].type=="py")||v==="indent"){d(E,C)}var A="[({".indexOf(D);if(A!==-1){d(E,C,"])}".slice(A,A+1))}if(v==="dedent"){if(i(E,C)){return f}}A="])}".indexOf(D);if(A!==-1){if(i(E,C,D)){return f}}if(C.dedent>0&&E.eol()&&C.scopes[0].type=="py"){if(C.scopes.length>1){C.scopes.shift()}C.dedent-=1}return B}var h={startState:function(A){return{tokenize:y,scopes:[{offset:A||0,type:"py"}],lastToken:null,lambda:false,dedent:0}},token:function(C,B){var A=x(C,B);B.lastToken=A;if(C.eol()&&C.lambda){B.lambda=false}return A},indent:function(B,A){if(B.tokenize!=y){return 0}return B.scopes[0].offset}};return h});CodeMirror.defineMIME("text/x-python","python");(function(){function l(){this.posFrom=this.posTo=this.query=null;this.marked=[]}function f(p){return p._searchState||(p._searchState=new l())}function n(p,q,r){return p.getSearchCursor(q,r,typeof q=="string"&&q==q.toLowerCase())}function a(p,s,q,r){if(p.openDialog){p.openDialog(s,r)}else{r(prompt(q,""))}}function m(q,s,r,p){if(q.openConfirm){q.openConfirm(s,p)}else{if(confirm(r)){p[0]()}}}function h(q){var p=q.match(/^\/(.*)\/([a-z]*)$/);return p?new RegExp(p[1],p[2].indexOf("i")==-1?"":"i"):q}var k='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';function j(p,q){var r=f(p);if(r.query){return d(p,q)}a(p,k,"Search for:",function(s){p.operation(function(){if(!s||r.query){return}r.query=h(s);if(p.lineCount()<2000){for(var t=n(p,s);t.findNext();){r.marked.push(p.markText(t.from(),t.to(),"CodeMirror-searching"))}}r.posFrom=r.posTo=p.getCursor();d(p,q)})})}function d(p,q){p.operation(function(){var r=f(p);var s=n(p,r.query,q?r.posFrom:r.posTo);if(!s.find(q)){s=n(p,r.query,q?{line:p.lineCount()-1}:{line:0,ch:0});if(!s.find(q)){return}}p.setSelection(s.from(),s.to());r.posFrom=s.from();r.posTo=s.to()})}function o(p){p.operation(function(){var r=f(p);if(!r.query){return}r.query=null;for(var q=0;q<r.marked.length;++q){r.marked[q].clear()}r.marked.length=0})}var e='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';var c='With: <input type="text" style="width: 10em"/>';var i="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function b(p,q){a(p,e,"Replace:",function(r){if(!r){return}r=h(r);a(p,c,"Replace with:",function(v){if(q){p.compoundChange(function(){p.operation(function(){for(var x=n(p,r);x.findNext();){if(typeof r!="string"){var w=p.getRange(x.from(),x.to()).match(r);x.replace(v.replace(/\$(\d)/,function(y,z){return w[z]}))}else{x.replace(v)}}})})}else{o(p);var u=n(p,r,p.getCursor());function s(){var x=u.from(),w;if(!(w=u.findNext())){u=n(p,r);if(!(w=u.findNext())||(x&&u.from().line==x.line&&u.from().ch==x.ch)){return}}p.setSelection(u.from(),u.to());m(p,i,"Replace?",[function(){t(w)},s])}function t(w){u.replace(typeof r=="string"?v:v.replace(/\$(\d)/,function(x,y){return w[y]}));s()}s()}})})}CodeMirror.commands.find=function(p){o(p);j(p)};CodeMirror.commands.findNext=j;CodeMirror.commands.findPrev=function(p){j(p,true)};CodeMirror.commands.clearSearch=o;CodeMirror.commands.replace=b;CodeMirror.commands.replaceAll=function(p){b(p,true)}})();CodeMirror.defineMode("xml",function(s,i){var r=s.indentUnit;var y=i.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:false}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false};var q=i.alignCDATA;var l,d;function b(F,E){function C(H){E.tokenize=H;return H(F,E)}var D=F.next();if(D=="<"){if(F.eat("!")){if(F.eat("[")){if(F.match("CDATA[")){return C(w("atom","]]>"))}else{return null}}else{if(F.match("--")){return C(w("comment","-->"))}else{if(F.match("DOCTYPE",true,true)){F.eatWhile(/[\w\._\-]/);return C(A(1))}else{return null}}}}else{if(F.eat("?")){F.eatWhile(/[\w\._\-]/);E.tokenize=w("meta","?>");return"meta"}else{d=F.eat("/")?"closeTag":"openTag";F.eatSpace();l="";var G;while((G=F.eat(/[^\s\u00a0=<>\"\'\/?]/))){l+=G}E.tokenize=o;return"tag"}}}else{if(D=="&"){var B;if(F.eat("#")){if(F.eat("x")){B=F.eatWhile(/[a-fA-F\d]/)&&F.eat(";")}else{B=F.eatWhile(/[\d]/)&&F.eat(";")}}else{B=F.eatWhile(/[\w\.\-:]/)&&F.eat(";")}return B?"atom":"error"}else{F.eatWhile(/[^&<]/);return null}}}function o(D,C){var B=D.next();if(B==">"||(B=="/"&&D.eat(">"))){C.tokenize=b;d=B==">"?"endTag":"selfcloseTag";return"tag"}else{if(B=="="){d="equals";return null}else{if(/[\'\"]/.test(B)){C.tokenize=f(B);return C.tokenize(D,C)}else{D.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"word"}}}}function f(B){return function(D,C){while(!D.eol()){if(D.next()==B){C.tokenize=o;break}}return"string"}}function w(C,B){return function(E,D){while(!E.eol()){if(E.match(B)){D.tokenize=b;break}E.next()}return C}}function A(B){return function(E,D){var C;while((C=E.next())!=null){if(C=="<"){D.tokenize=A(B+1);return D.tokenize(E,D)}else{if(C==">"){if(B==1){D.tokenize=b;break}else{D.tokenize=A(B-1);return D.tokenize(E,D)}}}}return"meta"}}var j,e;function a(){for(var B=arguments.length-1;B>=0;B--){j.cc.push(arguments[B])}}function c(){a.apply(null,arguments);return true}function h(B,D){var C=y.doNotIndent.hasOwnProperty(B)||(j.context&&j.context.noIndent);j.context={prev:j.context,tagName:B,indent:j.indented,startOfLine:D,noIndent:C}}function u(){if(j.context){j.context=j.context.prev}}function n(B){if(B=="openTag"){j.tagName=l;return c(k,m(j.startOfLine))}else{if(B=="closeTag"){var C=false;if(j.context){if(j.context.tagName!=l){if(y.implicitlyClosed.hasOwnProperty(j.context.tagName.toLowerCase())){u()}C=!j.context||j.context.tagName!=l}}else{C=true}if(C){e="error"}return c(x(C))}}return c()}function m(B){return function(C){if(C=="selfcloseTag"||(C=="endTag"&&y.autoSelfClosers.hasOwnProperty(j.tagName.toLowerCase()))){z(j.tagName.toLowerCase());return c()}if(C=="endTag"){z(j.tagName.toLowerCase());h(j.tagName,B);return c()}return c()}}function x(B){return function(C){if(B){e="error"}if(C=="endTag"){u();return c()}e="error";return c(arguments.callee)}}function z(B){var C;while(true){if(!j.context){return}C=j.context.tagName.toLowerCase();if(!y.contextGrabbers.hasOwnProperty(C)||!y.contextGrabbers[C].hasOwnProperty(B)){return}u()}}function k(B){if(B=="word"){e="attribute";return c(p,k)}if(B=="endTag"||B=="selfcloseTag"){return a()}e="error";return c(k)}function p(B){if(B=="equals"){return c(v,k)}if(!y.allowMissing){e="error"}return(B=="endTag"||B=="selfcloseTag")?a():c()}function v(B){if(B=="string"){return c(t)}if(B=="word"&&y.allowUnquoted){e="string";return c()}e="error";return(B=="endTag"||B=="selfCloseTag")?a():c()}function t(B){if(B=="string"){return c(t)}else{return a()}}return{startState:function(){return{tokenize:b,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(E,D){if(E.sol()){D.startOfLine=true;D.indented=E.indentation()}if(E.eatSpace()){return null}e=d=l=null;var C=D.tokenize(E,D);D.type=d;if((C||d)&&C!="comment"){j=D;while(true){var B=D.cc.pop()||n;if(B(d||C)){break}}}D.startOfLine=false;return e||C},indent:function(E,C,D){var B=E.context;if((E.tokenize!=o&&E.tokenize!=b)||B&&B.noIndent){return D?D.match(/^(\s*)/)[0].length:0}if(q&&/<!\[CDATA\[/.test(C)){return 0}if(B&&/^<\//.test(C)){B=B.prev}while(B&&!B.startOfLine){B=B.prev}if(B){return B.indent+r}else{return 0}},compareStates:function(E,C){if(E.indented!=C.indented||E.tokenize!=C.tokenize){return false}for(var D=E.context,B=C.context;;D=D.prev,B=B.prev){if(!D||!B){return D==B}if(D.tagName!=B.tagName){return false}}},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html")){CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
/*! Socket.IO.min.js build:0.9.6, production. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */
}(function(e,d){var f=e;f.version="0.9.6",f.protocol=1,f.transports=[],f.j=[],f.sockets={},f.connect=function(b,l){var k=f.util.parseUri(b),j,i;d&&d.location&&(k.protocol=k.protocol||d.location.protocol.slice(0,-1),k.host=k.host||(d.document?d.document.domain:d.location.hostname),k.port=k.port||d.location.port),j=f.util.uniqueUri(k);var c={host:k.host,secure:"https"==k.protocol,port:k.port||("https"==k.protocol?443:80),query:k.query||""};f.util.merge(c,l);if(c["force new connection"]||!f.sockets[j]){i=new f.Socket(c)}return !c["force new connection"]&&i&&(f.sockets[j]=i),i=i||f.sockets[j],i.of(k.path.length>1?k.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(i,h){var m=i.util={},l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,k=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];m.parseUri=function(e){var d=l.exec(e||""),o={},n=14;while(n--){o[k[n]]=d[n]||""}return o},m.uniqueUri=function(b){var o=b.protocol,n=b.host,f=b.port;return"document" in h?(n=n||document.domain,f=f||(o=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(n=n||"localhost",!f&&o=="https"&&(f=443)),(o||"http")+"://"+n+":"+(f||80)},m.query=function(n,c){var q=m.chunkQuery(n||""),p=[];m.merge(q,m.chunkQuery(c||""));for(var o in q){q.hasOwnProperty(o)&&p.push(o+"="+q[o])}return p.length?"?"+p.join("&"):""},m.chunkQuery=function(o){var n={},s=o.split("&"),r=0,q=s.length,p;for(;r<q;++r){p=s[r].split("="),p[0]&&(n[p[0]]=p[1])}return n};var j=!1;m.load=function(b){if("document" in h&&document.readyState==="complete"||j){return b()}m.on(h,"load",b,!1)},m.on=function(f,e,o,n){f.attachEvent?f.attachEvent("on"+e,o):f.addEventListener&&f.addEventListener(e,o,n)},m.request=function(d){if(d&&"undefined"!=typeof XDomainRequest){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!d||m.ua.hasCORS)){return new XMLHttpRequest}if(!d){try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(c){}}return null},"undefined"!=typeof window&&m.load(function(){j=!0}),m.defer=function(b){if(!m.ua.webkit||"undefined"!=typeof importScripts){return b()}m.load(function(){setTimeout(b,100)})},m.merge=function(a,r,q,p){var o=p||[],n=typeof q=="undefined"?2:q,c;for(c in r){r.hasOwnProperty(c)&&m.indexOf(o,c)<0&&(typeof a[c]!="object"||!n?(a[c]=r[c],o.push(r[c])):m.merge(a[c],r[c],n-1,o))}return a},m.mixin=function(d,c){m.merge(d.prototype,c.prototype)},m.inherit=function(e,d){function f(){}f.prototype=d.prototype,e.prototype=new f},m.isArray=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},m.intersect=function(n,c){var s=[],r=n.length>c.length?n:c,q=n.length>c.length?c:n;for(var p=0,o=q.length;p<o;p++){~m.indexOf(r,q[p])&&s.push(q[p])}return s},m.indexOf=function(f,e,o){for(var n=f.length,o=o<0?o+n<0?0:o+n:o||0;o<n&&f[o]!==e;o++){}return n<=o?-1:o},m.toArray=function(f){var e=[];for(var o=0,n=f.length;o<n;o++){e.push(f[o])}return e},m.ua={},m.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var d=new XMLHttpRequest}catch(c){return !1}return d.withCredentials!=undefined}(),m.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,d){function f(){}e.EventEmitter=f,f.prototype.on=function(b,h){return this.$events||(this.$events={}),this.$events[b]?d.util.isArray(this.$events[b])?this.$events[b].push(h):this.$events[b]=[this.$events[b],h]:this.$events[b]=h,this},f.prototype.addListener=f.prototype.on,f.prototype.once=function(i,h){function j(){k.removeListener(i,j),h.apply(this,arguments)}var k=this;return j.listener=h,this.on(i,j),this},f.prototype.removeListener=function(b,l){if(this.$events&&this.$events[b]){var k=this.$events[b];if(d.util.isArray(k)){var j=-1;for(var i=0,h=k.length;i<h;i++){if(k[i]===l||k[i].listener&&k[i].listener===l){j=i;break}}if(j<0){return this}k.splice(j,1),k.length||delete this.$events[b]}else{(k===l||k.listener&&k.listener===l)&&delete this.$events[b]}}return this},f.prototype.removeAllListeners=function(b){return this.$events&&this.$events[b]&&(this.$events[b]=null),this},f.prototype.listeners=function(b){return this.$events||(this.$events={}),this.$events[b]||(this.$events[b]=[]),d.util.isArray(this.$events[b])||(this.$events[b]=[this.$events[b]]),this.$events[b]},f.prototype.emit=function(b){if(!this.$events){return !1}var l=this.$events[b];if(!l){return !1}var k=Array.prototype.slice.call(arguments,1);if("function"==typeof l){l.apply(this,k)}else{if(!d.util.isArray(l)){return !1}var j=l.slice();for(var i=0,h=j.length;i<h;i++){j[i].apply(this,k)}}return !0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(a){return a<10?"0"+a:a}function date(a,b){return isFinite(a.valueOf())?a.getUTCFullYear()+"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z":null}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i instanceof Date&&(i=date(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1){typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}}else{for(d in i){Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}}return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number"){for(d=0;d<c;d+=1){indent+=" "}}else{typeof c=="string"&&(indent=c)}rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number"){return str("",{"":a})}throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object"){for(c in e){Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c])}}return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(r,q){var p=r.parser={},o=p.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],n=p.reasons=["transport not supported","client not handshaken","unauthorized"],m=p.advice=["reconnect"],l=q.JSON,k=q.util.indexOf;p.encodePacket=function(x){var w=k(o,x.type),v=x.id||"",u=x.endpoint||"",t=x.ack,s=null;switch(x.type){case"error":var h=x.reason?k(n,x.reason):"",f=x.advice?k(m,x.advice):"";if(h!==""||f!==""){s=h+(f!==""?"+"+f:"")}break;case"message":x.data!==""&&(s=x.data);break;case"event":var e={name:x.name};x.args&&x.args.length&&(e.args=x.args),s=l.stringify(e);break;case"json":s=l.stringify(x.data);break;case"connect":x.qs&&(s=x.qs);break;case"ack":s=x.ackId+(x.args&&x.args.length?"+"+l.stringify(x.args):"")}var d=[w,v+(t=="data"?"+":""),u];return s!==null&&s!==undefined&&d.push(s),d.join(":")},p.encodePayload=function(h){var f="";if(h.length==1){return h[0]}for(var t=0,s=h.length;t<s;t++){var i=h[t];f+="\ufffd"+i.length+"\ufffd"+h[t]}return f};var j=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;p.decodePacket=function(e){var d=e.match(j);if(!d){return{}}var t=d[2]||"",e=d[5]||"",s={type:o[d[1]],endpoint:d[4]||""};t&&(s.id=t,d[3]?s.ack="data":s.ack=!0);switch(s.type){case"error":var d=e.split("+");s.reason=n[d[0]]||"",s.advice=m[d[1]]||"";break;case"message":s.data=e||"";break;case"event":try{var i=l.parse(e);s.name=i.name,s.args=i.args}catch(f){}s.args=s.args||[];break;case"json":try{s.data=l.parse(e)}catch(f){}break;case"connect":s.qs=e||"";break;case"ack":var d=e.match(/^([0-9]+)(\+)?(.*)/);if(d){s.ackId=d[1],s.args=[];if(d[3]){try{s.args=d[3]?l.parse(d[3]):[]}catch(f){}}}break;case"disconnect":case"heartbeat":}return s},p.decodePayload=function(f){if(f.charAt(0)=="\ufffd"){var c=[];for(var i=1,h="";i<f.length;i++){f.charAt(i)=="\ufffd"?(c.push(p.decodePacket(f.substr(i+1).substr(0,h))),i+=Number(h)+1,h=""):h+=f.charAt(i)}return c}return[p.decodePacket(f)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,d){function f(h,c){this.socket=h,this.sessid=c}e.Transport=f,d.util.mixin(f,d.EventEmitter),f.prototype.onData=function(b){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(b!==""){var j=d.parser.decodePayload(b);if(j&&j.length){for(var i=0,h=j.length;i<h;i++){this.onPacket(j[i])}}}return this},f.prototype.onPacket=function(b){return this.socket.setHeartbeatTimeout(),b.type=="heartbeat"?this.onHeartbeat():(b.type=="connect"&&b.endpoint==""&&this.onConnect(),b.type=="error"&&b.advice=="reconnect"&&(this.open=!1),this.socket.onPacket(b),this)},f.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var b=this;this.closeTimeout=setTimeout(function(){b.onDisconnect()},this.socket.closeTimeout)}},f.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},f.prototype.onConnect=function(){return this.socket.onConnect(),this},f.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},f.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},f.prototype.packet=function(b){this.send(d.parser.encodePacket(b))},f.prototype.onHeartbeat=function(b){this.packet({type:"heartbeat"})},f.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},f.prototype.onClose=function(){var b=this;this.open=!1,this.socket.onClose(),this.onDisconnect()},f.prototype.prepareUrl=function(){var b=this.socket.options;return this.scheme()+"://"+b.host+":"+b.port+"/"+b.resource+"/"+d.protocol+"/"+this.name+"/"+this.sessid},f.prototype.ready=function(h,c){c.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(h,f,k){function j(b){this.options={port:80,secure:!1,document:"document" in k?document:!1,resource:"socket.io",transports:f.transports,"connect timeout":10000,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3000,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},f.util.merge(this.options,b),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||f.util.ua.hasCORS)){var c=this;f.util.on(k,"unload",function(){c.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}h.Socket=j,f.util.mixin(j,f.EventEmitter),j.prototype.of=function(b){return this.namespaces[b]||(this.namespaces[b]=new f.SocketNamespace(this,b),b!==""&&this.namespaces[b].packet({type:"connect"})),this.namespaces[b]},j.prototype.publish=function(){this.emit.apply(this,arguments);var d;for(var c in this.namespaces){this.namespaces.hasOwnProperty(c)&&(d=this.of(c),d.$emit.apply(d,arguments))}},j.prototype.handshake=function(b){function o(a){a instanceof Error?q.onError(a.message):b.apply(null,a.split(":"))}var q=this,p=this.options,n=["http"+(p.secure?"s":"")+":/",p.host+":"+p.port,p.resource,f.protocol,f.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!f.util.ua.hasCORS){var m=document.getElementsByTagName("script")[0],l=document.createElement("script");l.src=n+"&jsonp="+f.j.length,m.parentNode.insertBefore(l,m),f.j.push(function(c){o(c),l.parentNode.removeChild(l)})}else{var e=f.util.request();e.open("GET",n,!0),e.withCredentials=!0,e.onreadystatechange=function(){e.readyState==4&&(e.onreadystatechange=i,e.status==200?o(e.responseText):!q.reconnecting&&q.onError(e.responseText))},e.send(null)}},j.prototype.getTransport=function(b){var o=b||this.transports,n;for(var m=0,l;l=o[m];m++){if(f.Transport[l]&&f.Transport[l].check(this)&&(!this.isXDomain()||f.Transport[l].xdomainCheck())){return new f.Transport[l](this,this.sessionid)}}return null},j.prototype.connect=function(b){if(this.connecting){return this}var d=this;return this.handshake(function(n,m,l,c){function a(e){d.transport&&d.transport.clearTimeouts(),d.transport=d.getTransport(e);if(!d.transport){return d.publish("connect_failed")}d.transport.ready(d,function(){d.connecting=!0,d.publish("connecting",d.transport.name),d.transport.open(),d.options["connect timeout"]&&(d.connectTimeoutTimer=setTimeout(function(){if(!d.connected){d.connecting=!1;if(d.options["try multiple transports"]){d.remainingTransports||(d.remainingTransports=d.transports.slice(0));var o=d.remainingTransports;while(o.length>0&&o.splice(0,1)[0]!=d.transport.name){}o.length?a(o):d.publish("connect_failed")}}},d.options["connect timeout"]))})}d.sessionid=n,d.closeTimeout=l*1000,d.heartbeatTimeout=m*1000,d.transports=c?f.util.intersect(c.split(","),d.options.transports):d.options.transports,d.setHeartbeatTimeout(),a(d.transports),d.once("connect",function(){clearTimeout(d.connectTimeoutTimer),b&&typeof b=="function"&&b()})}),this},j.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var b=this;this.heartbeatTimeoutTimer=setTimeout(function(){b.transport.onClose()},this.heartbeatTimeout)},j.prototype.packet=function(b){return this.connected&&!this.doBuffer?this.transport.packet(b):this.buffer.push(b),this},j.prototype.setBuffer=function(b){this.doBuffer=b,!b&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},j.prototype.disconnect=function(){if(this.connected||this.connecting){this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")}return this},j.prototype.disconnectSync=function(){var b=f.util.request(),d=this.resource+"/"+f.protocol+"/"+this.sessionid;b.open("GET",d,!0),this.onDisconnect("booted")},j.prototype.isXDomain=function(){var b=k.location.port||("https:"==k.location.protocol?443:80);return this.options.host!==k.location.hostname||this.options.port!=b},j.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},j.prototype.onOpen=function(){this.open=!0},j.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},j.prototype.onPacket=function(b){this.of(b.endpoint).onPacket(b)},j.prototype.onError=function(b){b&&b.advice&&b.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",b&&b.reason?b.reason:b)},j.prototype.onDisconnect=function(e){var d=this.connected,l=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(d||l){this.transport.close(),this.transport.clearTimeouts(),d&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())}},j.prototype.reconnect=function(){function o(){if(m.connected){for(var a in m.namespaces){m.namespaces.hasOwnProperty(a)&&""!==a&&m.namespaces[a].packet({type:"connect"})}m.publish("reconnect",m.transport.name,m.reconnectionAttempts)}clearTimeout(m.reconnectionTimer),m.removeListener("connect_failed",n),m.removeListener("connect",n),m.reconnecting=!1,delete m.reconnectionAttempts,delete m.reconnectionDelay,delete m.reconnectionTimer,delete m.redoTransports,m.options["try multiple transports"]=q}function n(){if(!m.reconnecting){return}if(m.connected){return o()}if(m.connecting&&m.reconnecting){return m.reconnectionTimer=setTimeout(n,1000)}m.reconnectionAttempts++>=l?m.redoTransports?(m.publish("reconnect_failed"),o()):(m.on("connect_failed",n),m.options["try multiple transports"]=!0,m.transport=m.getTransport(),m.redoTransports=!0,m.connect()):(m.reconnectionDelay<p&&(m.reconnectionDelay*=2),m.connect(),m.publish("reconnecting",m.reconnectionDelay,m.reconnectionAttempts),m.reconnectionTimer=setTimeout(n,m.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var m=this,l=this.options["max reconnection attempts"],q=this.options["try multiple transports"],p=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(n,this.reconnectionDelay),this.on("connect",n)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(f,e){function i(d,c){this.socket=d,this.name=c||"",this.flags={},this.json=new h(this,"json"),this.ackPackets=0,this.acks={}}function h(d,c){this.namespace=d,this.name=c}f.SocketNamespace=i,e.util.mixin(i,e.EventEmitter),i.prototype.$emit=e.EventEmitter.prototype.emit,i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},i.prototype.packet=function(b){return b.endpoint=this.name,this.socket.packet(b),this.flags={},this},i.prototype.send=function(j,d){var k={type:this.flags.json?"json":"message",data:j};return"function"==typeof d&&(k.id=++this.ackPackets,k.ack=!0,this.acks[k.id]=d),this.packet(k)},i.prototype.emit=function(k){var j=Array.prototype.slice.call(arguments,1),m=j[j.length-1],l={type:"event",name:k};return"function"==typeof m&&(l.id=++this.ackPackets,l.ack="data",this.acks[l.id]=m,j=j.slice(0,j.length-1)),l.args=j,this.packet(l)},i.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},i.prototype.onPacket=function(b){function k(){l.packet({type:"ack",args:e.util.toArray(arguments),ackId:b.id})}var l=this;switch(b.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(b.reason||"booted"):this.$emit("disconnect",b.reason);break;case"message":case"json":var j=["message",b.data];b.ack=="data"?j.push(k):b.ack&&this.packet({type:"ack",ackId:b.id}),this.$emit.apply(this,j);break;case"event":var j=[b.name].concat(b.args);b.ack=="data"&&j.push(k),this.$emit.apply(this,j);break;case"ack":this.acks[b.ackId]&&(this.acks[b.ackId].apply(this,b.args),delete this.acks[b.ackId]);break;case"error":b.advice?this.socket.onError(b):b.reason=="unauthorized"?this.$emit("connect_failed",b.reason):this.$emit("error",b.reason)}},h.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},h.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(f,e,i){function h(b){e.Transport.apply(this,arguments)}f.websocket=h,e.util.inherit(h,e.Transport),h.prototype.name="websocket",h.prototype.open=function(){var b=e.util.query(this.socket.options.query),j=this,c;return c||(c=i.MozWebSocket||i.WebSocket),this.websocket=new c(this.prepareUrl()+b),this.websocket.onopen=function(){j.onOpen(),j.socket.setBuffer(!1)},this.websocket.onmessage=function(d){j.onData(d.data)},this.websocket.onclose=function(){j.onClose(),j.socket.setBuffer(!0)},this.websocket.onerror=function(d){j.onError(d)},this},h.prototype.send=function(b){return this.websocket.send(b),this},h.prototype.payload=function(j){for(var d=0,k=j.length;d<k;d++){this.packet(j[d])}return this},h.prototype.close=function(){return this.websocket.close(),this},h.prototype.onError=function(b){this.socket.onError(b)},h.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},h.check=function(){return"WebSocket" in i&&!("__addTask" in WebSocket)||"MozWebSocket" in i},h.xdomainCheck=function(){return !0},e.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,d){function f(){d.Transport.websocket.apply(this,arguments)}e.flashsocket=f,d.util.inherit(f,d.Transport.websocket),f.prototype.name="flashsocket",f.prototype.open=function(){var b=this,h=arguments;return WebSocket.__addTask(function(){d.Transport.websocket.prototype.open.apply(b,h)}),this},f.prototype.send=function(){var b=this,h=arguments;return WebSocket.__addTask(function(){d.Transport.websocket.prototype.send.apply(b,h)}),this},f.prototype.close=function(){return WebSocket.__tasks.length=0,d.Transport.websocket.prototype.close.call(this),this},f.prototype.ready=function(b,i){function h(){var a=b.options,k=a["flash policy port"],j=["http"+(a.secure?"s":"")+":/",a.host+":"+a.port,a.resource,"static/flashsocket","WebSocketMain"+(b.isXDomain()?"Insecure":"")+".swf"];f.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=j.join("/")),k!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+a.host+":"+k),WebSocket.__initialize(),f.loaded=!0),i.call(c)}var c=this;if(document.body){return h()}d.util.load(h)},f.check=function(){return typeof WebSocket!="undefined"&&"__initialize" in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},f.xdomainCheck=function(){return !0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),d.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window){var swfobject=function(){function au(){if(aB){return}try{var f=aM.getElementsByTagName("body")[0].appendChild(ad("span"));f.parentNode.removeChild(f)}catch(e){return}aB=!0;var i=aJ.length;for(var h=0;h<i;h++){aJ[h]()}}function at(b){aB?b():aJ[aJ.length]=b}function ar(a){if(typeof aN.addEventListener!=aU){aN.addEventListener("load",a,!1)}else{if(typeof aM.addEventListener!=aU){aM.addEventListener("load",a,!1)}else{if(typeof aN.attachEvent!=aU){ac(aN,"onload",a)}else{if(typeof aN.onload=="function"){var d=aN.onload;aN.onload=function(){d(),a()}}else{aN.onload=a}}}}}function aq(){aK?ap():ao()}function ap(){var h=aM.getElementsByTagName("body")[0],e=ad(aT);e.setAttribute("type",aQ);var b=h.appendChild(e);if(b){var a=0;(function(){if(typeof b.GetVariable!=aU){var c=b.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),aw.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else{if(a<10){a++,setTimeout(arguments.callee,10);return}}h.removeChild(e),b=null,ao()})()}else{ao()}}function ao(){var x=aI.length;if(x>0){for(var w=0;w<x;w++){var v=aI[w].id,u=aI[w].callbackFn,t={success:!1,id:v};if(aw.pv[0]>0){var s=ae(v);if(s){if(ab(aI[w].swfVersion)&&!(aw.wk&&aw.wk<312)){Z(v,!0),u&&(t.success=!0,t.ref=an(v),u(t))}else{if(aI[w].expressInstall&&am()){var r={};r.data=aI[w].expressInstall,r.width=s.getAttribute("width")||"0",r.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(r.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(r.align=s.getAttribute("align"));var q={},p=s.getElementsByTagName("param"),o=p.length;for(var m=0;m<o;m++){p[m].getAttribute("name").toLowerCase()!="movie"&&(q[p[m].getAttribute("name")]=p[m].getAttribute("value"))}al(r,q,v,u)}else{ak(s),u&&u(t)}}}}else{Z(v,!0);if(u){var a=an(v);a&&typeof a.SetVariable!=aU&&(t.success=!0,t.ref=a),u(t)}}}}}function an(i){var h=null,b=ae(i);if(b&&b.nodeName=="OBJECT"){if(typeof b.SetVariable!=aU){h=b}else{var a=b.getElementsByTagName(aT)[0];a&&(h=a)}}return h}function am(){return !aA&&ab("6.0.65")&&(aw.win||aw.mac)&&!(aw.wk&&aw.wk<312)}function al(a,p,o,n){aA=!0,aD=n||null,aC={success:!1,id:o};var m=ae(o);if(m){m.nodeName=="OBJECT"?(aF=aj(m),aE=null):(aF=m,aE=o),a.id=aP;if(typeof a.width==aU||!/%$/.test(a.width)&&parseInt(a.width,10)<310){a.width="310"}if(typeof a.height==aU||!/%$/.test(a.height)&&parseInt(a.height,10)<137){a.height="137"}aM.title=aM.title.slice(0,47)+" - Flash Player Installation";var i=aw.ie&&aw.win?["Active"].concat("").join("X"):"PlugIn",h="MMredirectURL="+aN.location.toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+aM.title;typeof p.flashvars!=aU?p.flashvars+="&"+h:p.flashvars=h;if(aw.ie&&aw.win&&m.readyState!=4){var f=ad("div");o+="SWFObjectNew",f.setAttribute("id",o),m.parentNode.insertBefore(f,m),m.style.display="none",function(){m.readyState==4?m.parentNode.removeChild(m):setTimeout(arguments.callee,10)}()}ai(a,p,o)}}function ak(d){if(aw.ie&&aw.win&&d.readyState!=4){var c=ad("div");d.parentNode.insertBefore(c,d),c.parentNode.replaceChild(aj(d),c),d.style.display="none",function(){d.readyState==4?d.parentNode.removeChild(d):setTimeout(arguments.callee,10)}()}else{d.parentNode.replaceChild(aj(d),d)}}function aj(b){var l=ad("div");if(aw.win&&aw.ie){l.innerHTML=b.innerHTML}else{var k=b.getElementsByTagName(aT)[0];if(k){var j=k.childNodes;if(j){var i=j.length;for(var h=0;h<i;h++){(j[h].nodeType!=1||j[h].nodeName!="PARAM")&&j[h].nodeType!=8&&l.appendChild(j[h].cloneNode(!0))}}}}return l}function ai(x,w,v){var u,t=ae(v);if(aw.wk&&aw.wk<312){return u}if(t){typeof x.id==aU&&(x.id=v);if(aw.ie&&aw.win){var s="";for(var r in x){x[r]!=Object.prototype[r]&&(r.toLowerCase()=="data"?w.movie=x[r]:r.toLowerCase()=="styleclass"?s+=' class="'+x[r]+'"':r.toLowerCase()!="classid"&&(s+=" "+r+'="'+x[r]+'"'))}var q="";for(var n in w){w[n]!=Object.prototype[n]&&(q+='<param name="'+n+'" value="'+w[n]+'" />')}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+q+"</object>",aH[aH.length]=x.id,u=ae(x.id)}else{var e=ad(aT);e.setAttribute("type",aQ);for(var b in x){x[b]!=Object.prototype[b]&&(b.toLowerCase()=="styleclass"?e.setAttribute("class",x[b]):b.toLowerCase()!="classid"&&e.setAttribute(b,x[b]))}for(var a in w){w[a]!=Object.prototype[a]&&a.toLowerCase()!="movie"&&ah(e,a,w[a])}t.parentNode.replaceChild(e,t),u=e}}return u}function ah(f,e,i){var h=ad("param");h.setAttribute("name",e),h.setAttribute("value",i),f.appendChild(h)}function ag(d){var c=ae(d);c&&c.nodeName=="OBJECT"&&(aw.ie&&aw.win?(c.style.display="none",function(){c.readyState==4?af(d):setTimeout(arguments.callee,10)}()):c.parentNode.removeChild(c))}function af(e){var d=ae(e);if(d){for(var f in d){typeof d[f]=="function"&&(d[f]=null)}d.parentNode.removeChild(d)}}function ae(e){var d=null;try{d=aM.getElementById(e)}catch(f){}return d}function ad(b){return aM.createElement(b)}function ac(e,d,f){e.attachEvent(d,f),aG[aG.length]=[e,d,f]}function ab(e){var d=aw.pv,f=e.split(".");return f[0]=parseInt(f[0],10),f[1]=parseInt(f[1],10)||0,f[2]=parseInt(f[2],10)||0,d[0]>f[0]||d[0]==f[0]&&d[1]>f[1]||d[0]==f[0]&&d[1]==f[1]&&d[2]>=f[2]?!0:!1}function aa(n,m,l,k){if(aw.ie&&aw.mac){return}var i=aM.getElementsByTagName("head")[0];if(!i){return}var b=l&&typeof l=="string"?l:"screen";k&&(az=null,ay=null);if(!az||ay!=b){var a=ad("style");a.setAttribute("type","text/css"),a.setAttribute("media",b),az=i.appendChild(a),aw.ie&&aw.win&&typeof aM.styleSheets!=aU&&aM.styleSheets.length>0&&(az=aM.styleSheets[aM.styleSheets.length-1]),ay=b}aw.ie&&aw.win?az&&typeof az.addRule==aT&&az.addRule(n,m):az&&typeof aM.createTextNode!=aU&&az.appendChild(aM.createTextNode(n+" {"+m+"}"))}function Z(e,d){if(!ax){return}var f=d?"visible":"hidden";aB&&ae(e)?ae(e).style.visibility=f:aa("#"+e,"visibility:"+f)}function Y(a){var f=/[\\\"<>\.;]/,e=f.exec(a)!=null;return e&&typeof encodeURIComponent!=aU?encodeURIComponent(a):a}var aU="undefined",aT="object",aS="Shockwave Flash",aR="ShockwaveFlash.ShockwaveFlash",aQ="application/x-shockwave-flash",aP="SWFObjectExprInst",aO="onreadystatechange",aN=window,aM=document,aL=navigator,aK=!1,aJ=[aq],aI=[],aH=[],aG=[],aF,aE,aD,aC,aB=!1,aA=!1,az,ay,ax=!0,aw=function(){var k=typeof aM.getElementById!=aU&&typeof aM.getElementsByTagName!=aU&&typeof aM.createElement!=aU,j=aL.userAgent.toLowerCase(),i=aL.platform.toLowerCase(),h=i?/win/.test(i):/win/.test(j),e=i?/mac/.test(i):/mac/.test(j),d=/webkit/.test(j)?parseFloat(j.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,c=!1,b=[0,0,0],a=null;if(typeof aL.plugins!=aU&&typeof aL.plugins[aS]==aT){a=aL.plugins[aS].description,a&&(typeof aL.mimeTypes==aU||!aL.mimeTypes[aQ]||!!aL.mimeTypes[aQ].enabledPlugin)&&(aK=!0,c=!1,a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=parseInt(a.replace(/^(.*)\..*$/,"$1"),10),b[1]=parseInt(a.replace(/^.*\.(.*)\s.*$/,"$1"),10),b[2]=/[a-zA-Z]/.test(a)?parseInt(a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0)}else{if(typeof aN[["Active"].concat("Object").join("X")]!=aU){try{var v=new (window[["Active"].concat("Object").join("X")])(aR);v&&(a=v.GetVariable("$version"),a&&(c=!0,a=a.split(" ")[1].split(","),b=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]))}catch(u){}}}return{w3:k,pv:b,wk:d,ie:c,win:h,mac:e}}(),av=function(){if(!aw.w3){return}(typeof aM.readyState!=aU&&aM.readyState=="complete"||typeof aM.readyState==aU&&(aM.getElementsByTagName("body")[0]||aM.body))&&au(),aB||(typeof aM.addEventListener!=aU&&aM.addEventListener("DOMContentLoaded",au,!1),aw.ie&&aw.win&&(aM.attachEvent(aO,function(){aM.readyState=="complete"&&(aM.detachEvent(aO,arguments.callee),au())}),aN==top&&function(){if(aB){return}try{aM.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}au()}()),aw.wk&&function(){if(aB){return}if(!/loaded|complete/.test(aM.readyState)){setTimeout(arguments.callee,0);return}au()}(),ar(au))}(),X=function(){aw.ie&&aw.win&&window.attachEvent("onunload",function(){var i=aG.length;for(var h=0;h<i;h++){aG[h][0].detachEvent(aG[h][1],aG[h][2])}var m=aH.length;for(var l=0;l<m;l++){ag(aH[l])}for(var k in aw){aw[k]=null}aw=null;for(var j in swfobject){swfobject[j]=null}swfobject=null})}();return{registerObject:function(h,f,k,j){if(aw.w3&&h&&f){var i={};i.id=h,i.swfVersion=f,i.expressInstall=k,i.callbackFn=j,aI[aI.length]=i,Z(h,!1)}else{j&&j({success:!1,id:h})}},getObjectById:function(b){if(aw.w3){return an(b)}},embedSWF:function(v,u,t,s,r,q,p,o,n,b){var a={success:!1,id:u};aw.w3&&!(aw.wk&&aw.wk<312)&&v&&u&&t&&s&&r?(Z(u,!1),at(function(){t+="",s+="";var i={};if(n&&typeof n===aT){for(var h in n){i[h]=n[h]}}i.data=v,i.width=t,i.height=s;var f={};if(o&&typeof o===aT){for(var e in o){f[e]=o[e]}}if(p&&typeof p===aT){for(var d in p){typeof f.flashvars!=aU?f.flashvars+="&"+d+"="+p[d]:f.flashvars=d+"="+p[d]}}if(ab(r)){var c=ai(i,f,u);i.id==u&&Z(u,!0),a.success=!0,a.ref=c}else{if(q&&am()){i.data=q,al(i,f,u,b);return}Z(u,!0)}b&&b(a)})):b&&b(a)},switchOffAutoHideShow:function(){ax=!1},ua:aw,getFlashPlayerVersion:function(){return{major:aw.pv[0],minor:aw.pv[1],release:aw.pv[2]}},hasFlashPlayerVersion:ab,createSWF:function(e,d,f){return aw.w3?ai(e,d,f):undefined},showExpressInstall:function(f,e,i,h){aw.w3&&am()&&al(f,e,i,h)},removeSWF:function(b){aw.w3&&ag(b)},createCSS:function(f,e,i,h){aw.w3&&aa(f,e,i,h)},addDomLoadEvent:at,addLoadEvent:ar,getQueryParamValue:function(f){var e=aM.location.search||aM.location.hash;if(e){/\?/.test(e)&&(e=e.split("?")[1]);if(f==null){return Y(e)}var i=e.split("&");for(var h=0;h<i.length;h++){if(i[h].substring(0,i[h].indexOf("="))==f){return Y(i[h].substring(i[h].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(aA){var b=ae(aP);b&&aF&&(b.parentNode.replaceChild(aF,b),aE&&(Z(aE,!0),aw.ie&&aw.win&&(aF.style.display="block")),aD&&aD(aC)),aA=!1}}}}()}(function(){if("undefined"==typeof window||window.WebSocket){return}var b=window.console;if(!b||!b.log||!b.error){b={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("10.0.0")){b.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&b.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(i,h,m,l,k){var j=this;j.__id=WebSocket.__nextId++,WebSocket.__instances[j.__id]=j,j.readyState=WebSocket.CONNECTING,j.bufferedAmount=0,j.__events={},h?typeof h=="string"&&(h=[h]):h=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(j.__id,i,h,m||null,l||0,k||null)})},0)},WebSocket.prototype.send=function(d){if(this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var c=WebSocket.__flash.send(this.__id,encodeURIComponent(d));return c<0?!0:(this.bufferedAmount+=c,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING){return}this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,d,f){e in this.__events||(this.__events[e]=[]),this.__events[e].push(d)},WebSocket.prototype.removeEventListener=function(h,f,k){if(!(h in this.__events)){return}var j=this.__events[h];for(var i=j.length-1;i>=0;--i){if(j[i]===f){j.splice(i,1);break}}},WebSocket.prototype.dispatchEvent=function(f){var e=this.__events[f.type]||[];for(var i=0;i<e.length;++i){e[i](f)}var h=this["on"+f.type];h&&h(f)},WebSocket.prototype.__handleEvent=function(e){"readyState" in e&&(this.readyState=e.readyState),"protocol" in e&&(this.protocol=e.protocol);var d;if(e.type=="open"||e.type=="error"){d=this.__createSimpleEvent(e.type)}else{if(e.type=="close"){d=this.__createSimpleEvent("close")}else{if(e.type!="message"){throw"unknown event type: "+e.type}var f=decodeURIComponent(e.message);d=this.__createMessageEvent("message",f)}}this.dispatchEvent(d)},WebSocket.prototype.__createSimpleEvent=function(d){if(document.createEvent&&window.Event){var c=document.createEvent("Event");return c.initEvent(d,!1,!1),c}return{type:d,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,d){if(document.createEvent&&window.MessageEvent&&!window.opera){var f=document.createEvent("MessageEvent");return f.initMessageEvent("message",!1,!1,d,null,null,window,null),f}return{type:e,data:d,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(c){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(c)})},WebSocket.__initialize=function(){if(WebSocket.__flash){return}WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){b.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var a=document.createElement("div");a.id="webSocketContainer",a.style.position="absolute",WebSocket.__isFlashLite()?(a.style.left="0px",a.style.top="0px"):(a.style.left="-100px",a.style.top="-100px");var d=document.createElement("div");d.id="webSocketFlash",a.appendChild(d),document.body.appendChild(a),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(c){c.success||b.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var c=0;c<WebSocket.__tasks.length;++c){WebSocket.__tasks[c]()}WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var a=WebSocket.__flash.receiveEvents();for(var f=0;f<a.length;++f){WebSocket.__instances[a[f].webSocketId].__handleEvent(a[f])}}catch(e){b.error(e)}},0),!0},WebSocket.__log=function(a){b.log(decodeURIComponent(a))},WebSocket.__error=function(a){b.error(decodeURIComponent(a))},WebSocket.__addTask=function(c){WebSocket.__flash?c():WebSocket.__tasks.push(c)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return !1}var c=window.navigator.mimeTypes["application/x-shockwave-flash"];return !c||!c.enabledPlugin||!c.enabledPlugin.filename?!1:c.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(h,f,k){function j(b){if(!b){return}f.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}h.XHR=j,f.util.inherit(j,f.Transport),j.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},j.prototype.payload=function(b){var n=[];for(var m=0,l=b.length;m<l;m++){n.push(f.parser.encodePacket(b[m]))}this.send(f.parser.encodePayload(n))},j.prototype.send=function(b){return this.post(b),this},j.prototype.post=function(e){function m(){this.readyState==4&&(this.onreadystatechange=i,c.posting=!1,this.status==200?c.socket.setBuffer(!1):c.onClose())}function l(){this.onload=i,c.socket.setBuffer(!1)}var c=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),k.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=l:this.sendXHR.onreadystatechange=m,this.sendXHR.send(e)},j.prototype.close=function(){return this.onClose(),this},j.prototype.request=function(b){var n=f.util.request(this.socket.isXDomain()),m=f.util.query(this.socket.options.query,"t="+ +(new Date));n.open(b||"GET",this.prepareUrl()+m,!0);if(b=="POST"){try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(l){}}return n},j.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},j.check=function(b,p){try{var o=f.util.request(p),n=k.XDomainRequest&&o instanceof XDomainRequest,m=b&&b.options&&b.options.secure?"https:":"http:",l=m!=k.location.protocol;if(o&&(!n||!l)){return !0}}catch(c){}return !1},j.xdomainCheck=function(){return j.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,d){function f(b){d.Transport.XHR.apply(this,arguments)}e.htmlfile=f,d.util.inherit(f,d.Transport.XHR),f.prototype.name="htmlfile",f.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var b=this.doc.createElement("div");b.className="socketio",this.doc.body.appendChild(b),this.iframe=this.doc.createElement("iframe"),b.appendChild(this.iframe);var i=this,h=d.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+h,d.util.on(window,"unload",function(){i.destroy()})},f.prototype._=function(i,h){this.onData(i);try{var k=h.getElementsByTagName("script")[0];k.parentNode.removeChild(k)}catch(j){}},f.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(b){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},f.prototype.close=function(){return this.destroy(),d.Transport.XHR.prototype.close.call(this)},f.check=function(){if(typeof window!="undefined"&&["Active"].concat("Object").join("X") in window){try{var b=new (window[["Active"].concat("Object").join("X")])("htmlfile");return b&&d.Transport.XHR.check()}catch(h){}}return !1},f.xdomainCheck=function(){return !1},d.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(h,f,k){function j(){f.Transport.XHR.apply(this,arguments)}function i(){}h["xhr-polling"]=j,f.util.inherit(j,f.Transport.XHR),f.util.merge(j,f.Transport.XHR),j.prototype.name="xhr-polling",j.prototype.open=function(){var b=this;return f.Transport.XHR.prototype.open.call(b),!1},j.prototype.get=function(){function c(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function m(){this.onload=i,this.onerror=i,e.onData(this.responseText),e.get()}function l(){e.onClose()}if(!this.open){return}var e=this;this.xhr=this.request(),k.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=m,this.xhr.onerror=l):this.xhr.onreadystatechange=c,this.xhr.send(null)},j.prototype.onClose=function(){f.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(b){}this.xhr=null}},j.prototype.ready=function(b,l){var e=this;f.util.defer(function(){l.call(e)})},f.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(h,f,k){function i(b){f.Transport["xhr-polling"].apply(this,arguments),this.index=f.j.length;var d=this;f.j.push(function(c){d._(c)})}var j=k.document&&"MozAppearance" in k.document.documentElement.style;h["jsonp-polling"]=i,f.util.inherit(i,f.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(t){function m(){l(),s.socket.setBuffer(!1)}function l(){s.iframe&&s.form.removeChild(s.iframe);try{n=document.createElement('<iframe name="'+s.iframeId+'">')}catch(c){n=document.createElement("iframe"),n.name=s.iframeId}n.id=s.iframeId,s.form.appendChild(n),s.iframe=n}var s=this,r=f.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var q=document.createElement("form"),p=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,n;q.className="socketio",q.style.position="absolute",q.style.top="0px",q.style.left="0px",q.style.display="none",q.target=o,q.method="POST",q.setAttribute("accept-charset","utf-8"),p.name="d",q.appendChild(p),document.body.appendChild(q),this.form=q,this.area=p}this.form.action=this.prepareUrl()+r,l(),this.area.value=f.JSON.stringify(t);try{this.form.submit()}catch(b){}this.iframe.attachEvent?n.onreadystatechange=function(){s.iframe.readyState=="complete"&&m()}:this.iframe.onload=m,this.socket.setBuffer(!0)},i.prototype.get=function(){var b=this,m=document.createElement("script"),l=f.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),m.async=!0,m.src=this.prepareUrl()+l,m.onerror=function(){b.onClose()};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(m,d),this.script=m,j&&setTimeout(function(){var c=document.createElement("iframe");document.body.appendChild(c),document.body.removeChild(c)},100)},i.prototype._=function(b){return this.onData(b),this.open&&this.get(),this},i.prototype.ready=function(b,l){var d=this;if(!j){return l.call(this)}f.util.load(function(){l.call(d)})},i.check=function(){return"document" in k},i.xdomainCheck=function(){return !0},f.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);var ansispan=function(c){var b=c.split("\033[0m");for(var a in b){if(!b[a].match(/\033\[[^m]*m/)){b[a]="<span>"+b[a]}else{b[a]=b[a].replace(/\033\[([^m]*)m/,function(d,i){var e=i.split(";");var h='<span style="';for(var f in e){h+=ansispan.styles[e[f]]||""}h+='">';return h})}}return b.join("</span>")+"</span>"};var validANSI=function(b){var a=b.split("\033[0m");return !a[a.length-1].match(/\033\[[^m]*m/)};ansispan.styles={"30":"color: black; ","31":"color: red; ","32":"color: green; ","33":"color: yellow; ","35":"color: purple; ","36":"color: cyan; ","37":"color: white; ","1":"font-weight: bold; ","3":"font-style: italic; ","4":"text-decoration: underline; "};if(typeof module=="object"&&typeof window=="undefined"){module.exports=ansispan}var CS50=CS50||{};CS50.Run=function(b){this.options=b;if(!this.options.container){throw"Error: You must define a container for run50!"}this.options.defaultLanguage=(b.defaultLanguage===undefined)?"C":b.defaultLanguage;this.options.endpoint=(b.endpoint===undefined)?"":b.endpoint.replace(/\/+$/,"");this.options.languages=(b.languages===undefined)?["C","Java","PHP","Python","Ruby"]:b.languages;this.commands={"text/x-csrc":[{command:"clang file.c",args:"-std=c99 -Wall -Werror -fno-color-diagnostics -lcs50 -lm"},{command:"./a.out",args:""}],"text/x-java":[{command:"javac -J-Xmx128M file.java",args:""},{command:"java -Xmx64M",args:"Class"}],"text/x-php":[{command:"php file.php",args:""}],"text/x-python":[{command:"python file.py",args:""}],"text/x-ruby":[{command:"ruby file.rb",args:""}]};this.extensions={"text/x-csrc":"c","text/x-java":"java","text/x-php":"php","text/x-python":"py","text/x-ruby":"rb"};this.languageNames={C:"text/x-csrc",Java:"text/x-java",PHP:"text/x-php",Python:"text/x-python",Ruby:"text/x-ruby"};this.samples={"text/x-csrc":'#include <cs50.h>\n#include <stdio.h>\n\nint\nmain(int argc, char *argv[])\n{\n    printf("Enter your name: ");\n    string s = GetString();\n    printf("Hello, %s!\\n", s);\n    return 0;\n}\n',"text/x-java":'class Main {\n    public static void main(String[] args) {\n        System.out.println("Hello, run50!");\n    }\n}\n',"text/x-php":'<?php\n\necho "Hello, run50!\\n";\n\n?>\n',"text/x-python":'print "Hello, run50!"',"text/x-ruby":'puts "Hello, run50!"'};var c={editor:'             <div class="run50-container">                 <div class="run50-controls">                     <button class="btn-run">                        <div class="run-img"></div>                        <div class="paused-img"></div>                     </button>                     <div class="run50-lang-wrapper">                         <select class="run50-lang chzn-select">                             <% for (var i in languages) { %>                                 <option value="<%= languageNames[languages[i]] %>"><%= languages[i] %></option>                             <% } %>                         </select>                    </div>                     <div class="btn-options">                         <div class="gear-btn"></div>                     </div>                     <div class="run50-status">                         <span class="status-text"></span>                         <img class="status-loader" src="css/img/ajax-bar.gif"/>                     </div>                     <div class="run50-options"></div>                 </div>                 <div class="run50-split-container">                     <div class="run50-code-container">                         <textarea class="run50-code"><%= samples[languageNames[defaultLanguage]] %></textarea>                     </div>                     <div class="run50-splitter">&equiv;&equiv;&equiv;</div>                     <div class="run50-console-container">                         <pre class="run50-console"><div contenteditable="false" class="run50-input active"></div></pre>                     </div>                 </div>             </div>         ',runOption:'             <div data-id-command="<%= cmd.command %>"><%= cmd.command %></div>             <div id="<%= cmd.command %>" type="text" contenteditable="true"><%= cmd.args %></div>             <div class="divider"></div>         '};this.templates={};for(var a in c){this.templates[a]=_.template(c[a])}this.createEditor()};CS50.Run.prototype.createEditor=function(){var c=this;var e=$(this.options.container);e.html(this.templates.editor({defaultLanguage:this.options.defaultLanguage,languages:this.options.languages,languageNames:this.languageNames,samples:this.samples}));this.editor=CodeMirror.fromTextArea(e.find(".run50-code")[0],{indentUnit:4,lineNumbers:true,lineWrapping:true});var a=function(){var h=e.height();e.find(".run50-controls, .run50-splitter, .run50-console-container").each(function(j,k){h-=$(k).outerHeight()});var f=e.width();e.find(".CodeMirror").width(f).height(h);e.find(".CodeMirror-gutter, .CodeMirror-scrollbar, .CodeMirror-scroll").height(h);e.find(".run50-container, .run50-controls, .run50-console-container, .run50-splitter").width(f)};a();$(window).on("resize",function(){a()});e.on("click",".btn-run",function(){if($(this).hasClass("running")){c.socket.emit("SIGINT");e.find(".run50-input.active").before("<br/>")}else{if(!$(this).hasClass("uploading")){$(this).addClass("uploading");$(".run50-status .status-loader").fadeIn();$(".run50-controls").removeClass(".success, .error");c.run()}}});e.on("keyup",".run50-input",function(f){if(f.ctrlKey){if(f.which==67){c.socket.emit("SIGINT");e.find(".run50-input.active").before("<br/>")}else{if(f.which==68){c.socket.emit("EOF")}}}});e.on("change",".run50-lang",function(){c.setLanguage($(this).val())});e.find(".run50-lang").val(this.languageNames[this.options.defaultLanguage]).chosen().trigger("change");e.on("click",".btn-options",function(){$options=e.find(".run50-options");function f(j){j.focus();if(typeof window.getSelection!="undefined"&&typeof document.createRange!="undefined"){var i=document.createRange();i.selectNodeContents(j);i.collapse(false);var k=window.getSelection();k.removeAllRanges();k.addRange(i)}else{if(typeof document.body.createTextRange!="undefined"){var h=document.body.createTextRange();h.moveToElementText(j);h.collapse(false);h.select()}}}if($options.is(":visible")){e.find(".run50-options").slideUp();e.find(".btn-options").removeClass("active")}else{e.find(".run50-options").slideDown(function(){f($(this).find("[contenteditable]").first()[0])});e.find(".btn-options").addClass("active")}});var d=0;var b=0;e.find(".run50-splitter").draggable({axis:"y",drag:function(h,j){var f=d+j.position.top;var i=b-j.position.top;if(f>100&&i>50){e.find(".CodeMirror, .CodeMirror-gutter, .CodeMirror-scrollbar, .CodeMirror-scroll").height(d+j.position.top);e.find(".run50-console-container").height(b-j.position.top)}else{return false}},start:function(f,h){d=e.find(".CodeMirror").height();b=e.find(".run50-console-container").height()}});e.on("blur",".run50-options [contenteditable]",function(){var f=this;e.find(".run50-options [contenteditable]").each(function(h,j){if(f==this){c.commands[c.language][h].args=$(this).text()}})});e.on("click",".run50-console",function(){$(this).find(".run50-input").focus()});e.on("keypress",".run50-input.active",function(f){if(f.which==13){c.socket.emit("stdin",$(this).text()+"\n");$(this).removeClass("active").attr("contenteditable",false).after("\n");$console=$(this).parents(".run50-console");$console.append('<div class="run50-input active" contenteditable="true"></div>');$console.find(".run50-input.active").focus()}})};CS50.Run.prototype.execute=function(d){var h=d.shift();if(h){this.socket=io.connect(this.options.endpoint,{"force new connection":true});var f=$(this.options.container);var e=f.find(".run50-console");var a=f.find(".run50-status .status-text");a.text((d.length)?"Building...":"Running...");f.find(".run50-input.active").text(h).removeClass("active").after("\n");f.find(".run50-console").append('<div class="run50-input active" contenteditable="true"></div>');f.find(".run50-input.active").focus();this.scroll(f);var c=this;this.socket.on("success",function(i){c.socket.disconnect();if(i.code!==0){c.failure($(c.options.container))}else{c.newline(f,d.length===0);if(d.length===0){a.text("Run successful!");setTimeout(function(){f.find(".btn-run").removeClass("uploading running");f.find(".run50-status .status-loader").fadeOut();f.find(".run50-status").addClass("success")},300);setTimeout(function(){if(a.text()=="Run successful!"){$(".run50-status").removeClass("success")}a.fadeOut(function(){a.text("");a.show()})},2000)}else{c.sandbox=i.sandbox;c.execute(d)}}});this.socket.on("error",function(i){c.socket.disconnect();c.failure($(c.options.container),i.error.code)});this.socket.on("stdout",function(k){var i=$("<span>"+k+"</span>");var l=f.find(".run50-input.active").before(i);var j=i.position().left-parseInt($(c.options.container).find(".run50-console").css("padding-left"))+i.width();l.css({"text-indent":j,"min-width":j,"margin-left":-j});i.replaceWith(i.text());c.scroll(f)});var b="";this.socket.on("stderr",function(i){b+=i;if(validANSI(b)){var j=ansispan(b).replace(/\r\n<\/span>/g,"</span><br/>").replace(/\n<\/span>/g,"</span><br/>").replace(/<span>\r\n/g,"<br/><span>").replace(/<span>\n/g,"<br/><span>");f.find(".run50-input.active").before(j);c.scroll(f);blah=j;b=""}});this.socket.emit("run",{cmd:h,sandbox:this.sandbox})}};CS50.Run.prototype.failure=function(d,b){var a=this;var c="An error occurred.";switch(b){case"E_TIMEOUT":c="Your program took too long to run!";break;case"E_USAGE":c="CS50 Run was used incorrectly";break;case"E_KILLED":c="Your program was terminated!";break;case"E_USER_SERVER_DOWN":c="CS50 Run seems to be down. Wait and try again?";break;case"E_USER_UPLOAD_ERROR":c="Upload failed! Wait and try again?";break}d.find(".run50-status .status-text").text(c);d.find(".run50-status").addClass("error");setTimeout(function(){$(".run50-status").removeClass("error success")},2000);d.find(".btn-run").removeClass("uploading running");d.find(".run50-status .status-loader").fadeOut();a.newline(d,true)};CS50.Run.prototype.getCode=function(){return this.editor.getValue()};CS50.Run.prototype.newline=function(d,c){d.find(".run50-input.active").remove();var e=$('<div class="run50-input active" contenteditable="false"></div>');if(!c){var a=$("<span>jharvard@run.cs50.org (~): </span>");d.find(".run50-console").append(a);var b=a.position().left-parseInt($(this.options.container).find(".run50-console").css("padding-left"))+a.width();e.css({"text-indent":b,"min-width":b,"margin-left":-b});a.replaceWith(a.text())}d.find(".run50-console").append(e);this.scroll(d)};CS50.Run.prototype.run=function(){var a=_.map(this.commands[this.language].slice(0),function(b){return b.command+" "+b.args});this.upload("file."+this.extensions[this.language],a)};CS50.Run.prototype.setLanguage=function(c){var d=$(this.options.container);this.language=c;this.editor.setOption("mode",c);var b=this;var a=d.find(".run50-options").empty();_.each(this.commands[c],function(f){a.append(b.templates.runOption({cmd:f}))})};CS50.Run.prototype.scroll=function(a){a.find(".run50-console").scrollTop(999999)};CS50.Run.prototype.upload=function(e,c){var f=this;var h=$("<span>jharvard@run.cs50.org (~): </span>");var i=$(f.options.container).find(".run50-input.active").before(h);var b=h.position().left-parseInt($(f.options.container).find(".run50-console").css("padding-left"))+h.width();i.css({"text-indent":b,"min-width":b,"margin-left":-b});h.replaceWith(h.text());var m=$(f.options.container).find(".run50-status .status-text");m.text("Uploading source code...");var f=this;var a={};a[e]=this.editor.getValue();var l=$(this.options.container);var j=l.find(".btn-run");var d=function(n){k.abort()};var k=$.ajax({data:a,dataType:"json",type:"post",url:this.options.endpoint+"/upload",beforeSend:function(n){j.click(d);setTimeout(function(){if(n.readyState==0){n.abort()}},10000)},success:function(o,p,n){j.removeClass("uploading").addClass("running");f.sandbox={homedir:o.id};f.execute(c)},error:function(q,o,p){var n;if(q.readyState===0||(q.readyState==4&&q.status!==200)){f.failure($(f.options.container),"E_USER_SERVER_DOWN")}else{f.failure($(f.options.container),"E_USER_UPLOAD_ERROR")}},complete:function(n,o){j.unbind("click",d)}});return false};